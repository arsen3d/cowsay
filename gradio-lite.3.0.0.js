const __vite__fileDeps=["./assets/Index-B8X-RqQW.js","./assets/Index-DBP1hVY_.js","./assets/Index-CptIZeFZ.css","./assets/Index-C5NYahSl.css","./assets/Index-DCR06-MS.js","./assets/BlockLabel-GXqSAVYL.js","./assets/Empty-Cp3Q4QD4.js","./assets/Minimize-DbD0tJRu.js","./assets/Image-CWc8In4e.js","./assets/IconButtonWrapper-Cpv43LLF.js","./assets/file-url-D8DtV1l1.js","./assets/Index-E3yBBMTH.css","./assets/StaticAudio-tYA07v5_.js","./assets/ShareButton-BO_4XIYN.js","./assets/Community-CiO7ct8o.js","./assets/Download-CPM5Uzw-.js","./assets/Music-B_q-39r4.js","./assets/Trim-BigOmRf7.js","./assets/Play-CQ0aQ7Rc.js","./assets/Undo-kuTrkds9.js","./assets/hls-CnVhpNcu.js","./assets/DownloadLink-E9rgDYEZ.js","./assets/StaticAudio-BAKhejK8.css","./assets/Example-DUtUTR-I.js","./assets/Example-D7K5RtQ2.css","./assets/index-x1o_M2IK.js","./assets/Upload-Dh1YyWuU.js","./assets/Upload-TqyQQ5YY.css","./assets/ModifyUpload-D6oL0Bop.js","./assets/SelectSource-DdZrExSl.js","./assets/Upload-DDqWvqsW.js","./assets/StreamingBar-BmGcs968.js","./assets/UploadText-C8r9silK.js","./assets/index-4lHb9Y67.css","./assets/Index-Dbbt3W5B.js","./assets/Button-CcyUH2Wo.js","./assets/Button-DseXecWO.css","./assets/Index-DnIbZWq6.js","./assets/index-CnqicUFC.js","./assets/Image-k4CWT5Cc.js","./assets/Image-B8dFOee4.css","./assets/Trash-3Ua18x_H.js","./assets/Index.svelte_svelte_type_style_lang-DEjr9vp7.js","./assets/Check-CrvcIjro.js","./assets/Copy-BKUaL6FT.js","./assets/Example.svelte_svelte_type_style_lang-DZnE-Mn_.js","./assets/prism-python-BY1wU_KD.js","./assets/___vite-browser-external_commonjs-proxy-80fCFK6r.js","./assets/__vite-browser-external-DFe-p4yY.js","./assets/Example-DOg7hfhs.css","./assets/Index-7U9UAML0.css","./assets/Index--oA4HJK7.css","./assets/ImagePreview-Be53-Kwz.css","./assets/Example-BqADzo0_.js","./assets/Index-C_-G51t7.js","./assets/Info-B6p0akUA.js","./assets/Index-WIAKB-_s.css","./assets/Example-BzVHaJkj.js","./assets/Index-mRDZcvjt.js","./assets/BlockTitle-CQDcBL0A.js","./assets/Index-CndDFC_I.css","./assets/Index-BzYGVNvt.js","./assets/Code-DHMQjc7J.js","./assets/Example-oy4nawAR.js","./assets/Example-C7WkTPa-.js","./assets/Example-Bw8Q_3wB.css","./assets/Index-Cr-6NIPa.js","./assets/Index-B6tpubC5.css","./assets/Example-C0pRGtwj.js","./assets/Example-CX34aPix.css","./assets/Index-CVdAUFZC.js","./assets/dsv-DB8NKgIY.js","./assets/Index-DhthUqVy.css","./assets/Index-BJKn5ywA.js","./assets/Example-DF-_e6S-.js","./assets/Example-Cj3ii62O.css","./assets/Index-D3f6Hf9S.css","./assets/Textbox-CXonEEC-.css","./assets/Index-Cr14RaCM.js","./assets/Example-BHLXjFNj.js","./assets/Index-DjIb8LtA.css","./assets/Index-CTzxFP1K.js","./assets/Index-tcNSQSor.css","./assets/Example-B8TSVmu7.js","./assets/Index-DHN8R9kb.js","./assets/DropdownArrow-CJnk53mM.js","./assets/index-BW-aT-V7.js","./assets/Index-BAQumg2K.css","./assets/Example-DXm002T9.js","./assets/Example-DpWs9cEC.css","./assets/Index-BdEyirVf.js","./assets/FileUpload-DMbvRFYW.js","./assets/File-CO-UlNpX.js","./assets/FileUpload-2TE7T7kD.css","./assets/Example-_O8QfT9K.js","./assets/Example-DfhEULNF.css","./assets/Index-BWd-IQS5.js","./assets/Index-YPTlsVjp.css","./assets/Index-BRqwkKcb.js","./assets/Index-B0JJ6p9c.css","./assets/Gallery-B8VXrrez.js","./assets/Video-BZd-Eehb.js","./assets/Video-DJw86Ppo.css","./assets/Gallery-lBGO3evM.css","./assets/Index-CLTdAPOE.js","./assets/Index-DaMrW0q3.js","./assets/Index-Cgj6KPvj.css","./assets/Index-B5YTCxfh.js","./assets/color-Dz5ygqaR.js","./assets/Index-Dwy3Ni24.css","./assets/Index-ClZmchXG.js","./assets/Index-BWRZNyp7.css","./assets/Example-BhNfomJL.js","./assets/Example-CSw4pLi5.css","./assets/ImagePreview-HI3lx22P.js","./assets/utils-Gtzs_Zla.js","./assets/Example-Dl2aPaSm.js","./assets/Example-DikqVAPo.css","./assets/Index-CaBhSVTV.js","./assets/ImageUploader-D9JtO879.js","./assets/Square-BSId6bjy.js","./assets/ImageUploader-C-a3Rtgj.css","./assets/Example-ni-qeC9K.js","./assets/Example-6rv12T44.css","./assets/Index-DZEhfE62.js","./assets/Index-D1TeKtHd.css","./assets/Index-BadCXg7c.js","./assets/Index-DItMwpQq.css","./assets/Index-CiA4oR44.js","./assets/LineChart-OXXaJ9uM.js","./assets/Index-BM4_tjMk.css","./assets/Example-B7ODrjMo.js","./assets/Index-BjKOnuHa.js","./assets/Example-DdzFbIB-.js","./assets/Index-D9O2ZyVj.js","./assets/Index-Be3F7oKw.css","./assets/Example-zCFe0rjf.js","./assets/Example-CCTTJ5R1.css","./assets/Index-BonJuDFB.js","./assets/Send-CKrt2GbZ.js","./assets/Video-1iGVXYrJ.js","./assets/Index-DkNmc25-.css","./assets/Index-Dh-k4-gY.js","./assets/Index-DvmFt2zS.css","./assets/Example-BGESePce.js","./assets/Index-DbIoPSKM.js","./assets/Index-BUublr_b.css","./assets/Example-Cw_ippvW.js","./assets/Index-CLpzknoV.js","./assets/Index-D7E3Vipz.css","./assets/Plot-C3xyBZMj.js","./assets/Index-Dm19polb.js","./assets/Example-DVBOkK3s.js","./assets/Index-BgLjzi_Y.js","./assets/Index-t81AGu2X.css","./assets/Index-4I0BqrYH.js","./assets/Index-C43SQM_O.css","./assets/Example-CFO2CuGc.js","./assets/Index-a_KYtmlE.js","./assets/Index-Cjdtfr90.css","./assets/index-D7dsClkR.js","./assets/Toast-BYfIa7uJ.js","./assets/Index-DO0iNtFz.js","./assets/Tabs-C1jh4k4q.js","./assets/Tabs-DvBEsnhq.css","./assets/Index-BcNLXLca.css","./assets/Index-BAGEJbRZ.js","./assets/Index-D6nmNWeK.js","./assets/Textbox-Z1EC4WAq.js","./assets/Index-DF0HHV-F.js","./assets/Index-DYDmCduo.css","./assets/VideoPreview-Ligt--vw.js","./assets/VideoPreview-wQufNXbv.css","./assets/Example-rzygCx1i.js","./assets/Example-B5CSTz0f.css","./assets/index-CZMvlbQa.js","./assets/index-CFBZQE_H.css","./assets/Example-Dp9u5d8k.js","./assets/Blocks-Bo9iBAHr.js","./assets/Blocks-yLdzXwzS.css","./assets/Login-BFKY5FiJ.js","./assets/Login-BCwzjozv.css","./assets/index-Cf0ywdAX.js","./assets/index-B3MFEtX_.js","./assets/index-BM2zRQ2K.js","./assets/index-tQb5O2Iq.js","./assets/index-D_u4gRAp.js","./assets/index-bMZ-jrtJ.js","./assets/frontmatter-CjVD65dF.js","./assets/yaml-DsCXHVTH.js","./assets/index-BnFMPAtm.js","./assets/wrapper-CviSselG-DCvi549i.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();const $c=new Map;function yb(i){const e=$c.get(i.toString());if(e)return console.debug(`Reusing the cached worker blob URL for ${i.toString()}.`),e;const t=new Blob([`importScripts("${i.toString()}");`],{type:"text/javascript"}),n=URL.createObjectURL(t);return $c.set(i.toString(),n),n}class wb{constructor(e,t){const{shared:n=!1,...r}=t??{};try{this.worker=n?new SharedWorker(e,r):new Worker(e,r)}catch{console.debug(`Failed to load a worker script from ${e.toString()}. Trying to load a cross-origin worker...`);const o=yb(e);this.worker=n?new SharedWorker(o,r):new Worker(o,r)}}}class vb{constructor(){this.promiseInternal=new Promise((e,t)=>{this.resolveInternal=e,this.rejectInternal=t})}get promise(){return this.promiseInternal}resolve(e){this.resolveInternal(e)}reject(e){this.rejectInternal(e)}}function kb(i){const e=[];for(const[t,n]of Object.entries(i))e.push([t,n]);return e}function Kc(i){let e="";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e}function id(i){return i=i.map(([e,t])=>[Kc(e),Kc(t)]),Object.fromEntries(i)}function xb(i,e){const t=e.toLowerCase();for(const[n,r]of Object.entries(i))if(n.toLowerCase()===t)return r}function Sb(i,e){if(Math.floor(e.status/100)!==2){let t,n;try{t=new TextDecoder().decode(e.body)}catch{t="(failed to decode body)"}try{n=JSON.parse(t)}catch{n="(failed to parse body as JSON)"}console.error("Wasm HTTP error",{request:i,response:e,bodyText:t,bodyJson:n})}}class Eb extends EventTarget{constructor(e){super(),this.firstRunPromiseDelegate=new vb;const t=e.sharedWorkerMode;console.debug("WorkerProxy.constructor(): Create a new worker.");const n=new wb(new URL(""+new URL("assets/webworker-Er6yXxw8.js",import.meta.url).href,import.meta.url),{shared:t});this.worker=n.worker,t?(this.postMessageTarget=this.worker.port,this.postMessageTarget.start(),this.postMessageTarget.onmessage=r=>{this._processWorkerMessage(r.data)}):(this.postMessageTarget=this.worker,this.worker.onmessage=r=>{this._processWorkerMessage(r.data)}),this.postMessageAsync({type:"init-env",data:{gradioWheelUrl:e.gradioWheelUrl,gradioClientWheelUrl:e.gradioClientWheelUrl}}).then(()=>{console.debug("WorkerProxy.constructor(): Environment initialization is done.")}).catch(r=>{console.error("WorkerProxy.constructor(): Initialization failed.",r),this.dispatchEvent(new CustomEvent("initialization-error",{detail:r}))}),this.postMessageAsync({type:"init-app",data:{files:e.files,requirements:e.requirements}}).then(()=>{this.dispatchEvent(new CustomEvent("initialization-completed",{detail:null}))}).catch(r=>{console.error("WorkerProxy.constructor(): Initialization failed.",r),this.dispatchEvent(new CustomEvent("initialization-error",{detail:r}))})}async runPythonCode(e){await this.postMessageAsync({type:"run-python-code",data:{code:e}}),this.firstRunPromiseDelegate.resolve()}async runPythonFile(e){await this.postMessageAsync({type:"run-python-file",data:{path:e}}),this.firstRunPromiseDelegate.resolve()}postMessageAsync(e){return new Promise((t,n)=>{const r=new MessageChannel;r.port1.onmessage=s=>{r.port1.close();const o=s.data;if(o.type==="reply:error"){n(o.error);return}t(o.data)},this.postMessageTarget.postMessage(e,[r.port2])})}_processWorkerMessage(e){switch(e.type){case"progress-update":{this.dispatchEvent(new CustomEvent("progress-update",{detail:e.data.log}));break}}}requestAsgi(e){const t=new MessageChannel,n={type:"asgi-request",data:{scope:e}};return this.postMessageTarget.postMessage(n,[t.port2]),t.port1}async httpRequest(e){return await this.firstRunPromiseDelegate.promise,console.debug("WorkerProxy.httpRequest()",e),new Promise((t,n)=>{const r={type:"http",asgi:{version:"3.0",spec_version:"2.1"},http_version:"1.1",scheme:"http",method:e.method,path:decodeURIComponent(e.path),query_string:decodeURIComponent(e.query_string),root_path:"",headers:kb(e.headers)},s=this.requestAsgi(r);let o,l,a=new Uint8Array;if(s.addEventListener("message",c=>{const h=c.data;if(console.debug("send from ASGIapp",h),h.type==="http.response.start")o=h.status,l=id(h.headers);else if(h.type==="http.response.body"){if(a=new Uint8Array([...a,...h.body]),!h.more_body){const u={status:o,headers:l,body:a};console.debug("HTTP response",u),s.postMessage({type:"http.disconnect"}),Sb(e,u),t(u)}}else n(`Unhandled ASGI event: ${JSON.stringify(h)}`)}),s.start(),e.body instanceof ReadableStream){const c=e.body.getReader();c.read().then(function h({done:u,value:f}){if(u){s.postMessage({type:"http.request",more_body:!1,body:void 0});return}return s.postMessage({type:"http.request",more_body:!u,body:f}),c.read().then(h)})}else s.postMessage({type:"http.request",more_body:!1,body:e.body??void 0})})}writeFile(e,t,n){return this.postMessageAsync({type:"file:write",data:{path:e,data:t,opts:n}})}renameFile(e,t){return this.postMessageAsync({type:"file:rename",data:{oldPath:e,newPath:t}})}unlink(e){return this.postMessageAsync({type:"file:unlink",data:{path:e}})}install(e){return this.postMessageAsync({type:"install",data:{requirements:e}})}terminate(){Tb(this.postMessageTarget)&&(console.debug("Closing the message port..."),this.postMessageTarget.close()),Ab(this.worker)&&(console.debug("Terminating the worker..."),this.worker.terminate())}}function Ab(i){return"terminate"in i}function Tb(i){return"close"in i}class Cb extends EventTarget{constructor(e,t){super(),this.url=t,this.readyState=0,this.addEventListener("open",r=>{this.onopen&&this.onopen(r)}),this.addEventListener("message",r=>{this.onmessage&&this.onmessage(r)}),this.addEventListener("error",r=>{this.onerror&&this.onerror(r)});const n={type:"http",asgi:{version:"3.0",spec_version:"2.1"},http_version:"1.1",scheme:"http",method:"GET",path:t.pathname,query_string:t.searchParams.toString(),root_path:"",headers:[["accept","text/event-stream"]]};this.port=e.requestAsgi(n),this.port.addEventListener("message",this._handleAsgiSendEvent.bind(this)),this.port.start(),this.port.postMessage({type:"http.request"})}close(){this.readyState!==2&&(this.port.postMessage({type:"http.disconnect"}),this.port.close(),this.readyState=2)}_handleAsgiSendEvent(e){const t=e.data;if(t.type==="http.response.start"){const n=t.status,r=id(t.headers);console.debug("[MessagePortEventSource] HTTP response start",{status:n,headers:r});const s=xb(r,"content-type");if(n!==200||s==null||s.split(";")[0]!=="text/event-stream"){this.readyState=2,this.dispatchEvent(new Event("error"));return}this.readyState=1,this.dispatchEvent(new Event("open"))}else if(t.type==="http.response.body"){const n=new TextDecoder().decode(t.body);console.debug("[MessagePortEventSource] HTTP response body",n),this.interpretEventStream(n),t.more_body||this.close()}}interpretEventStream(e){const t=this,n=e.split(/\r\n|\n|\r/);let r="",s="",o="";for(const c of n)if(c==="")a();else if(!c.startsWith(":"))if(c.includes(":")){const[h,...u]=c.split(":"),f=u.join(":").trimStart();l(h,f)}else l(c,"");function l(c,h){c==="event"?s=h:c==="data"?r+=h+`
`:c==="id"&&(h.includes("\0")||(o=h))}function a(){if(r===""){r="",s="";return}r.endsWith(`
`)&&(r=r.slice(0,-1));const c=new MessageEvent(s===""?"message":s,{data:r,lastEventId:o,origin:t.url.origin});r="",s="",t.readyState!==2&&(console.debug("[MessagePortEventSource] dispatching event",c),t.dispatchEvent(c))}}}function Xc(i){const e=i.split(`
`);let t=null;return e.forEach(r=>{const s=r.match(/^(\s*)\S/);if(s){const o=s[1].length;t=t!==null?Math.min(t,o):o}}),t===null||t===0?i.trim():e.map(r=>r.substring(t)).join(`
`).trim()}function Ob(i){return i.split(`
`).filter(e=>!e.startsWith("#")).map(e=>e.trim()).filter(e=>e!=="")}function Mb(i){const e="gradio-lite";if(customElements.get(e))return;class t extends HTMLElement{constructor(){super(...arguments),this.controller=null}connectedCallback(){window.requestAnimationFrame(()=>{const r=this.parseGradioComponentOptions(),s=this.parseGradioLiteAppOptions();this.innerHTML="",this.controller=i({target:this,code:s.code,requirements:s.requirements,files:s.files,entrypoint:s.entrypoint,playground:this.hasAttribute("playground"),layout:this.getAttribute("layout"),...r})})}disconnectedCallback(){this.controller?.unmount()}parseGradioComponentOptions(){const r=this.hasAttribute("info"),s=this.hasAttribute("container"),o=this.hasAttribute("embed"),l=this.getAttribute("initial-height"),a=this.hasAttribute("eager"),c=this.getAttribute("theme"),h=this.hasAttribute("auto-scroll"),u=this.hasAttribute("control-page-title"),f=this.hasAttribute("app-mode"),d=this.hasAttribute("shared-worker");return{info:r,container:s,isEmbed:o,initialHeight:l??void 0,eager:a,themeMode:c!=null&&["light","dark"].includes(c)?c:null,autoScroll:h,controlPageTitle:u,appMode:f,sharedWorkerMode:d}}parseGradioLiteAppOptions(){const r={},s=this.getElementsByTagName("gradio-file");for(const c of s){const h=c.getAttribute("name");if(h==null)throw new Error("<gradio-file> must have the name attribute.");const u=c.hasAttribute("entrypoint"),f=c.getAttribute("url");if(r.files??={},f!=null)r.files[h]={url:f};else{let d=c.textContent??"";h.endsWith(".py")&&(d=Xc(d)),r.files[h]={data:d}}if(u){if(r.entrypoint!=null)throw new Error("Multiple entrypoints are not allowed.");r.entrypoint=h}}if(r.entrypoint==null){const c=this.getElementsByTagName("gradio-code");if(c.length===0){let h="";this.childNodes.forEach(u=>{u.nodeType===Node.TEXT_NODE&&(h+=u.textContent)}),r.code=h||void 0}else{c.length>1&&console.warn("Multiple <gradio-code> elements are found. Only the first one will be used.");const h=c[0];r.code=h?.textContent??void 0}r.code=r.code&&Xc(r.code)}const o=this.getElementsByTagName("gradio-requirements");o.length>1&&console.warn("Multiple <gradio-requirements> elements are found. Only the first one will be used.");const a=o[0]?.textContent??"";return r.requirements=Ob(a),r}}customElements.define(e,t)}function Ee(){}const za=i=>i;function Wa(i,e){for(const t in e)i[t]=e[t];return i}function nd(i){return i()}function Jc(){return Object.create(null)}function vi(i){i.forEach(nd)}function on(i){return typeof i=="function"}function vt(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}let rs;function RO(i,e){return i===e?!0:(rs||(rs=document.createElement("a")),rs.href=e,i===rs.href)}function IO(i,e){return i!=i?e==e:i!==e}function Db(i){return Object.keys(i).length===0}function Ga(i,...e){if(i==null){for(const n of e)n(void 0);return Ee}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function NO(i){let e;return Ga(i,t=>e=t)(),e}function Ln(i,e,t){i.$$.on_destroy.push(Ga(e,t))}function Wr(i,e,t,n){if(i){const r=rd(i,e,t,n);return i[0](r)}}function rd(i,e,t,n){return i[1]&&n?Wa(t.ctx.slice(),i[1](n(e))):t.ctx}function Gr(i,e,t,n){if(i[2]&&n){const r=i[2](n(t));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let l=0;l<o;l+=1)s[l]=e.dirty[l]|r[l];return s}return e.dirty|r}return e.dirty}function qr(i,e,t,n,r,s){if(r){const o=rd(e,t,n,s);i.p(o,r)}}function $r(i){if(i.ctx.length>32){const e=[],t=i.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function BO(i){const e={};for(const t in i)t[0]!=="$"&&(e[t]=i[t]);return e}function HO(i,e){const t={};e=new Set(e);for(const n in i)!e.has(n)&&n[0]!=="$"&&(t[n]=i[n]);return t}function FO(i){return i??""}function VO(i,e,t){return i.set(t),e}function jO(i){return i&&on(i.destroy)?i.destroy:Ee}function UO(i){const e=typeof i=="string"&&i.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[i,"px"]}const sd=typeof window<"u";let Cr=sd?()=>window.performance.now():()=>Date.now(),qa=sd?i=>requestAnimationFrame(i):Ee;const Tn=new Set;function od(i){Tn.forEach(e=>{e.c(i)||(Tn.delete(e),e.f())}),Tn.size!==0&&qa(od)}function fo(i){let e;return Tn.size===0&&qa(od),{promise:new Promise(t=>{Tn.add(e={c:i,f:t})}),abort(){Tn.delete(e)}}}const ld=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;class po{_listeners="WeakMap"in ld?new WeakMap:void 0;_observer=void 0;options;constructor(e){this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(e=>{for(const t of e)po.entries.set(t.target,t),this._listeners.get(t.target)?.(t)}))}}po.entries="WeakMap"in ld?new WeakMap:void 0;function q(i,e){i.appendChild(e)}function ad(i){if(!i)return document;const e=i.getRootNode?i.getRootNode():i.ownerDocument;return e&&e.host?e:i.ownerDocument}function Pb(i){const e=Y("style");return e.textContent="/* empty */",Lb(ad(i),e),e.sheet}function Lb(i,e){return q(i.head||i,e),e.sheet}function j(i,e,t){i.insertBefore(e,t||null)}function V(i){i.parentNode&&i.parentNode.removeChild(i)}function cd(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function Y(i){return document.createElement(i)}function rt(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function fe(i){return document.createTextNode(i)}function Se(){return fe(" ")}function Mt(){return fe("")}function Fs(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function zO(i){return function(e){return e.preventDefault(),i.call(this,e)}}function WO(i){return function(e){return e.stopPropagation(),i.call(this,e)}}function C(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}const Rb=["width","height"];function Ib(i,e){const t=Object.getOwnPropertyDescriptors(i.__proto__);for(const n in e)e[n]==null?i.removeAttribute(n):n==="style"?i.style.cssText=e[n]:n==="__value"?i.value=i[n]=e[n]:t[n]&&t[n].set&&Rb.indexOf(n)===-1?i[n]=e[n]:C(i,n,e[n])}function Nb(i,e){Object.keys(e).forEach(t=>{Bb(i,t,e[t])})}function Bb(i,e,t){const n=e.toLowerCase();n in i?i[n]=typeof i[n]=="boolean"&&t===""?!0:t:e in i?i[e]=typeof i[e]=="boolean"&&t===""?!0:t:C(i,e,t)}function Yc(i){return/-/.test(i)?Nb:Ib}function GO(i){let e;return{p(...t){e=t,e.forEach(n=>i.push(n))},r(){e.forEach(t=>i.splice(i.indexOf(t),1))}}}function qO(i){return i===""?null:+i}function Hb(i){return Array.from(i.childNodes)}function je(i,e){e=""+e,i.data!==e&&(i.data=e)}function $O(i,e){i.value=e??""}function ne(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,"")}let ss;function Fb(){if(ss===void 0){ss=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ss=!0}}return ss}function KO(i,e){getComputedStyle(i).position==="static"&&(i.style.position="relative");const n=Y("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=Fb();let s;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=Fs(window,"message",o=>{o.source===n.contentWindow&&e()})):(n.src="about:blank",n.onload=()=>{s=Fs(n.contentWindow,"resize",e),e()}),q(i,n),()=>{(r||s&&n.contentWindow)&&s(),V(n)}}const XO=new po({box:"content-box"});function te(i,e,t){i.classList.toggle(e,!!t)}function hd(i,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(i,{detail:e,bubbles:t,cancelable:n})}class JO{is_svg=!1;e=void 0;n=void 0;t=void 0;a=void 0;constructor(e=!1){this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=rt(t.nodeName):this.e=Y(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)j(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(V)}}function Zc(i,e){return new i(e)}const Vs=new Map;let js=0;function Vb(i){let e=5381,t=i.length;for(;t--;)e=(e<<5)-e^i.charCodeAt(t);return e>>>0}function jb(i,e){const t={stylesheet:Pb(e),rules:{}};return Vs.set(i,t),t}function Us(i,e,t,n,r,s,o,l=0){const a=16.666/n;let c=`{
`;for(let m=0;m<=1;m+=a){const _=e+(t-e)*s(m);c+=m*100+`%{${o(_,1-_)}}
`}const h=c+`100% {${o(t,1-t)}}
}`,u=`__svelte_${Vb(h)}_${l}`,f=ad(i),{stylesheet:d,rules:p}=Vs.get(f)||jb(f,i);p[u]||(p[u]=!0,d.insertRule(`@keyframes ${u} ${h}`,d.cssRules.length));const g=i.style.animation||"";return i.style.animation=`${g?`${g}, `:""}${u} ${n}ms linear ${r}ms 1 both`,js+=1,u}function zs(i,e){const t=(i.style.animation||"").split(", "),n=t.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),r=t.length-n.length;r&&(i.style.animation=n.join(", "),js-=r,js||Ub())}function Ub(){qa(()=>{js||(Vs.forEach(i=>{const{ownerNode:e}=i.stylesheet;e&&V(e)}),Vs.clear())})}let Or;function yr(i){Or=i}function ln(){if(!Or)throw new Error("Function called outside component initialization");return Or}function YO(i){ln().$$.before_update.push(i)}function Mr(i){ln().$$.on_mount.push(i)}function ZO(i){ln().$$.after_update.push(i)}function $a(i){ln().$$.on_destroy.push(i)}function mo(){const i=ln();return(e,t,{cancelable:n=!1}={})=>{const r=i.$$.callbacks[e];if(r){const s=hd(e,t,{cancelable:n});return r.slice().forEach(o=>{o.call(i,s)}),!s.defaultPrevented}return!0}}function zb(i,e){return ln().$$.context.set(i,e),e}function Wb(i){return ln().$$.context.get(i)}function Gb(i,e){const t=i.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const vn=[],wt=[];let Cn=[];const Nl=[],ud=Promise.resolve();let Bl=!1;function fd(){Bl||(Bl=!0,ud.then(O))}function qb(){return fd(),ud}function Rn(i){Cn.push(i)}function wr(i){Nl.push(i)}const Uo=new Set;let mn=0;function O(){if(mn!==0)return;const i=Or;do{try{for(;mn<vn.length;){const e=vn[mn];mn++,yr(e),$b(e.$$)}}catch(e){throw vn.length=0,mn=0,e}for(yr(null),vn.length=0,mn=0;wt.length;)wt.pop()();for(let e=0;e<Cn.length;e+=1){const t=Cn[e];Uo.has(t)||(Uo.add(t),t())}Cn.length=0}while(vn.length);for(;Nl.length;)Nl.pop()();Bl=!1,Uo.clear(),yr(i)}function $b(i){if(i.fragment!==null){i.update(),vi(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(Rn)}}function Kb(i){const e=[],t=[];Cn.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Cn=e}let er;function Ka(){return er||(er=Promise.resolve(),er.then(()=>{er=null})),er}function Ji(i,e,t){i.dispatchEvent(hd(`${e?"intro":"outro"}${t}`))}const Cs=new Set;let ci;function Ht(){ci={r:0,c:[],p:ci}}function Ft(){ci.r||vi(ci.c),ci=ci.p}function re(i,e){i&&i.i&&(Cs.delete(i),i.i(e))}function se(i,e,t,n){if(i&&i.o){if(Cs.has(i))return;Cs.add(i),ci.c.push(()=>{Cs.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}const Xa={duration:0};function QO(i,e,t){const n={direction:"in"};let r=e(i,t,n),s=!1,o,l,a=0;function c(){o&&zs(i,o)}function h(){const{delay:f=0,duration:d=300,easing:p=za,tick:g=Ee,css:m}=r||Xa;m&&(o=Us(i,0,1,d,f,p,m,a++)),g(0,1);const _=Cr()+f,k=_+d;l&&l.abort(),s=!0,Rn(()=>Ji(i,!0,"start")),l=fo(y=>{if(s){if(y>=k)return g(1,0),Ji(i,!0,"end"),c(),s=!1;if(y>=_){const w=p((y-_)/d);g(w,1-w)}}return s})}let u=!1;return{start(){u||(u=!0,zs(i),on(r)?(r=r(n),Ka().then(h)):h())},invalidate(){u=!1},end(){s&&(c(),s=!1)}}}function eM(i,e,t){const n={direction:"out"};let r=e(i,t,n),s=!0,o;const l=ci;l.r+=1;let a;function c(){const{delay:h=0,duration:u=300,easing:f=za,tick:d=Ee,css:p}=r||Xa;p&&(o=Us(i,1,0,u,h,f,p));const g=Cr()+h,m=g+u;Rn(()=>Ji(i,!1,"start")),"inert"in i&&(a=i.inert,i.inert=!0),fo(_=>{if(s){if(_>=m)return d(0,1),Ji(i,!1,"end"),--l.r||vi(l.c),!1;if(_>=g){const k=f((_-g)/u);d(1-k,k)}}return s})}return on(r)?Ka().then(()=>{r=r(n),c()}):c(),{end(h){h&&"inert"in i&&(i.inert=a),h&&r.tick&&r.tick(1,0),s&&(o&&zs(i,o),s=!1)}}}function tM(i,e,t,n){let s=e(i,t,{direction:"both"}),o=n?0:1,l=null,a=null,c=null,h;function u(){c&&zs(i,c)}function f(p,g){const m=p.b-o;return g*=Math.abs(m),{a:o,b:p.b,d:m,duration:g,start:p.start,end:p.start+g,group:p.group}}function d(p){const{delay:g=0,duration:m=300,easing:_=za,tick:k=Ee,css:y}=s||Xa,w={start:Cr()+g,b:p};p||(w.group=ci,ci.r+=1),"inert"in i&&(p?h!==void 0&&(i.inert=h):(h=i.inert,i.inert=!0)),l||a?a=w:(y&&(u(),c=Us(i,o,p,m,g,_,y)),p&&k(0,1),l=f(w,m),Rn(()=>Ji(i,p,"start")),fo(A=>{if(a&&A>a.start&&(l=f(a,m),a=null,Ji(i,l.b,"start"),y&&(u(),c=Us(i,o,l.b,l.duration,0,_,s.css))),l){if(A>=l.end)k(o=l.b,1-o),Ji(i,l.b,"end"),a||(l.b?u():--l.group.r||vi(l.group.c)),l=null;else if(A>=l.start){const M=A-l.start;o=l.a+l.d*_(M/l.duration),k(o,1-o)}}return!!(l||a)}))}return{run(p){on(s)?Ka().then(()=>{s=s({direction:p?"in":"out"}),d(p)}):d(p)},end(){u(),l=a=null}}}function Ws(i){return i?.length!==void 0?i:Array.from(i)}function iM(i,e){i.d(1),e.delete(i.key)}function Xb(i,e){se(i,1,1,()=>{e.delete(i.key)})}function nM(i,e){i.f(),Xb(i,e)}function rM(i,e,t,n,r,s,o,l,a,c,h,u){let f=i.length,d=s.length,p=f;const g={};for(;p--;)g[i[p].key]=p;const m=[],_=new Map,k=new Map,y=[];for(p=d;p--;){const R=u(r,s,p),P=t(R);let x=o.get(P);x?y.push(()=>x.p(R,e)):(x=c(P,R),x.c()),_.set(P,m[p]=x),P in g&&k.set(P,Math.abs(p-g[P]))}const w=new Set,A=new Set;function M(R){re(R,1),R.m(l,h),o.set(R.key,R),h=R.first,d--}for(;f&&d;){const R=m[d-1],P=i[f-1],x=R.key,E=P.key;R===P?(h=R.first,f--,d--):_.has(E)?!o.has(x)||w.has(x)?M(R):A.has(E)?f--:k.get(x)>k.get(E)?(A.add(x),M(R)):(w.add(E),f--):(a(P,o),f--)}for(;f--;){const R=i[f];_.has(R.key)||a(R,o)}for(;d;)M(m[d-1]);return vi(y),m}function dd(i,e){const t={},n={},r={$$scope:1};let s=i.length;for(;s--;){const o=i[s],l=e[s];if(l){for(const a in o)a in l||(n[a]=1);for(const a in l)r[a]||(t[a]=l[a],r[a]=1);i[s]=l}else for(const a in o)r[a]=1}for(const o in n)o in t||(t[o]=void 0);return t}function Jb(i){return typeof i=="object"&&i!==null?i:{}}function vr(i,e,t){const n=i.$$.props[e];n!==void 0&&(i.$$.bound[n]=t,t(i.$$.ctx[n]))}function at(i){i&&i.c()}function et(i,e,t){const{fragment:n,after_update:r}=i.$$;n&&n.m(e,t),Rn(()=>{const s=i.$$.on_mount.map(nd).filter(on);i.$$.on_destroy?i.$$.on_destroy.push(...s):vi(s),i.$$.on_mount=[]}),r.forEach(Rn)}function tt(i,e){const t=i.$$;t.fragment!==null&&(Kb(t.after_update),vi(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Yb(i,e){i.$$.dirty[0]===-1&&(vn.push(i),fd(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function Jt(i,e,t,n,r,s,o=null,l=[-1]){const a=Or;yr(i);const c=i.$$={fragment:null,ctx:[],props:s,update:Ee,not_equal:r,bound:Jc(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Jc(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let h=!1;if(c.ctx=t?t(i,e.props||{},(u,f,...d)=>{const p=d.length?d[0]:f;return c.ctx&&r(c.ctx[u],c.ctx[u]=p)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](p),h&&Yb(i,u)),f}):[],c.update(),h=!0,vi(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const u=Hb(e.target);c.fragment&&c.fragment.l(u),u.forEach(V)}else c.fragment&&c.fragment.c();e.intro&&re(i.$$.fragment),et(i,e.target,e.anchor),O()}yr(a)}class Yt{$$=void 0;$$set=void 0;$destroy(){tt(this,1),this.$destroy=Ee}$on(e,t){if(!on(t))return Ee;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!Db(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Zb="modulepreload",Qb=function(i,e){return new URL(i,e).href},Qc={},I=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");r=Promise.all(t.map(a=>{if(a=Qb(a,n),a in Qc)return;Qc[a]=!0;const c=a.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const p=s[d];if(p.href===a&&(!c||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":Zb,c||(f.as="script",f.crossOrigin=""),f.href=a,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((d,p)=>{f.addEventListener("load",d),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},ey="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='10'%20height='10'%20fill='none'%3e%3cpath%20fill='%23FF3270'%20d='M1.93%206.03v2.04h2.04V6.03H1.93Z'/%3e%3cpath%20fill='%23861FFF'%20d='M6.03%206.03v2.04h2.04V6.03H6.03Z'/%3e%3cpath%20fill='%23097EFF'%20d='M1.93%201.93v2.04h2.04V1.93H1.93Z'/%3e%3cpath%20fill='%23000'%20fill-rule='evenodd'%20d='M.5%201.4c0-.5.4-.9.9-.9h3.1a.9.9%200%200%201%20.87.67A2.44%202.44%200%200%201%209.5%202.95c0%20.65-.25%201.24-.67%201.68.39.1.67.46.67.88v3.08c0%20.5-.4.91-.9.91H1.4a.9.9%200%200%201-.9-.9V1.4Zm1.43.53v2.04h2.04V1.93H1.93Zm0%206.14V6.03h2.04v2.04H1.93Zm4.1%200V6.03h2.04v2.04H6.03Zm0-5.12a1.02%201.02%200%201%201%202.04%200%201.02%201.02%200%200%201-2.04%200Z'%20clip-rule='evenodd'/%3e%3cpath%20fill='%23FFD702'%20d='M7.05%201.93a1.02%201.02%200%201%200%200%202.04%201.02%201.02%200%200%200%200-2.04Z'/%3e%3c/svg%3e",gn=[];function ty(i,e){return{subscribe:fi(i,e).subscribe}}function fi(i,e=Ee){let t;const n=new Set;function r(l){if(vt(i,l)&&(i=l,t)){const a=!gn.length;for(const c of n)c[1](),gn.push(c,i);if(a){for(let c=0;c<gn.length;c+=2)gn[c][0](gn[c+1]);gn.length=0}}}function s(l){r(l(i))}function o(l,a=Ee){const c=[l,a];return n.add(c),n.size===1&&(t=e(r,s)||Ee),l(i),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:r,update:s,subscribe:o}}function qn(i,e,t){const n=!Array.isArray(i),r=n?[i]:i;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return ty(t,(o,l)=>{let a=!1;const c=[];let h=0,u=Ee;const f=()=>{if(h)return;u();const p=e(n?c[0]:c,o,l);s?o(p):u=on(p)?p:Ee},d=r.map((p,g)=>Ga(p,m=>{c[g]=m,h&=~(1<<g),a&&f()},()=>{h|=1<<g}));return a=!0,f(),function(){vi(d),u(),a=!1}})}var sM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iy(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function oM(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),t}var ny=function(e){return ry(e)&&!sy(e)};function ry(i){return!!i&&typeof i=="object"}function sy(i){var e=Object.prototype.toString.call(i);return e==="[object RegExp]"||e==="[object Date]"||ay(i)}var oy=typeof Symbol=="function"&&Symbol.for,ly=oy?Symbol.for("react.element"):60103;function ay(i){return i.$$typeof===ly}function cy(i){return Array.isArray(i)?[]:{}}function Dr(i,e){return e.clone!==!1&&e.isMergeableObject(i)?In(cy(i),i,e):i}function hy(i,e,t){return i.concat(e).map(function(n){return Dr(n,t)})}function uy(i,e){if(!e.customMerge)return In;var t=e.customMerge(i);return typeof t=="function"?t:In}function fy(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter(function(e){return Object.propertyIsEnumerable.call(i,e)}):[]}function eh(i){return Object.keys(i).concat(fy(i))}function pd(i,e){try{return e in i}catch{return!1}}function dy(i,e){return pd(i,e)&&!(Object.hasOwnProperty.call(i,e)&&Object.propertyIsEnumerable.call(i,e))}function py(i,e,t){var n={};return t.isMergeableObject(i)&&eh(i).forEach(function(r){n[r]=Dr(i[r],t)}),eh(e).forEach(function(r){dy(i,r)||(pd(i,r)&&t.isMergeableObject(e[r])?n[r]=uy(r,t)(i[r],e[r],t):n[r]=Dr(e[r],t))}),n}function In(i,e,t){t=t||{},t.arrayMerge=t.arrayMerge||hy,t.isMergeableObject=t.isMergeableObject||ny,t.cloneUnlessOtherwiseSpecified=Dr;var n=Array.isArray(e),r=Array.isArray(i),s=n===r;return s?n?t.arrayMerge(i,e,t):py(i,e,t):Dr(e,t)}In.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,r){return In(n,r,t)},{})};var my=In,gy=my;const _y=iy(gy);var Hl=function(i,e){return Hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},Hl(i,e)};function go(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Hl(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var we=function(){return we=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},we.apply(this,arguments)};function by(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t}function zo(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))}var ge;(function(i){i[i.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",i[i.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",i[i.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",i[i.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",i[i.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",i[i.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",i[i.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",i[i.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",i[i.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",i[i.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",i[i.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",i[i.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",i[i.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",i[i.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",i[i.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",i[i.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",i[i.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",i[i.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",i[i.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",i[i.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",i[i.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",i[i.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",i[i.INVALID_TAG=23]="INVALID_TAG",i[i.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",i[i.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",i[i.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(ge||(ge={}));var Le;(function(i){i[i.literal=0]="literal",i[i.argument=1]="argument",i[i.number=2]="number",i[i.date=3]="date",i[i.time=4]="time",i[i.select=5]="select",i[i.plural=6]="plural",i[i.pound=7]="pound",i[i.tag=8]="tag"})(Le||(Le={}));var Nn;(function(i){i[i.number=0]="number",i[i.dateTime=1]="dateTime"})(Nn||(Nn={}));function th(i){return i.type===Le.literal}function yy(i){return i.type===Le.argument}function md(i){return i.type===Le.number}function gd(i){return i.type===Le.date}function _d(i){return i.type===Le.time}function bd(i){return i.type===Le.select}function yd(i){return i.type===Le.plural}function wy(i){return i.type===Le.pound}function wd(i){return i.type===Le.tag}function vd(i){return!!(i&&typeof i=="object"&&i.type===Nn.number)}function Fl(i){return!!(i&&typeof i=="object"&&i.type===Nn.dateTime)}var kd=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,vy=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function ky(i){var e={};return i.replace(vy,function(t){var n=t.length;switch(t[0]){case"G":e.era=n===4?"long":n===5?"narrow":"short";break;case"y":e.year=n===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=n===4?"long":n===5?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][n-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][n-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][n-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][n-1];break;case"s":e.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var xy=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function Sy(i){if(i.length===0)throw new Error("Number skeleton cannot be empty");for(var e=i.split(xy).filter(function(f){return f.length>0}),t=[],n=0,r=e;n<r.length;n++){var s=r[n],o=s.split("/");if(o.length===0)throw new Error("Invalid number skeleton");for(var l=o[0],a=o.slice(1),c=0,h=a;c<h.length;c++){var u=h[c];if(u.length===0)throw new Error("Invalid number skeleton")}t.push({stem:l,options:a})}return t}function Ey(i){return i.replace(/^(.*?)-/,"")}var ih=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,xd=/^(@+)?(\+|#+)?[rs]?$/g,Ay=/(\*)(0+)|(#+)(0+)|(0+)/g,Sd=/^(0+)$/;function nh(i){var e={};return i[i.length-1]==="r"?e.roundingPriority="morePrecision":i[i.length-1]==="s"&&(e.roundingPriority="lessPrecision"),i.replace(xd,function(t,n,r){return typeof r!="string"?(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length):r==="+"?e.minimumSignificantDigits=n.length:n[0]==="#"?e.maximumSignificantDigits=n.length:(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length+(typeof r=="string"?r.length:0)),""}),e}function Ed(i){switch(i){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function Ty(i){var e;if(i[0]==="E"&&i[1]==="E"?(e={notation:"engineering"},i=i.slice(2)):i[0]==="E"&&(e={notation:"scientific"},i=i.slice(1)),e){var t=i.slice(0,2);if(t==="+!"?(e.signDisplay="always",i=i.slice(2)):t==="+?"&&(e.signDisplay="exceptZero",i=i.slice(2)),!Sd.test(i))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=i.length}return e}function rh(i){var e={},t=Ed(i);return t||e}function Cy(i){for(var e={},t=0,n=i;t<n.length;t++){var r=n[t];switch(r.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=r.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=Ey(r.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=we(we(we({},e),{notation:"scientific"}),r.options.reduce(function(a,c){return we(we({},a),rh(c))},{}));continue;case"engineering":e=we(we(we({},e),{notation:"engineering"}),r.options.reduce(function(a,c){return we(we({},a),rh(c))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(r.options[0]);continue;case"rounding-mode-floor":e.roundingMode="floor";continue;case"rounding-mode-ceiling":e.roundingMode="ceil";continue;case"rounding-mode-down":e.roundingMode="trunc";continue;case"rounding-mode-up":e.roundingMode="expand";continue;case"rounding-mode-half-even":e.roundingMode="halfEven";continue;case"rounding-mode-half-down":e.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":e.roundingMode="halfExpand";continue;case"integer-width":if(r.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");r.options[0].replace(Ay,function(a,c,h,u,f,d){if(c)e.minimumIntegerDigits=h.length;else{if(u&&f)throw new Error("We currently do not support maximum integer digits");if(d)throw new Error("We currently do not support exact integer digits")}return""});continue}if(Sd.test(r.stem)){e.minimumIntegerDigits=r.stem.length;continue}if(ih.test(r.stem)){if(r.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");r.stem.replace(ih,function(a,c,h,u,f,d){return h==="*"?e.minimumFractionDigits=c.length:u&&u[0]==="#"?e.maximumFractionDigits=u.length:f&&d?(e.minimumFractionDigits=f.length,e.maximumFractionDigits=f.length+d.length):(e.minimumFractionDigits=c.length,e.maximumFractionDigits=c.length),""});var s=r.options[0];s==="w"?e=we(we({},e),{trailingZeroDisplay:"stripIfInteger"}):s&&(e=we(we({},e),nh(s)));continue}if(xd.test(r.stem)){e=we(we({},e),nh(r.stem));continue}var o=Ed(r.stem);o&&(e=we(we({},e),o));var l=Ty(r.stem);l&&(e=we(we({},e),l))}return e}var os={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function Oy(i,e){for(var t="",n=0;n<i.length;n++){var r=i.charAt(n);if(r==="j"){for(var s=0;n+1<i.length&&i.charAt(n+1)===r;)s++,n++;var o=1+(s&1),l=s<2?1:3+(s>>1),a="a",c=My(e);for((c=="H"||c=="k")&&(l=0);l-- >0;)t+=a;for(;o-- >0;)t=c+t}else r==="J"?t+="H":t+=r}return t}function My(i){var e=i.hourCycle;if(e===void 0&&i.hourCycles&&i.hourCycles.length&&(e=i.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var t=i.language,n;t!=="root"&&(n=i.maximize().region);var r=os[n||""]||os[t||""]||os["".concat(t,"-001")]||os["001"];return r[0]}var Wo,Dy=new RegExp("^".concat(kd.source,"*")),Py=new RegExp("".concat(kd.source,"*$"));function _e(i,e){return{start:i,end:e}}var Ly=!!String.prototype.startsWith&&"_a".startsWith("a",1),Ry=!!String.fromCodePoint,Iy=!!Object.fromEntries,Ny=!!String.prototype.codePointAt,By=!!String.prototype.trimStart,Hy=!!String.prototype.trimEnd,Fy=!!Number.isSafeInteger,Vy=Fy?Number.isSafeInteger:function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i&&Math.abs(i)<=9007199254740991},Vl=!0;try{var jy=Td("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Vl=((Wo=jy.exec("a"))===null||Wo===void 0?void 0:Wo[0])==="a"}catch{Vl=!1}var sh=Ly?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},jl=Ry?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=e.length,s=0,o;r>s;){if(o=e[s++],o>1114111)throw RangeError(o+" is not a valid code point");n+=o<65536?String.fromCharCode(o):String.fromCharCode(((o-=65536)>>10)+55296,o%1024+56320)}return n},oh=Iy?Object.fromEntries:function(e){for(var t={},n=0,r=e;n<r.length;n++){var s=r[n],o=s[0],l=s[1];t[o]=l}return t},Ad=Ny?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var r=e.charCodeAt(t),s;return r<55296||r>56319||t+1===n||(s=e.charCodeAt(t+1))<56320||s>57343?r:(r-55296<<10)+(s-56320)+65536}},Uy=By?function(e){return e.trimStart()}:function(e){return e.replace(Dy,"")},zy=Hy?function(e){return e.trimEnd()}:function(e){return e.replace(Py,"")};function Td(i,e){return new RegExp(i,e)}var Ul;if(Vl){var lh=Td("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Ul=function(e,t){var n;lh.lastIndex=t;var r=lh.exec(e);return(n=r[1])!==null&&n!==void 0?n:""}}else Ul=function(e,t){for(var n=[];;){var r=Ad(e,t);if(r===void 0||Cd(r)||$y(r))break;n.push(r),t+=r>=65536?2:1}return jl.apply(void 0,n)};var Wy=function(){function i(e,t){t===void 0&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return i.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},i.prototype.parseMessage=function(e,t,n){for(var r=[];!this.isEOF();){var s=this.char();if(s===123){var o=this.parseArgument(e,n);if(o.err)return o;r.push(o.val)}else{if(s===125&&e>0)break;if(s===35&&(t==="plural"||t==="selectordinal")){var l=this.clonePosition();this.bump(),r.push({type:Le.pound,location:_e(l,this.clonePosition())})}else if(s===60&&!this.ignoreTag&&this.peek()===47){if(n)break;return this.error(ge.UNMATCHED_CLOSING_TAG,_e(this.clonePosition(),this.clonePosition()))}else if(s===60&&!this.ignoreTag&&zl(this.peek()||0)){var o=this.parseTag(e,t);if(o.err)return o;r.push(o.val)}else{var o=this.parseLiteral(e,t);if(o.err)return o;r.push(o.val)}}}return{val:r,err:null}},i.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Le.literal,value:"<".concat(r,"/>"),location:_e(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var s=this.parseMessage(e+1,t,!0);if(s.err)return s;var o=s.val,l=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!zl(this.char()))return this.error(ge.INVALID_TAG,_e(l,this.clonePosition()));var a=this.clonePosition(),c=this.parseTagName();return r!==c?this.error(ge.UNMATCHED_CLOSING_TAG,_e(a,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Le.tag,value:r,children:o,location:_e(n,this.clonePosition())},err:null}:this.error(ge.INVALID_TAG,_e(l,this.clonePosition())))}else return this.error(ge.UNCLOSED_TAG,_e(n,this.clonePosition()))}else return this.error(ge.INVALID_TAG,_e(n,this.clonePosition()))},i.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&qy(this.char());)this.bump();return this.message.slice(e,this.offset())},i.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),r="";;){var s=this.tryParseQuote(t);if(s){r+=s;continue}var o=this.tryParseUnquoted(e,t);if(o){r+=o;continue}var l=this.tryParseLeftAngleBracket();if(l){r+=l;continue}break}var a=_e(n,this.clonePosition());return{val:{type:Le.literal,value:r,location:a},err:null}},i.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!Gy(this.peek()||0))?(this.bump(),"<"):null},i.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(n===39)if(this.peek()===39)t.push(39),this.bump();else{this.bump();break}else t.push(n);this.bump()}return jl.apply(void 0,t)},i.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return n===60||n===123||n===35&&(t==="plural"||t==="selectordinal")||n===125&&e>0?null:(this.bump(),jl(n))},i.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(ge.EXPECT_ARGUMENT_CLOSING_BRACE,_e(n,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(ge.EMPTY_ARGUMENT,_e(n,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(ge.MALFORMED_ARGUMENT,_e(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(ge.EXPECT_ARGUMENT_CLOSING_BRACE,_e(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Le.argument,value:r,location:_e(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(ge.EXPECT_ARGUMENT_CLOSING_BRACE,_e(n,this.clonePosition())):this.parseArgumentOptions(e,t,r,n);default:return this.error(ge.MALFORMED_ARGUMENT,_e(n,this.clonePosition()))}},i.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=Ul(this.message,t),r=t+n.length;this.bumpTo(r);var s=this.clonePosition(),o=_e(e,s);return{value:n,location:o}},i.prototype.parseArgumentOptions=function(e,t,n,r){var s,o=this.clonePosition(),l=this.parseIdentifierIfPossible().value,a=this.clonePosition();switch(l){case"":return this.error(ge.EXPECT_ARGUMENT_TYPE,_e(o,a));case"number":case"date":case"time":{this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var h=this.clonePosition(),u=this.parseSimpleArgStyleIfPossible();if(u.err)return u;var f=zy(u.val);if(f.length===0)return this.error(ge.EXPECT_ARGUMENT_STYLE,_e(this.clonePosition(),this.clonePosition()));var d=_e(h,this.clonePosition());c={style:f,styleLocation:d}}var p=this.tryParseArgumentClose(r);if(p.err)return p;var g=_e(r,this.clonePosition());if(c&&sh(c?.style,"::",0)){var m=Uy(c.style.slice(2));if(l==="number"){var u=this.parseNumberSkeletonFromString(m,c.styleLocation);return u.err?u:{val:{type:Le.number,value:n,location:g,style:u.val},err:null}}else{if(m.length===0)return this.error(ge.EXPECT_DATE_TIME_SKELETON,g);var _=m;this.locale&&(_=Oy(m,this.locale));var f={type:Nn.dateTime,pattern:_,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?ky(_):{}},k=l==="date"?Le.date:Le.time;return{val:{type:k,value:n,location:g,style:f},err:null}}}return{val:{type:l==="number"?Le.number:l==="date"?Le.date:Le.time,value:n,location:g,style:(s=c?.style)!==null&&s!==void 0?s:null},err:null}}case"plural":case"selectordinal":case"select":{var y=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(ge.EXPECT_SELECT_ARGUMENT_OPTIONS,_e(y,we({},y)));this.bumpSpace();var w=this.parseIdentifierIfPossible(),A=0;if(l!=="select"&&w.value==="offset"){if(!this.bumpIf(":"))return this.error(ge.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,_e(this.clonePosition(),this.clonePosition()));this.bumpSpace();var u=this.tryParseDecimalInteger(ge.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,ge.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(u.err)return u;this.bumpSpace(),w=this.parseIdentifierIfPossible(),A=u.val}var M=this.tryParsePluralOrSelectOptions(e,l,t,w);if(M.err)return M;var p=this.tryParseArgumentClose(r);if(p.err)return p;var R=_e(r,this.clonePosition());return l==="select"?{val:{type:Le.select,value:n,options:oh(M.val),location:R},err:null}:{val:{type:Le.plural,value:n,options:oh(M.val),offset:A,pluralType:l==="plural"?"cardinal":"ordinal",location:R},err:null}}default:return this.error(ge.INVALID_ARGUMENT_TYPE,_e(o,a))}},i.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(ge.EXPECT_ARGUMENT_CLOSING_BRACE,_e(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},i.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){var n=this.char();switch(n){case 39:{this.bump();var r=this.clonePosition();if(!this.bumpUntil("'"))return this.error(ge.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,_e(r,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(t.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(t.offset,this.offset()),err:null}},i.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=Sy(e)}catch{return this.error(ge.INVALID_NUMBER_SKELETON,t)}return{val:{type:Nn.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?Cy(n):{}},err:null}},i.prototype.tryParsePluralOrSelectOptions=function(e,t,n,r){for(var s,o=!1,l=[],a=new Set,c=r.value,h=r.location;;){if(c.length===0){var u=this.clonePosition();if(t!=="select"&&this.bumpIf("=")){var f=this.tryParseDecimalInteger(ge.EXPECT_PLURAL_ARGUMENT_SELECTOR,ge.INVALID_PLURAL_ARGUMENT_SELECTOR);if(f.err)return f;h=_e(u,this.clonePosition()),c=this.message.slice(u.offset,this.offset())}else break}if(a.has(c))return this.error(t==="select"?ge.DUPLICATE_SELECT_ARGUMENT_SELECTOR:ge.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,h);c==="other"&&(o=!0),this.bumpSpace();var d=this.clonePosition();if(!this.bumpIf("{"))return this.error(t==="select"?ge.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:ge.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,_e(this.clonePosition(),this.clonePosition()));var p=this.parseMessage(e+1,t,n);if(p.err)return p;var g=this.tryParseArgumentClose(d);if(g.err)return g;l.push([c,{value:p.val,location:_e(d,this.clonePosition())}]),a.add(c),this.bumpSpace(),s=this.parseIdentifierIfPossible(),c=s.value,h=s.location}return l.length===0?this.error(t==="select"?ge.EXPECT_SELECT_ARGUMENT_SELECTOR:ge.EXPECT_PLURAL_ARGUMENT_SELECTOR,_e(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(ge.MISSING_OTHER_CLAUSE,_e(this.clonePosition(),this.clonePosition())):{val:l,err:null}},i.prototype.tryParseDecimalInteger=function(e,t){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var s=!1,o=0;!this.isEOF();){var l=this.char();if(l>=48&&l<=57)s=!0,o=o*10+(l-48),this.bump();else break}var a=_e(r,this.clonePosition());return s?(o*=n,Vy(o)?{val:o,err:null}:this.error(t,a)):this.error(e,a)},i.prototype.offset=function(){return this.position.offset},i.prototype.isEOF=function(){return this.offset()===this.message.length},i.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},i.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=Ad(this.message,e);if(t===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},i.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},i.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},i.prototype.bumpIf=function(e){if(sh(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},i.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},i.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},i.prototype.bumpSpace=function(){for(;!this.isEOF()&&Cd(this.char());)this.bump()},i.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return n??null},i}();function zl(i){return i>=97&&i<=122||i>=65&&i<=90}function Gy(i){return zl(i)||i===47}function qy(i){return i===45||i===46||i>=48&&i<=57||i===95||i>=97&&i<=122||i>=65&&i<=90||i==183||i>=192&&i<=214||i>=216&&i<=246||i>=248&&i<=893||i>=895&&i<=8191||i>=8204&&i<=8205||i>=8255&&i<=8256||i>=8304&&i<=8591||i>=11264&&i<=12271||i>=12289&&i<=55295||i>=63744&&i<=64975||i>=65008&&i<=65533||i>=65536&&i<=983039}function Cd(i){return i>=9&&i<=13||i===32||i===133||i>=8206&&i<=8207||i===8232||i===8233}function $y(i){return i>=33&&i<=35||i===36||i>=37&&i<=39||i===40||i===41||i===42||i===43||i===44||i===45||i>=46&&i<=47||i>=58&&i<=59||i>=60&&i<=62||i>=63&&i<=64||i===91||i===92||i===93||i===94||i===96||i===123||i===124||i===125||i===126||i===161||i>=162&&i<=165||i===166||i===167||i===169||i===171||i===172||i===174||i===176||i===177||i===182||i===187||i===191||i===215||i===247||i>=8208&&i<=8213||i>=8214&&i<=8215||i===8216||i===8217||i===8218||i>=8219&&i<=8220||i===8221||i===8222||i===8223||i>=8224&&i<=8231||i>=8240&&i<=8248||i===8249||i===8250||i>=8251&&i<=8254||i>=8257&&i<=8259||i===8260||i===8261||i===8262||i>=8263&&i<=8273||i===8274||i===8275||i>=8277&&i<=8286||i>=8592&&i<=8596||i>=8597&&i<=8601||i>=8602&&i<=8603||i>=8604&&i<=8607||i===8608||i>=8609&&i<=8610||i===8611||i>=8612&&i<=8613||i===8614||i>=8615&&i<=8621||i===8622||i>=8623&&i<=8653||i>=8654&&i<=8655||i>=8656&&i<=8657||i===8658||i===8659||i===8660||i>=8661&&i<=8691||i>=8692&&i<=8959||i>=8960&&i<=8967||i===8968||i===8969||i===8970||i===8971||i>=8972&&i<=8991||i>=8992&&i<=8993||i>=8994&&i<=9e3||i===9001||i===9002||i>=9003&&i<=9083||i===9084||i>=9085&&i<=9114||i>=9115&&i<=9139||i>=9140&&i<=9179||i>=9180&&i<=9185||i>=9186&&i<=9254||i>=9255&&i<=9279||i>=9280&&i<=9290||i>=9291&&i<=9311||i>=9472&&i<=9654||i===9655||i>=9656&&i<=9664||i===9665||i>=9666&&i<=9719||i>=9720&&i<=9727||i>=9728&&i<=9838||i===9839||i>=9840&&i<=10087||i===10088||i===10089||i===10090||i===10091||i===10092||i===10093||i===10094||i===10095||i===10096||i===10097||i===10098||i===10099||i===10100||i===10101||i>=10132&&i<=10175||i>=10176&&i<=10180||i===10181||i===10182||i>=10183&&i<=10213||i===10214||i===10215||i===10216||i===10217||i===10218||i===10219||i===10220||i===10221||i===10222||i===10223||i>=10224&&i<=10239||i>=10240&&i<=10495||i>=10496&&i<=10626||i===10627||i===10628||i===10629||i===10630||i===10631||i===10632||i===10633||i===10634||i===10635||i===10636||i===10637||i===10638||i===10639||i===10640||i===10641||i===10642||i===10643||i===10644||i===10645||i===10646||i===10647||i===10648||i>=10649&&i<=10711||i===10712||i===10713||i===10714||i===10715||i>=10716&&i<=10747||i===10748||i===10749||i>=10750&&i<=11007||i>=11008&&i<=11055||i>=11056&&i<=11076||i>=11077&&i<=11078||i>=11079&&i<=11084||i>=11085&&i<=11123||i>=11124&&i<=11125||i>=11126&&i<=11157||i===11158||i>=11159&&i<=11263||i>=11776&&i<=11777||i===11778||i===11779||i===11780||i===11781||i>=11782&&i<=11784||i===11785||i===11786||i===11787||i===11788||i===11789||i>=11790&&i<=11798||i===11799||i>=11800&&i<=11801||i===11802||i===11803||i===11804||i===11805||i>=11806&&i<=11807||i===11808||i===11809||i===11810||i===11811||i===11812||i===11813||i===11814||i===11815||i===11816||i===11817||i>=11818&&i<=11822||i===11823||i>=11824&&i<=11833||i>=11834&&i<=11835||i>=11836&&i<=11839||i===11840||i===11841||i===11842||i>=11843&&i<=11855||i>=11856&&i<=11857||i===11858||i>=11859&&i<=11903||i>=12289&&i<=12291||i===12296||i===12297||i===12298||i===12299||i===12300||i===12301||i===12302||i===12303||i===12304||i===12305||i>=12306&&i<=12307||i===12308||i===12309||i===12310||i===12311||i===12312||i===12313||i===12314||i===12315||i===12316||i===12317||i>=12318&&i<=12319||i===12320||i===12336||i===64830||i===64831||i>=65093&&i<=65094}function Wl(i){i.forEach(function(e){if(delete e.location,bd(e)||yd(e))for(var t in e.options)delete e.options[t].location,Wl(e.options[t].value);else md(e)&&vd(e.style)||(gd(e)||_d(e))&&Fl(e.style)?delete e.style.location:wd(e)&&Wl(e.children)})}function Ky(i,e){e===void 0&&(e={}),e=we({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var t=new Wy(i,e).parse();if(t.err){var n=SyntaxError(ge[t.err.kind]);throw n.location=t.err.location,n.originalMessage=t.err.message,n}return e?.captureLocation||Wl(t.val),t.val}function Go(i,e){var t=e&&e.cache?e.cache:e1,n=e&&e.serializer?e.serializer:Qy,r=e&&e.strategy?e.strategy:Jy;return r(i,{cache:t,serializer:n})}function Xy(i){return i==null||typeof i=="number"||typeof i=="boolean"}function Od(i,e,t,n){var r=Xy(n)?n:t(n),s=e.get(r);return typeof s>"u"&&(s=i.call(this,n),e.set(r,s)),s}function Md(i,e,t){var n=Array.prototype.slice.call(arguments,3),r=t(n),s=e.get(r);return typeof s>"u"&&(s=i.apply(this,n),e.set(r,s)),s}function Ja(i,e,t,n,r){return t.bind(e,i,n,r)}function Jy(i,e){var t=i.length===1?Od:Md;return Ja(i,this,t,e.cache.create(),e.serializer)}function Yy(i,e){return Ja(i,this,Md,e.cache.create(),e.serializer)}function Zy(i,e){return Ja(i,this,Od,e.cache.create(),e.serializer)}var Qy=function(){return JSON.stringify(arguments)};function Ya(){this.cache=Object.create(null)}Ya.prototype.get=function(i){return this.cache[i]};Ya.prototype.set=function(i,e){this.cache[i]=e};var e1={create:function(){return new Ya}},qo={variadic:Yy,monadic:Zy},Bn;(function(i){i.MISSING_VALUE="MISSING_VALUE",i.INVALID_VALUE="INVALID_VALUE",i.MISSING_INTL_API="MISSING_INTL_API"})(Bn||(Bn={}));var _o=function(i){go(e,i);function e(t,n,r){var s=i.call(this,t)||this;return s.code=n,s.originalMessage=r,s}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),ah=function(i){go(e,i);function e(t,n,r,s){return i.call(this,'Invalid values for "'.concat(t,'": "').concat(n,'". Options are "').concat(Object.keys(r).join('", "'),'"'),Bn.INVALID_VALUE,s)||this}return e}(_o),t1=function(i){go(e,i);function e(t,n,r){return i.call(this,'Value for "'.concat(t,'" must be of type ').concat(n),Bn.INVALID_VALUE,r)||this}return e}(_o),i1=function(i){go(e,i);function e(t,n){return i.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(n,'"'),Bn.MISSING_VALUE,n)||this}return e}(_o),ft;(function(i){i[i.literal=0]="literal",i[i.object=1]="object"})(ft||(ft={}));function n1(i){return i.length<2?i:i.reduce(function(e,t){var n=e[e.length-1];return!n||n.type!==ft.literal||t.type!==ft.literal?e.push(t):n.value+=t.value,e},[])}function r1(i){return typeof i=="function"}function Os(i,e,t,n,r,s,o){if(i.length===1&&th(i[0]))return[{type:ft.literal,value:i[0].value}];for(var l=[],a=0,c=i;a<c.length;a++){var h=c[a];if(th(h)){l.push({type:ft.literal,value:h.value});continue}if(wy(h)){typeof s=="number"&&l.push({type:ft.literal,value:t.getNumberFormat(e).format(s)});continue}var u=h.value;if(!(r&&u in r))throw new i1(u,o);var f=r[u];if(yy(h)){(!f||typeof f=="string"||typeof f=="number")&&(f=typeof f=="string"||typeof f=="number"?String(f):""),l.push({type:typeof f=="string"?ft.literal:ft.object,value:f});continue}if(gd(h)){var d=typeof h.style=="string"?n.date[h.style]:Fl(h.style)?h.style.parsedOptions:void 0;l.push({type:ft.literal,value:t.getDateTimeFormat(e,d).format(f)});continue}if(_d(h)){var d=typeof h.style=="string"?n.time[h.style]:Fl(h.style)?h.style.parsedOptions:n.time.medium;l.push({type:ft.literal,value:t.getDateTimeFormat(e,d).format(f)});continue}if(md(h)){var d=typeof h.style=="string"?n.number[h.style]:vd(h.style)?h.style.parsedOptions:void 0;d&&d.scale&&(f=f*(d.scale||1)),l.push({type:ft.literal,value:t.getNumberFormat(e,d).format(f)});continue}if(wd(h)){var p=h.children,g=h.value,m=r[g];if(!r1(m))throw new t1(g,"function",o);var _=Os(p,e,t,n,r,s),k=m(_.map(function(A){return A.value}));Array.isArray(k)||(k=[k]),l.push.apply(l,k.map(function(A){return{type:typeof A=="string"?ft.literal:ft.object,value:A}}))}if(bd(h)){var y=h.options[f]||h.options.other;if(!y)throw new ah(h.value,f,Object.keys(h.options),o);l.push.apply(l,Os(y.value,e,t,n,r));continue}if(yd(h)){var y=h.options["=".concat(f)];if(!y){if(!Intl.PluralRules)throw new _o(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Bn.MISSING_INTL_API,o);var w=t.getPluralRules(e,{type:h.pluralType}).select(f-(h.offset||0));y=h.options[w]||h.options.other}if(!y)throw new ah(h.value,f,Object.keys(h.options),o);l.push.apply(l,Os(y.value,e,t,n,r,f-(h.offset||0)));continue}}return n1(l)}function s1(i,e){return e?we(we(we({},i||{}),e||{}),Object.keys(i).reduce(function(t,n){return t[n]=we(we({},i[n]),e[n]||{}),t},{})):i}function o1(i,e){return e?Object.keys(i).reduce(function(t,n){return t[n]=s1(i[n],e[n]),t},we({},i)):i}function $o(i){return{create:function(){return{get:function(e){return i[e]},set:function(e,t){i[e]=t}}}}}function l1(i){return i===void 0&&(i={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Go(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,zo([void 0],t,!1)))},{cache:$o(i.number),strategy:qo.variadic}),getDateTimeFormat:Go(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,zo([void 0],t,!1)))},{cache:$o(i.dateTime),strategy:qo.variadic}),getPluralRules:Go(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,zo([void 0],t,!1)))},{cache:$o(i.pluralRules),strategy:qo.variadic})}}var Dd=function(){function i(e,t,n,r){var s=this;if(t===void 0&&(t=i.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(a){var c=s.formatToParts(a);if(c.length===1)return c[0].value;var h=c.reduce(function(u,f){return!u.length||f.type!==ft.literal||typeof u[u.length-1]!="string"?u.push(f.value):u[u.length-1]+=f.value,u},[]);return h.length<=1?h[0]||"":h},this.formatToParts=function(a){return Os(s.ast,s.locales,s.formatters,s.formats,a,void 0,s.message)},this.resolvedOptions=function(){var a;return{locale:((a=s.resolvedLocale)===null||a===void 0?void 0:a.toString())||Intl.NumberFormat.supportedLocalesOf(s.locales)[0]}},this.getAst=function(){return s.ast},this.locales=t,this.resolvedLocale=i.resolveLocale(t),typeof e=="string"){if(this.message=e,!i.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var o=r||{};o.formatters;var l=by(o,["formatters"]);this.ast=i.__parse(e,we(we({},l),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=o1(i.formats,n),this.formatters=r&&r.formatters||l1(this.formatterCache)}return Object.defineProperty(i,"defaultLocale",{get:function(){return i.memoizedDefaultLocale||(i.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),i.memoizedDefaultLocale},enumerable:!1,configurable:!0}),i.memoizedDefaultLocale=null,i.resolveLocale=function(e){if(!(typeof Intl.Locale>"u")){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},i.__parse=Ky,i.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},i}();function a1(i,e){if(e==null)return;if(e in i)return i[e];const t=e.split(".");let n=i;for(let r=0;r<t.length;r++)if(typeof n=="object"){if(r>0){const s=t.slice(r,t.length).join(".");if(s in n){n=n[s];break}}n=n[t[r]]}else n=void 0;return n}const Ci={},c1=(i,e,t)=>t&&(e in Ci||(Ci[e]={}),i in Ci[e]||(Ci[e][i]=t),t),Pd=(i,e)=>{if(e==null)return;if(e in Ci&&i in Ci[e])return Ci[e][i];const t=Xr(e);for(let n=0;n<t.length;n++){const r=t[n],s=u1(r,i);if(s)return c1(i,e,s)}};let Za;const Kr=fi({});function h1(i){return Za[i]||null}function Ld(i){return i in Za}function u1(i,e){if(!Ld(i))return null;const t=h1(i);return a1(t,e)}function f1(i){if(i==null)return;const e=Xr(i);for(let t=0;t<e.length;t++){const n=e[t];if(Ld(n))return n}}function Rd(i,...e){delete Ci[i],Kr.update(t=>(t[i]=_y.all([t[i]||{},...e]),t))}qn([Kr],([i])=>Object.keys(i));Kr.subscribe(i=>Za=i);const Ms={};function d1(i,e){Ms[i].delete(e),Ms[i].size===0&&delete Ms[i]}function Id(i){return Ms[i]}function p1(i){return Xr(i).map(e=>{const t=Id(e);return[e,t?[...t]:[]]}).filter(([,e])=>e.length>0)}function Gs(i){return i==null?!1:Xr(i).some(e=>{var t;return(t=Id(e))==null?void 0:t.size})}function m1(i,e){return Promise.all(e.map(n=>(d1(i,n),n().then(r=>r.default||r)))).then(n=>Rd(i,...n))}const tr={};function Nd(i){if(!Gs(i))return i in tr?tr[i]:Promise.resolve();const e=p1(i);return tr[i]=Promise.all(e.map(([t,n])=>m1(t,n))).then(()=>{if(Gs(i))return Nd(i);delete tr[i]}),tr[i]}var ch=Object.getOwnPropertySymbols,g1=Object.prototype.hasOwnProperty,_1=Object.prototype.propertyIsEnumerable,b1=(i,e)=>{var t={};for(var n in i)g1.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&ch)for(var n of ch(i))e.indexOf(n)<0&&_1.call(i,n)&&(t[n]=i[n]);return t};const y1={number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}};function w1({locale:i,id:e}){console.warn(`[svelte-i18n] The message "${e}" was not found in "${Xr(i).join('", "')}".${Gs(Hi())?`

Note: there are at least one loader still registered to this locale that wasn't executed.`:""}`)}const v1={fallbackLocale:null,loadingDelay:200,formats:y1,warnOnMissingMessages:!0,handleMissingMessage:void 0,ignoreTag:!0},dr=v1;function Hn(){return dr}function k1(i){const e=i,{formats:t}=e,n=b1(e,["formats"]);let r=i.fallbackLocale;if(i.initialLocale)try{Dd.resolveLocale(i.initialLocale)&&(r=i.initialLocale)}catch{console.warn(`[svelte-i18n] The initial locale "${i.initialLocale}" is not a valid locale.`)}return n.warnOnMissingMessages&&(delete n.warnOnMissingMessages,n.handleMissingMessage==null?n.handleMissingMessage=w1:console.warn('[svelte-i18n] The "warnOnMissingMessages" option is deprecated. Please use the "handleMissingMessage" option instead.')),Object.assign(dr,n,{initialLocale:r}),t&&("number"in t&&Object.assign(dr.formats.number,t.number),"date"in t&&Object.assign(dr.formats.date,t.date),"time"in t&&Object.assign(dr.formats.time,t.time)),$n.set(r)}const Ko=fi(!1);var x1=Object.defineProperty,S1=Object.defineProperties,E1=Object.getOwnPropertyDescriptors,hh=Object.getOwnPropertySymbols,A1=Object.prototype.hasOwnProperty,T1=Object.prototype.propertyIsEnumerable,uh=(i,e,t)=>e in i?x1(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,C1=(i,e)=>{for(var t in e||(e={}))A1.call(e,t)&&uh(i,t,e[t]);if(hh)for(var t of hh(e))T1.call(e,t)&&uh(i,t,e[t]);return i},O1=(i,e)=>S1(i,E1(e));let Gl;const qs=fi(null);function fh(i){return i.split("-").map((e,t,n)=>n.slice(0,t+1).join("-")).reverse()}function Xr(i,e=Hn().fallbackLocale){const t=fh(i);return e?[...new Set([...t,...fh(e)])]:t}function Hi(){return Gl??void 0}qs.subscribe(i=>{Gl=i??void 0,typeof window<"u"&&i!=null&&document.documentElement.setAttribute("lang",i)});const M1=i=>{if(i&&f1(i)&&Gs(i)){const{loadingDelay:e}=Hn();let t;return typeof window<"u"&&Hi()!=null&&e?t=window.setTimeout(()=>Ko.set(!0),e):Ko.set(!0),Nd(i).then(()=>{qs.set(i)}).finally(()=>{clearTimeout(t),Ko.set(!1)})}return qs.set(i)},$n=O1(C1({},qs),{set:M1}),D1=()=>typeof window>"u"?null:window.navigator.language||window.navigator.languages[0],bo=i=>{const e=Object.create(null);return n=>{const r=JSON.stringify(n);return r in e?e[r]:e[r]=i(n)}};var P1=Object.defineProperty,$s=Object.getOwnPropertySymbols,Bd=Object.prototype.hasOwnProperty,Hd=Object.prototype.propertyIsEnumerable,dh=(i,e,t)=>e in i?P1(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Qa=(i,e)=>{for(var t in e||(e={}))Bd.call(e,t)&&dh(i,t,e[t]);if($s)for(var t of $s(e))Hd.call(e,t)&&dh(i,t,e[t]);return i},Kn=(i,e)=>{var t={};for(var n in i)Bd.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&$s)for(var n of $s(i))e.indexOf(n)<0&&Hd.call(i,n)&&(t[n]=i[n]);return t};const Pr=(i,e)=>{const{formats:t}=Hn();if(i in t&&e in t[i])return t[i][e];throw new Error(`[svelte-i18n] Unknown "${e}" ${i} format.`)},L1=bo(i=>{var e=i,{locale:t,format:n}=e,r=Kn(e,["locale","format"]);if(t==null)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return n&&(r=Pr("number",n)),new Intl.NumberFormat(t,r)}),R1=bo(i=>{var e=i,{locale:t,format:n}=e,r=Kn(e,["locale","format"]);if(t==null)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return n?r=Pr("date",n):Object.keys(r).length===0&&(r=Pr("date","short")),new Intl.DateTimeFormat(t,r)}),I1=bo(i=>{var e=i,{locale:t,format:n}=e,r=Kn(e,["locale","format"]);if(t==null)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return n?r=Pr("time",n):Object.keys(r).length===0&&(r=Pr("time","short")),new Intl.DateTimeFormat(t,r)}),N1=(i={})=>{var e=i,{locale:t=Hi()}=e,n=Kn(e,["locale"]);return L1(Qa({locale:t},n))},B1=(i={})=>{var e=i,{locale:t=Hi()}=e,n=Kn(e,["locale"]);return R1(Qa({locale:t},n))},H1=(i={})=>{var e=i,{locale:t=Hi()}=e,n=Kn(e,["locale"]);return I1(Qa({locale:t},n))},F1=bo((i,e=Hi())=>new Dd(i,e,Hn().formats,{ignoreTag:Hn().ignoreTag})),V1=(i,e={})=>{var t,n,r,s;let o=e;typeof i=="object"&&(o=i,i=o.id);const{values:l,locale:a=Hi(),default:c}=o;if(a==null)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");let h=Pd(i,a);if(!h)h=(s=(r=(n=(t=Hn()).handleMissingMessage)==null?void 0:n.call(t,{locale:a,id:i,defaultValue:c}))!=null?r:c)!=null?s:i;else if(typeof h!="string")return console.warn(`[svelte-i18n] Message with id "${i}" must be of type "string", found: "${typeof h}". Gettin its value through the "$format" method is deprecated; use the "json" method instead.`),h;if(!l)return h;let u=h;try{u=F1(h,a).format(l)}catch(f){f instanceof Error&&console.warn(`[svelte-i18n] Message "${i}" has syntax error:`,f.message)}return u},j1=(i,e)=>H1(e).format(i),U1=(i,e)=>B1(e).format(i),z1=(i,e)=>N1(e).format(i),W1=(i,e=Hi())=>Pd(i,e),ec=qn([$n,Kr],()=>V1);qn([$n],()=>j1);qn([$n],()=>U1);qn([$n],()=>z1);qn([$n,Kr],()=>W1);function ph(i){let e,t,n,r,s,o,l,a=i[9]("common.built_with")+"",c,h,u,f,d,p,g=i[9]("common.hosted_on")+"",m,_,k;return{c(){e=Y("div"),t=Y("span"),n=Y("a"),r=fe(i[5]),o=Se(),l=Y("span"),c=fe(a),h=Se(),u=Y("a"),u.textContent="Gradio",f=fe("."),d=Se(),p=Y("span"),m=fe(g),_=Se(),k=Y("a"),k.innerHTML=`<span class="space-logo svelte-wpkpf6"><img src="${ey}" alt="Hugging Face Space" class="svelte-wpkpf6"/></span> Spaces`,C(n,"href",s="https://huggingface.co/spaces/"+i[5]),C(n,"class","title svelte-wpkpf6"),C(t,"class","svelte-wpkpf6"),C(u,"class","gradio svelte-wpkpf6"),C(u,"href","https://gradio.app"),C(l,"class","svelte-wpkpf6"),C(k,"class","hf svelte-wpkpf6"),C(k,"href","https://huggingface.co/spaces"),C(p,"class","svelte-wpkpf6"),C(e,"class","info svelte-wpkpf6")},m(y,w){j(y,e,w),q(e,t),q(t,n),q(n,r),q(e,o),q(e,l),q(l,c),q(l,h),q(l,u),q(l,f),q(e,d),q(e,p),q(p,m),q(p,_),q(p,k)},p(y,w){w&32&&je(r,y[5]),w&32&&s!==(s="https://huggingface.co/spaces/"+y[5])&&C(n,"href",s),w&512&&a!==(a=y[9]("common.built_with")+"")&&je(c,a),w&512&&g!==(g=y[9]("common.hosted_on")+"")&&je(m,g)},d(y){y&&V(e)}}}function G1(i){let e,t,n,r,s;const o=i[11].default,l=Wr(o,i,i[10],null);let a=i[6]&&i[5]&&i[7]&&ph(i);return{c(){e=Y("div"),t=Y("div"),l&&l.c(),n=Se(),a&&a.c(),C(t,"class","main svelte-wpkpf6"),C(e,"class",r="gradio-container gradio-container-"+i[1]+" svelte-wpkpf6"),C(e,"data-iframe-height",""),te(e,"app",!i[6]&&!i[4]),te(e,"fill_width",i[3]),te(e,"embed-container",i[6]),te(e,"with-info",i[7]),ne(e,"min-height",i[8]?"initial":i[2]),ne(e,"flex-grow",i[6]?"auto":"1")},m(c,h){j(c,e,h),q(e,t),l&&l.m(t,null),q(e,n),a&&a.m(e,null),i[12](e),s=!0},p(c,[h]){l&&l.p&&(!s||h&1024)&&qr(l,o,c,c[10],s?Gr(o,c[10],h,null):$r(c[10]),null),c[6]&&c[5]&&c[7]?a?a.p(c,h):(a=ph(c),a.c(),a.m(e,null)):a&&(a.d(1),a=null),(!s||h&2&&r!==(r="gradio-container gradio-container-"+c[1]+" svelte-wpkpf6"))&&C(e,"class",r),(!s||h&82)&&te(e,"app",!c[6]&&!c[4]),(!s||h&10)&&te(e,"fill_width",c[3]),(!s||h&66)&&te(e,"embed-container",c[6]),(!s||h&130)&&te(e,"with-info",c[7]),h&260&&ne(e,"min-height",c[8]?"initial":c[2]),h&64&&ne(e,"flex-grow",c[6]?"auto":"1")},i(c){s||(re(l,c),s=!0)},o(c){se(l,c),s=!1},d(c){c&&V(e),l&&l.d(c),a&&a.d(),i[12](null)}}}function q1(i,e,t){let n;Ln(i,ec,m=>t(9,n=m));let{$$slots:r={},$$scope:s}=e,{wrapper:o}=e,{version:l}=e,{initial_height:a}=e,{fill_width:c}=e,{is_embed:h}=e,{space:u}=e,{display:f}=e,{info:d}=e,{loaded:p}=e;function g(m){wt[m?"unshift":"push"](()=>{o=m,t(0,o)})}return i.$$set=m=>{"wrapper"in m&&t(0,o=m.wrapper),"version"in m&&t(1,l=m.version),"initial_height"in m&&t(2,a=m.initial_height),"fill_width"in m&&t(3,c=m.fill_width),"is_embed"in m&&t(4,h=m.is_embed),"space"in m&&t(5,u=m.space),"display"in m&&t(6,f=m.display),"info"in m&&t(7,d=m.info),"loaded"in m&&t(8,p=m.loaded),"$$scope"in m&&t(10,s=m.$$scope)},[o,l,a,c,h,u,f,d,p,n,s,r,g]}class Fd extends Yt{constructor(e){super(),Jt(this,e,q1,G1,vt,{wrapper:0,version:1,initial_height:2,fill_width:3,is_embed:4,space:5,display:6,info:7,loaded:8})}get wrapper(){return this.$$.ctx[0]}set wrapper(e){this.$$set({wrapper:e}),O()}get version(){return this.$$.ctx[1]}set version(e){this.$$set({version:e}),O()}get initial_height(){return this.$$.ctx[2]}set initial_height(e){this.$$set({initial_height:e}),O()}get fill_width(){return this.$$.ctx[3]}set fill_width(e){this.$$set({fill_width:e}),O()}get is_embed(){return this.$$.ctx[4]}set is_embed(e){this.$$set({is_embed:e}),O()}get space(){return this.$$.ctx[5]}set space(e){this.$$set({space:e}),O()}get display(){return this.$$.ctx[6]}set display(e){this.$$set({display:e}),O()}get info(){return this.$$.ctx[7]}set info(e){this.$$set({info:e}),O()}get loaded(){return this.$$.ctx[8]}set loaded(e){this.$$set({loaded:e}),O()}}let Vd=!1;typeof window<"u"&&"attachShadow"in Element.prototype&&"adoptedStyleSheets"in Document.prototype&&(Vd="adoptedStyleSheets"in document.createElement("div").attachShadow({mode:"open"}));function yo(i,e){const t=new URL(import.meta.url).origin,n=new URL(i,t).href;if(document.querySelector(`link[href='${n}']`))return Promise.resolve();const s=document.createElement("link");return s.rel="stylesheet",s.href=n,new Promise((o,l)=>{s.addEventListener("load",()=>o()),s.addEventListener("error",()=>{console.error(`Unable to preload CSS for ${n}`),o()}),e.appendChild(s)})}function ql(i,e,t=document.createElement("style")){if(!Vd)return null;t.remove();const n=new CSSStyleSheet;n.replaceSync(i);let r="";i=i.replace(/@import\s+url\((.*?)\);\s*/g,(a,c)=>(r+=`@import url(${c});
`,""));const s=n.cssRules;let o="",l=`gradio-app .gradio-container.gradio-container-${e} .contain `;for(let a=0;a<s.length;a++){const c=s[a];let h=c.cssText.includes(".dark");if(c instanceof CSSStyleRule){const u=c.selectorText;if(u){const f=u.replace(".dark","").split(",").map(d=>`${h?".dark":""} ${l} ${d.trim()} `).join(",");o+=c.cssText,o+=c.cssText.replace(u,f)}}else if(c instanceof CSSMediaRule){let u=`@media ${c.media.mediaText} {`;for(let f=0;f<c.cssRules.length;f++){const d=c.cssRules[f];if(d instanceof CSSStyleRule){let p=d.cssText.includes(".dark ");const g=d.selectorText,m=g.replace(".dark","").split(",").map(_=>`${p?".dark":""} ${l} ${_.trim()} `).join(",");u+=d.cssText.replace(g,m)}}u+="}",o+=u}else if(c instanceof CSSKeyframesRule){o+=`@keyframes ${c.name} {`;for(let u=0;u<c.cssRules.length;u++){const f=c.cssRules[u];f instanceof CSSKeyframeRule&&(o+=`${f.keyText} { ${f.style.cssText} }`)}o+="}"}else c instanceof CSSFontFaceRule&&(o+=`@font-face { ${c.style.cssText} }`)}return o=r+o,t.textContent=o,document.head.appendChild(t),t}const $1={accordion:{component:()=>I(()=>import("./assets/Index-B8X-RqQW.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)},annotatedimage:{component:()=>I(()=>import("./assets/Index-DCR06-MS.js"),__vite__mapDeps([4,5,6,7,8,9,10,11]),import.meta.url)},audio:{base:()=>I(()=>import("./assets/StaticAudio-tYA07v5_.js").then(i=>i.b),__vite__mapDeps([12,5,6,13,14,15,16,9,17,18,19,10,20,21,22]),import.meta.url),example:()=>I(()=>import("./assets/Example-DUtUTR-I.js"),__vite__mapDeps([23,24]),import.meta.url),component:()=>I(()=>import("./assets/index-x1o_M2IK.js"),__vite__mapDeps([25,12,5,6,13,14,15,16,9,17,18,19,10,20,21,22,26,27,28,29,30,31,32,23,24,33]),import.meta.url)},box:{component:()=>I(()=>import("./assets/Index-C58RXRaI.js"),[],import.meta.url)},button:{component:()=>I(()=>import("./assets/Index-Dbbt3W5B.js"),__vite__mapDeps([34,35,36]),import.meta.url)},chatbot:{component:()=>I(()=>import("./assets/Index-DnIbZWq6.js"),__vite__mapDeps([37,38,39,10,40,14,41,9,42,43,44,45,46,47,48,49,50,21,19,5,51,52]),import.meta.url)},checkbox:{example:()=>I(()=>import("./assets/Example-BqADzo0_.js"),__vite__mapDeps([53,24]),import.meta.url),component:()=>I(()=>import("./assets/Index-C_-G51t7.js"),__vite__mapDeps([54,55,56]),import.meta.url)},checkboxgroup:{example:()=>I(()=>import("./assets/Example-BzVHaJkj.js"),__vite__mapDeps([57,24]),import.meta.url),component:()=>I(()=>import("./assets/Index-mRDZcvjt.js"),__vite__mapDeps([58,59,55,60]),import.meta.url)},code:{example:()=>I(()=>import("./assets/Example-oy4nawAR.js"),[],import.meta.url),component:()=>I(()=>import("./assets/Index-BzYGVNvt.js"),__vite__mapDeps([61,43,44,15,21,10,9,62,5,6,63]),import.meta.url)},colorpicker:{example:()=>I(()=>import("./assets/Example-C7WkTPa-.js"),__vite__mapDeps([64,65]),import.meta.url),component:()=>I(()=>import("./assets/Index-Cr-6NIPa.js"),__vite__mapDeps([66,59,55,64,65,67]),import.meta.url)},column:{component:()=>I(()=>import("./assets/Index-DBP1hVY_.js"),__vite__mapDeps([1,2]),import.meta.url)},core:{component:()=>I(()=>Promise.resolve().then(()=>tv),void 0,import.meta.url)},dataframe:{example:()=>I(()=>import("./assets/Example-C0pRGtwj.js"),__vite__mapDeps([68,69]),import.meta.url),component:()=>I(()=>import("./assets/Index-CVdAUFZC.js"),__vite__mapDeps([70,38,26,27,35,36,42,43,44,9,45,46,47,48,49,50,71,68,69,72]),import.meta.url)},dataset:{component:()=>I(()=>import("./assets/Index-BJKn5ywA.js"),__vite__mapDeps([73,74,75,76,77]),import.meta.url)},datetime:{example:()=>I(()=>import("./assets/Example-BHLXjFNj.js"),[],import.meta.url),component:()=>I(()=>import("./assets/Index-Cr14RaCM.js"),__vite__mapDeps([78,59,55,79,80]),import.meta.url)},downloadbutton:{component:()=>I(()=>import("./assets/Index-CTzxFP1K.js"),__vite__mapDeps([81,35,36,82]),import.meta.url)},dropdown:{example:()=>I(()=>import("./assets/Example-B8TSVmu7.js"),__vite__mapDeps([83,24]),import.meta.url),component:()=>I(()=>import("./assets/Index-DHN8R9kb.js"),__vite__mapDeps([84,59,55,85,86,83,24,87]),import.meta.url)},file:{example:()=>I(()=>import("./assets/Example-DXm002T9.js"),__vite__mapDeps([88,89]),import.meta.url),component:()=>I(()=>import("./assets/Index-BdEyirVf.js"),__vite__mapDeps([90,91,5,6,92,26,27,28,15,19,9,21,10,93,32,30,88,89]),import.meta.url)},fileexplorer:{example:()=>I(()=>import("./assets/Example-_O8QfT9K.js"),__vite__mapDeps([94,95]),import.meta.url),component:()=>I(()=>import("./assets/Index-BWd-IQS5.js"),__vite__mapDeps([96,92,5,97]),import.meta.url)},form:{component:()=>I(()=>import("./assets/Index-BRqwkKcb.js"),__vite__mapDeps([98,99]),import.meta.url)},gallery:{base:()=>I(()=>import("./assets/Gallery-B8VXrrez.js"),__vite__mapDeps([100,5,6,13,14,15,7,8,18,9,28,19,21,10,39,40,101,20,102,103,27,52]),import.meta.url),component:()=>I(()=>import("./assets/Index-CLTdAPOE.js"),__vite__mapDeps([104,32,30,100,5,6,13,14,15,7,8,18,9,28,19,21,10,39,40,101,20,102,103,27,52,91,92,26,93,89]),import.meta.url)},group:{component:()=>I(()=>import("./assets/Index-DaMrW0q3.js"),__vite__mapDeps([105,106]),import.meta.url)},highlightedtext:{component:()=>I(()=>import("./assets/Index-B5YTCxfh.js"),__vite__mapDeps([107,108,5,6,109]),import.meta.url)},html:{base:()=>I(()=>import("./assets/Index-ClZmchXG.js"),__vite__mapDeps([110,62,5,111]),import.meta.url),example:()=>I(()=>import("./assets/Example-BhNfomJL.js"),__vite__mapDeps([112,113]),import.meta.url),component:()=>I(()=>import("./assets/Index-ClZmchXG.js"),__vite__mapDeps([110,62,5,111]),import.meta.url)},image:{base:()=>I(()=>import("./assets/ImagePreview-HI3lx22P.js"),__vite__mapDeps([114,5,6,13,14,15,7,8,9,115,39,10,40,21,52]),import.meta.url),example:()=>I(()=>import("./assets/Example-Dl2aPaSm.js"),__vite__mapDeps([116,39,10,40,117]),import.meta.url),component:()=>I(()=>import("./assets/Index-CaBhSVTV.js"),__vite__mapDeps([118,114,5,6,13,14,15,7,8,9,115,39,10,40,21,52,119,29,30,85,120,86,31,26,27,121,32,116,117]),import.meta.url)},imageeditor:{example:()=>I(()=>import("./assets/Example-ni-qeC9K.js"),__vite__mapDeps([122,39,10,40,119,5,8,29,30,115,85,120,86,31,26,27,9,121,123,52,117]),import.meta.url),component:()=>I(()=>import("./assets/Index-DZEhfE62.js"),__vite__mapDeps([124,114,5,6,13,14,15,7,8,9,115,39,10,40,21,52,119,29,30,85,120,86,31,26,27,121,47,48,43,41,19,125,117]),import.meta.url)},json:{component:()=>I(()=>import("./assets/Index-BadCXg7c.js"),__vite__mapDeps([126,43,44,6,9,5,127]),import.meta.url)},label:{component:()=>I(()=>import("./assets/Index-CiA4oR44.js"),__vite__mapDeps([128,129,5,6,130]),import.meta.url)},markdown:{example:()=>I(()=>import("./assets/Example-B7ODrjMo.js"),__vite__mapDeps([131,45,46,47,48,49]),import.meta.url),component:()=>I(()=>import("./assets/Index-BjKOnuHa.js"),__vite__mapDeps([132,42,43,44,9,45,46,47,48,49,50,131]),import.meta.url)},model3d:{example:()=>I(()=>import("./assets/Example-DdzFbIB-.js"),__vite__mapDeps([133,24]),import.meta.url),component:()=>I(()=>import("./assets/Index-D9O2ZyVj.js"),__vite__mapDeps([134,5,15,92,19,9,26,27,28,21,10,6,32,30,133,24,135]),import.meta.url)},multimodaltextbox:{example:()=>I(()=>import("./assets/Example-zCFe0rjf.js"),__vite__mapDeps([136,39,10,40,101,20,102,137,52]),import.meta.url),component:()=>I(()=>import("./assets/Index-BonJuDFB.js"),__vite__mapDeps([138,59,55,92,16,139,120,140,26,27,39,10,40,136,101,20,102,137,52,141]),import.meta.url)},nativeplot:{example:()=>I(()=>import("./assets/Example-ClB78_NG.js"),[],import.meta.url),component:()=>I(()=>import("./assets/Index-Dh-k4-gY.js"),__vite__mapDeps([142,59,55,6,129,143]),import.meta.url)},number:{example:()=>I(()=>import("./assets/Example-BGESePce.js"),__vite__mapDeps([144,24]),import.meta.url),component:()=>I(()=>import("./assets/Index-DbIoPSKM.js"),__vite__mapDeps([145,59,55,146]),import.meta.url)},paramviewer:{example:()=>I(()=>import("./assets/Example-Cw_ippvW.js"),__vite__mapDeps([147,24]),import.meta.url),component:()=>I(()=>import("./assets/Index-CLpzknoV.js"),__vite__mapDeps([148,46,149]),import.meta.url)},plot:{base:()=>I(()=>import("./assets/Plot-C3xyBZMj.js").then(i=>i.b),__vite__mapDeps([150,6]),import.meta.url),component:()=>I(()=>import("./assets/Index-Dm19polb.js"),__vite__mapDeps([151,150,6,5]),import.meta.url)},radio:{example:()=>I(()=>import("./assets/Example-DVBOkK3s.js"),__vite__mapDeps([152,24]),import.meta.url),component:()=>I(()=>import("./assets/Index-BgLjzi_Y.js"),__vite__mapDeps([153,59,55,152,24,154]),import.meta.url)},row:{component:()=>I(()=>import("./assets/Index-4I0BqrYH.js"),__vite__mapDeps([155,156]),import.meta.url)},slider:{example:()=>I(()=>import("./assets/Example-CFO2CuGc.js"),__vite__mapDeps([157,24]),import.meta.url),component:()=>I(()=>import("./assets/Index-a_KYtmlE.js"),__vite__mapDeps([158,59,55,159]),import.meta.url)},state:{component:()=>I(()=>import("./assets/Index-DR2546MK.js"),[],import.meta.url)},statustracker:{component:()=>I(()=>import("./assets/index-D7dsClkR.js"),__vite__mapDeps([160,161,86,31]),import.meta.url)},tabitem:{component:()=>I(()=>import("./assets/Index-DO0iNtFz.js"),__vite__mapDeps([162,163,164,1,2,165]),import.meta.url)},tabs:{component:()=>I(()=>import("./assets/Index-BAGEJbRZ.js"),__vite__mapDeps([166,163,164]),import.meta.url)},textbox:{example:()=>I(()=>import("./assets/Example-DF-_e6S-.js"),__vite__mapDeps([74,75]),import.meta.url),component:()=>I(()=>import("./assets/Index-D6nmNWeK.js"),__vite__mapDeps([167,168,59,55,43,44,139,120,86,77,74,75]),import.meta.url)},timer:{component:()=>I(()=>import("./assets/Index-CYMJ45R7.js"),[],import.meta.url)},uploadbutton:{component:()=>I(()=>import("./assets/Index-DF0HHV-F.js"),__vite__mapDeps([169,35,36,170]),import.meta.url)},video:{base:()=>I(()=>import("./assets/VideoPreview-Ligt--vw.js").then(i=>i.a),__vite__mapDeps([171,5,6,13,14,15,140,9,21,10,17,18,19,101,20,102,28,172,27]),import.meta.url),example:()=>I(()=>import("./assets/Example-rzygCx1i.js"),__vite__mapDeps([173,101,10,20,102,174]),import.meta.url),component:()=>I(()=>import("./assets/index-CZMvlbQa.js"),__vite__mapDeps([175,26,27,5,140,29,30,39,10,40,119,8,115,85,120,86,31,9,121,101,20,102,171,6,13,14,15,21,17,18,19,28,172,173,174,32,176,52,117]),import.meta.url)}},xi={},K1=typeof window<"u";function mh({api_url:i,name:e,id:t,variant:n}){const r=K1?window.__GRADIO__CC__:{},s={...$1,...r||{}};let o=t||e;if(xi[`${o}-${n}`])return{component:xi[`${o}-${n}`],name:e};try{if(!s?.[o]?.[n]&&!s?.[e]?.[n])throw new Error;return xi[`${o}-${n}`]=(s?.[o]?.[n]||s?.[e]?.[n])(),{name:e,component:xi[`${o}-${n}`]}}catch{if(!o)throw new Error(`Component not found: ${e}`);try{return xi[`${o}-${n}`]=J1(i,o,n),{name:e,component:xi[`${o}-${n}`]}}catch(a){if(n==="example")return xi[`${o}-${n}`]=I(()=>import("./assets/Example-Dp9u5d8k.js"),__vite__mapDeps([177,24]),import.meta.url),{name:e,component:xi[`${o}-${n}`]};throw console.error(`failed to load: ${e}`),console.error(a),a}}}function X1(i){return new Promise((e,t)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=i,document.head.appendChild(n),n.onload=()=>e(),n.onerror=()=>t()})}function J1(i,e,t){return Promise.all([X1(`${i}/custom_component/${e}/${t}/style.css`),I(()=>import(`${i}/custom_component/${e}/${t}/index.js`),[],import.meta.url)]).then(([n,r])=>r)}function Y1(){const i=fi({}),e={},t={},n=new Map,r=new Map,s=new Map,o={};function l({fn_index:c,status:h,queue:u=!0,size:f,position:d=null,eta:p=null,message:g=null,progress:m,time_limit:_=null}){const k=t[c],y=e[c],w=o[c],A=k.map(M=>{let R;const P=n.get(M)||0;if(w==="pending"&&h!=="pending"){let x=P-1;n.set(M,x<0?0:x),R=x>0?"pending":h}else w==="pending"&&h==="pending"?R="pending":w!=="pending"&&h==="pending"?(R="pending",n.set(M,P+1)):R=h;return{id:M,queue_position:d,queue_size:f,eta:p,status:R,message:g,progress:m}});y.forEach(M=>{const R=r.get(M)||0;if(w==="pending"&&h!=="pending"){let P=R-1;r.set(M,P<0?0:P),s.set(M,h)}else w!=="pending"&&h==="pending"?(r.set(M,R+1),s.set(M,h)):s.delete(M)}),i.update(M=>(A.forEach(({id:R,queue_position:P,queue_size:x,eta:E,status:T,message:D,progress:B})=>{M[R]={queue:u,queue_size:x,queue_position:P,eta:E,message:D,progress:B,status:T,fn_index:c}}),M)),o[c]=h}function a(c,h,u){e[c]=h,t[c]=u}return{update:l,register:a,subscribe:i.subscribe,get_status_for_fn(c){return o[c]},get_inputs_to_update(){return s}}}let _n=[];const Z1=typeof window<"u",Q1=Z1?requestAnimationFrame:async i=>await i();function ew(){let i,e=fi({}),t={},n,r,s,o,l=Y1();const a=fi();let c=[],h,u={},f;function d(E){E.forEach(T=>{T.targets.forEach(D=>{const B=o[D[0]];B&&T.event_specific_args?.length>0&&T.event_specific_args?.forEach(ee=>{B.props[ee]=T[ee]})})})}async function p({app:E,components:T,layout:D,dependencies:B,root:ee,options:oe}){w(),h=E,y(c),c=T,n=new Set,r=new Set,_n=[],s=new Map,i=new Map,o={},f={id:D.id,type:"column",props:{interactive:!1,scale:oe.fill_height?1:null},has_modes:!1,instance:null,component:null,component_class_id:"",key:null},T.push(f),B.forEach(G=>{l.register(G.id,G.inputs,G.outputs),G.frontend_fn=gh(G.js,!!G.backend_fn,G.inputs.length,G.outputs.length),_h(G.targets,G.id,t),bh(G,n,r)}),e.set(t),s=yh(T,ee),o=T.reduce((G,he)=>(G[he.id]=he,G),{}),await m(D,ee),a.set(f),d(B)}function g({render_id:E,components:T,layout:D,root:B,dependencies:ee}){yh(T,B).forEach((S,ie)=>{s.set(ie,S)}),t={},ee.forEach(S=>{l.register(S.id,S.inputs,S.outputs),S.frontend_fn=gh(S.js,!!S.backend_fn,S.inputs.length,S.outputs.length),_h(S.targets,S.id,t),bh(S,n,r)}),e.set(t);let G=o[D.id],he=[];const H=S=>{he.push(S),S.children&&S.children.forEach(ie=>{H(ie)})};H(G),y(he),Object.entries(o).forEach(([S,ie])=>{let N=Number(S);ie.rendered_in===E&&(delete o[N],i.has(N)&&i.delete(N))}),T.forEach(S=>{o[S.id]=S,i.set(S.id,S)}),G.parent&&(G.parent.children[G.parent.children.indexOf(G)]=o[D.id]),m(D,B,G.parent).then(()=>{a.set(f)}),d(ee)}async function m(E,T,D){const B=o[E.id];return B.component=(await s.get(B.component_class_id||B.type))?.default,B.parent=D,B.type==="dataset"&&(B.props.component_map=jd(B.type,B.component_class_id,T,c,B.props.components).example_components),t[B.id]&&(B.props.attached_events=Object.keys(t[B.id])),B.props.interactive=nw(B.id,B.props.interactive,B.props.value,n,r),B.props.server=rw(B.id,B.props.server_fns,h),B.key!=null&&u[B.key]!==void 0&&(B.props.value=u[B.key]),i.set(B.id,B),E.children&&(B.children=await Promise.all(E.children.map(ee=>m(ee,T,B)))),B}let _=!1,k=fi(!1);function y(E){E.forEach(T=>{T.key!=null&&(u[T.key]=T.props.value)})}function w(){a.update(E=>{for(let T=0;T<_n.length;T++)for(let D=0;D<_n[T].length;D++){const B=_n[T][D];if(!B)continue;const ee=o[B.id];if(!ee)continue;let oe;B.value instanceof Map?oe=new Map(B.value):B.value instanceof Set?oe=new Set(B.value):Array.isArray(B.value)?oe=[...B.value]:B.value===null?oe=null:typeof B.value=="object"?oe={...B.value}:oe=B.value,ee.props[B.prop]=oe}return E}),_n=[],_=!1,k.set(!1)}function A(E){E&&(_n.push(E),_||(_=!0,k.set(!0),Q1(w)))}function M(E){const T=i.get(E);return T?T.instance.get_value?T.instance.get_value():T.props.value:null}function R(E,T){const D=i.get(E);D&&D.instance.modify_stream_state&&D.instance.modify_stream_state(T)}function P(E){const T=i.get(E);return T&&T.instance.get_stream_state?T.instance.get_stream_state():"not_set"}function x(E,T){const D=i.get(E);D&&D.instance.set_time_limit&&D.instance.set_time_limit(T)}return{layout:a,targets:e,update_value:A,get_data:M,modify_stream:R,get_stream_state:P,set_time_limit:x,loading_status:l,scheduled_updates:k,create_layout:p,rerender_layout:g}}const tw=Object.getPrototypeOf(async function(){}).constructor;function gh(i,e,t,n){if(!i)return null;const r=e?t===1:n===1;try{return new tw("__fn_args",`  let result = await (${i})(...__fn_args);
  if (typeof result === "undefined") return [];
  return (${r} && !Array.isArray(result)) ? [result] : result;`)}catch(s){return console.error("Could not parse custom js method."),console.error(s),null}}function _h(i,e,t){return i.forEach(([n,r])=>{t[n]||(t[n]={}),t[n]?.[r]&&!t[n]?.[r].includes(e)?t[n][r].push(e):t[n][r]=[e]}),t}function bh(i,e,t){return i.inputs.forEach(n=>e.add(n)),i.outputs.forEach(n=>t.add(n)),[e,t]}function iw(i){return Array.isArray(i)&&i.length===0||i===""||i===0||!i}function nw(i,e,t,n,r){return e===!1?!1:e===!0?!0:!!(n.has(i)||!r.has(i)&&iw(t))}function rw(i,e,t){return e?e.reduce((n,r)=>(n[r]=async(...s)=>(s.length===1&&(s=s[0]),await t.component_server(i,r,s)),n),{}):{}}function jd(i,e,t,n,r){let s=new Map;i==="dataset"&&r&&r.forEach(l=>{if(s.has(l))return;let a;const c=n.find(h=>h.type===l);c&&(a=mh({api_url:t,name:l,id:c.component_class_id,variant:"example"}),s.set(l,a.component))});const o=mh({api_url:t,name:i,id:e,variant:"component"});return{component:o.component,name:o.name,example_components:s.size>0?s:void 0}}function yh(i,e){let t=new Map;return i.forEach(n=>{const{component:r,example_components:s}=jd(n.type,n.component_class_id,e,i);if(t.set(n.component_class_id||n.type,r),s)for(const[o,l]of s)t.set(o,l)}),t}const Ud={built_with_gradio:"   Gradio",clear:"",or:"",submit:""},zd={click_to_upload:" ",drop_audio:"   ",drop_csv:"   ",drop_file:"  ",drop_image:"  ",drop_video:"  "},sw={common:Ud,upload_text:zd},ow=Object.freeze(Object.defineProperty({__proto__:null,common:Ud,default:sw,upload_text:zd},Symbol.toStringTag,{value:"Module"})),Wd={built_with_gradio:"Construt amb gradio",clear:"Neteja",empty:"Buit",error:"Error",loading:"S'est carregant",or:"o",submit:"Envia"},Gd={click_to_upload:"Feu clic per pujar",drop_audio:"Deixeu anar l'udio aqu",drop_csv:"Deixeu anar el CSV aqu",drop_file:"Deixeu anar el fitxer aqu",drop_image:"Deixeu anar la imatge aqu",drop_video:"Deixeu anar el vdeo aqu"},lw={common:Wd,upload_text:Gd},aw=Object.freeze(Object.defineProperty({__proto__:null,common:Wd,default:lw,upload_text:Gd},Symbol.toStringTag,{value:"Module"})),qd={annotated_image:"  "},$d={allow_recording_access:"       .",audio:"",record_from_microphone:"  ",stop_recording:" "},Kd={connection_can_break:"                     .",long_requests_queue:"   .       .",lost_connection:"    . "},Xd={checkbox:" ",checkbox_group:"  "},Jd={code:""},Yd={color_picker:" "},Zd={built_with:" ...",built_with_gradio:"Gradio  ",clear:"",download:"",edit:"",empty:"",error:"",hosted_on:"  ",loading:"",logo:"",or:"",remove:"",share:"",submit:"",undo:""},Qd={incorrect_format:"    CSV  TSV  ",new_column:" ",new_row:" "},ep={dropdown:" "},tp={build_error:"  ",config_error:"  ",contact_page_author:"         .",no_app_file:"   ",runtime_error:" runtime ",space_not_working:'"  " {0}',space_paused:" ",use_via_api:"  API  "},ip={uploading:"..."},np={highlighted_text:"  "},rp={allow_webcam_access:"       .",brush_color:" ",brush_radius:" ",image:"",remove_image:" ",select_brush_color:"  ",start_drawing:"   ",use_brush:" "},sp={label:""},op={enable_cookies:"   HuggingFace Space          .",incorrect_credentials:" ",login:" "},lp={number:""},ap={plot:""},cp={radio:""},hp={slider:""},up={click_to_upload:"   ",drop_audio:"  ",drop_csv:" CSV ",drop_file:"  ",drop_image:"  ",drop_video:"  "},cw={"3D_model":{"3d_model":"  "},annotated_image:qd,audio:$d,blocks:Kd,checkbox:Xd,code:Jd,color_picker:Yd,common:Zd,dataframe:Qd,dropdown:ep,errors:tp,file:ip,highlighted_text:np,image:rp,label:sp,login:op,number:lp,plot:ap,radio:cp,slider:hp,upload_text:up},hw=Object.freeze(Object.defineProperty({__proto__:null,annotated_image:qd,audio:$d,blocks:Kd,checkbox:Xd,code:Jd,color_picker:Yd,common:Zd,dataframe:Qd,default:cw,dropdown:ep,errors:tp,file:ip,highlighted_text:np,image:rp,label:sp,login:op,number:lp,plot:ap,radio:cp,slider:hp,upload_text:up},Symbol.toStringTag,{value:"Module"})),fp={built_with_gradio:"Mit Gradio erstellt",clear:"Lschen",or:"oder",submit:"Absenden"},dp={click_to_upload:"Hochladen",drop_audio:"Audio hier ablegen",drop_csv:"CSV Datei hier ablegen",drop_file:"Datei hier ablegen",drop_image:"Bild hier ablegen",drop_video:"Video hier ablegen"},uw={common:fp,upload_text:dp},fw=Object.freeze(Object.defineProperty({__proto__:null,common:fp,default:uw,upload_text:dp},Symbol.toStringTag,{value:"Module"})),pp={annotated_image:"Annotated Image"},mp={allow_recording_access:"Please allow access to the microphone for recording.",audio:"Audio",record_from_microphone:"Record from microphone",stop_recording:"Stop recording",no_device_support:"Media devices could not be accessed. Check that you are running on a secure origin (https) or localhost (or you have passed a valid SSL certificate to ssl_verify), and you have allowed browser access to your device.",stop:"Stop",resume:"Resume",record:"Record",no_microphone:"No microphone found",pause:"Pause",play:"Play",waiting:"Waiting"},gp={connection_can_break:"On mobile, the connection can break if this tab is unfocused or the device sleeps, losing your position in queue.",long_requests_queue:"There is a long queue of requests pending. Duplicate this Space to skip.",lost_connection:"Lost connection due to leaving page. Rejoining queue...",waiting_for_inputs:"Waiting for file(s) to finish uploading, please retry."},_p={checkbox:"Checkbox",checkbox_group:"Checkbox Group"},bp={code:"Code"},yp={color_picker:"Color Picker"},wp={built_with:"built with",built_with_gradio:"Built with Gradio",clear:"Clear",download:"Download",edit:"Edit",empty:"Empty",error:"Error",hosted_on:"Hosted on",loading:"Loading",logo:"logo",or:"or",remove:"Remove",share:"Share",submit:"Submit",undo:"Undo",no_devices:"No devices found"},vp={incorrect_format:"Incorrect format, only CSV and TSV files are supported",new_column:"New column",new_row:"New row"},kp={dropdown:"Dropdown"},xp={build_error:"there is a build error",config_error:"there is a config error",contact_page_author:"Please contact the author of the page to let them know.",no_app_file:"there is no app file",runtime_error:"there is a runtime error",space_not_working:`"Space isn't working because" {0}`,space_paused:"the space is paused",use_via_api:"Use via API"},Sp={uploading:"Uploading..."},Ep={highlighted_text:"Highlighted Text"},Ap={allow_webcam_access:"Please allow access to the webcam for recording.",brush_color:"Brush color",brush_radius:"Brush radius",image:"Image",remove_image:"Remove Image",select_brush_color:"Select brush color",start_drawing:"Start drawing",use_brush:"Use brush"},Tp={label:"Label"},Cp={enable_cookies:"If you are visiting a HuggingFace Space in Incognito mode, you must enable third party cookies.",incorrect_credentials:"Incorrect Credentials",login:"Login"},Op={number:"Number"},Mp={plot:"Plot"},Dp={radio:"Radio"},Pp={slider:"Slider"},Lp={click_to_upload:"Click to Upload",drop_audio:"Drop Audio Here",drop_csv:"Drop CSV Here",drop_file:"Drop File Here",drop_image:"Drop Image Here",drop_video:"Drop Video Here",drop_gallery:"Drop Media Here",paste_clipboard:"Paste from Clipboard"},dw={"3D_model":{"3d_model":"3D Model"},annotated_image:pp,audio:mp,blocks:gp,checkbox:_p,code:bp,color_picker:yp,common:wp,dataframe:vp,dropdown:kp,errors:xp,file:Sp,highlighted_text:Ep,image:Ap,label:Tp,login:Cp,number:Op,plot:Mp,radio:Dp,slider:Pp,upload_text:Lp},pw=Object.freeze(Object.defineProperty({__proto__:null,annotated_image:pp,audio:mp,blocks:gp,checkbox:_p,code:bp,color_picker:yp,common:wp,dataframe:vp,default:dw,dropdown:kp,errors:xp,file:Sp,highlighted_text:Ep,image:Ap,label:Tp,login:Cp,number:Op,plot:Mp,radio:Dp,slider:Pp,upload_text:Lp},Symbol.toStringTag,{value:"Module"})),Rp={built_with_gradio:"Construido con Gradio",clear:"Limpiar",or:"o",submit:"Enviar"},Ip={click_to_upload:"Haga click para cargar",drop_audio:"Coloque el audio aqu",drop_csv:"Coloque el CSV aqu",drop_file:"Coloque el archivo aqu",drop_image:"Coloque la imagen aqu",drop_video:"Coloque el video aqu",drop_gallery:"Coloque las imagenes aqu"},mw={common:Rp,upload_text:Ip},gw=Object.freeze(Object.defineProperty({__proto__:null,common:Rp,default:mw,upload_text:Ip},Symbol.toStringTag,{value:"Module"})),Np={built_with_gradio:"Gradiorekin eraikia",clear:"Garbitu",or:"edo",submit:"Bidali"},Bp={click_to_upload:"Klik egin kargatzeko",drop_audio:"Jarri hemen audioa",drop_csv:"Jarri hemen CSVa",drop_file:"Jarri hemen fitxategia",drop_image:"Jarri hemen irudia",drop_video:"Jarri hemen bideoa"},_w={common:Np,upload_text:Bp},bw=Object.freeze(Object.defineProperty({__proto__:null,common:Np,default:_w,upload_text:Bp},Symbol.toStringTag,{value:"Module"})),Hp={built_with_gradio:"   gradio",clear:"",or:"",submit:""},Fp={click_to_upload:"   ",drop_audio:"    ",drop_csv:" csv     ",drop_file:"    ",drop_image:"    ",drop_video:"    "},yw={common:Hp,upload_text:Fp},ww=Object.freeze(Object.defineProperty({__proto__:null,common:Hp,default:yw,upload_text:Fp},Symbol.toStringTag,{value:"Module"})),Vp={allow_recording_access:"Veuillez autoriser l'accs  l'enregistrement",audio:"Audio",record_from_microphone:"Enregistrer avec le microphone",stop_recording:"Arrter l'enregistrement"},jp={built_with:"Construit avec",built_with_gradio:"Construit avec Gradio",clear:"Effacer",download:"Tlcharger",edit:"diter",error:"Erreur",loading:"Chargement",logo:"logo",or:"ou",remove:"Supprimer",share:"Partager",submit:"Soumettre"},Up={click_to_upload:"Cliquer pour Tlcharger",drop_audio:"Dposer l'Audio Ici",drop_csv:"Dposer le CSV Ici",drop_file:"Dposer le Fichier Ici",drop_image:"Dposer l'Image Ici",drop_video:"Dposer la Vido Ici"},vw={audio:Vp,common:jp,upload_text:Up},kw=Object.freeze(Object.defineProperty({__proto__:null,audio:Vp,common:jp,default:vw,upload_text:Up},Symbol.toStringTag,{value:"Module"})),zp={built_with_gradio:"  ",clear:"",or:"",submit:""},Wp={click_to_upload:"  ",drop_audio:"   ",drop_csv:" csv  ",drop_file:"  ",drop_image:"   ",drop_video:"   "},xw={common:zp,upload_text:Wp},Sw=Object.freeze(Object.defineProperty({__proto__:null,common:zp,default:xw,upload_text:Wp},Symbol.toStringTag,{value:"Module"})),Gp={built_with_gradio:"Gradio  ",clear:"",or:"",submit:" "},qp={click_to_upload:"    ",drop_audio:"   ",drop_csv:" CSV  ",drop_file:" File  ",drop_image:"   ",drop_video:"   "},Ew={common:Gp,upload_text:qp},Aw=Object.freeze(Object.defineProperty({__proto__:null,common:Gp,default:Ew,upload_text:qp},Symbol.toStringTag,{value:"Module"})),$p={built_with_gradio:"gradio",clear:"",or:"",submit:""},Kp={click_to_upload:"",drop_audio:"",drop_csv:"CSV",drop_file:"",drop_image:"",drop_video:""},Tw={common:$p,upload_text:Kp},Cw=Object.freeze(Object.defineProperty({__proto__:null,common:$p,default:Tw,upload_text:Kp},Symbol.toStringTag,{value:"Module"})),Xp={built_with_gradio:"gradio ",clear:"",or:"",submit:""},Jp={click_to_upload:" ",drop_audio:"  ",drop_csv:"CSV  ",drop_file:"  ",drop_image:"  ",drop_video:"  "},Ow={common:Xp,upload_text:Jp},Mw=Object.freeze(Object.defineProperty({__proto__:null,common:Xp,default:Ow,upload_text:Jp},Symbol.toStringTag,{value:"Module"})),Yp={built_with_gradio:"sukurta su gradio",clear:"Trinti",or:"arba",submit:"Pateikti"},Zp={click_to_upload:"Spustelkite nordami kelti",drop_audio:"kelkite garso ra ia",drop_csv:"kelkite CSV ia",drop_file:"kelkite byl ia",drop_image:"kelkite paveiksll ia",drop_video:"kelkite vaizdo ra ia"},Dw={common:Yp,upload_text:Zp},Pw=Object.freeze(Object.defineProperty({__proto__:null,common:Yp,default:Dw,upload_text:Zp},Symbol.toStringTag,{value:"Module"})),Qp={built_with_gradio:"gemaakt met gradio",clear:"Wis",or:"of",submit:"Zend in"},em={click_to_upload:"Klik om the Uploaden",drop_audio:"Sleep een Geluidsbestand hier",drop_csv:"Sleep een CSV hier",drop_file:"Sleep een Document hier",drop_image:"Sleep een Afbeelding hier",drop_video:"Sleep een Video hier"},Lw={common:Qp,upload_text:em},Rw=Object.freeze(Object.defineProperty({__proto__:null,common:Qp,default:Lw,upload_text:em},Symbol.toStringTag,{value:"Module"})),tm={built_with_gradio:"utworzone z gradio",clear:"Wyczy",or:"lub",submit:"Zatwierd"},im={click_to_upload:"Kliknij, aby przesa",drop_audio:"Przecignij tutaj audio",drop_csv:"Przecignij tutaj CSV",drop_file:"Przecignij tutaj plik",drop_image:"Przecignij tutaj zdjcie",drop_video:"Przecignij tutaj video"},Iw={common:tm,upload_text:im},Nw=Object.freeze(Object.defineProperty({__proto__:null,common:tm,default:Iw,upload_text:im},Symbol.toStringTag,{value:"Module"})),nm={built_with_gradio:"Construdo com gradio",clear:"Limpar",error:"Erro",flag:"Marcar",loading:"Carregando",or:"ou",submit:"Enviar"},rm={click_to_upload:"Clique para o Upload",drop_audio:"Solte o udio Aqui",drop_csv:"Solte o CSV Aqui",drop_file:"Solte o Arquivo Aqui",drop_image:"Solte a Imagem Aqui",drop_video:"Solte o Vdeo Aqui"},Bw={common:nm,upload_text:rm},Hw=Object.freeze(Object.defineProperty({__proto__:null,common:nm,default:Bw,upload_text:rm},Symbol.toStringTag,{value:"Module"})),sm={annotated_image:" "},om={allow_recording_access:",      .",audio:"",record_from_microphone:"  ",stop_recording:" ",no_device_support:"     . ,       (https)  localhost (   SSL-  ssl_verify),      .",stop:"",resume:"",record:"",no_microphone:"  ",pause:"",play:""},lm={connection_can_break:"     ,       ,        .",long_requests_queue:"  .   ,  .",lost_connection:"  -   .  ..."},am={checkbox:"",checkbox_group:" "},cm={code:""},hm={color_picker:" "},um={built_with:" ",built_with_gradio:"   Gradio",clear:"",download:"",edit:"",empty:"",error:"",hosted_on:" ",loading:"",logo:"",or:"",remove:"",share:"",submit:"",undo:"",no_devices:"    "},fm={incorrect_format:" ,    CSV  TSV",new_column:" ",new_row:" "},dm={dropdown:"Dropdown"},pm={build_error:"  ",config_error:"  ",contact_page_author:",    ,     .",no_app_file:"  ",runtime_error:"   ",space_not_working:'"  ,  " {0}',space_paused:" ",use_via_api:"  API"},mm={uploading:"..."},gm={highlighted_text:" "},_m={allow_webcam_access:",    -  .",brush_color:" ",brush_radius:" ",image:"",remove_image:" ",select_brush_color:"  ",start_drawing:" ",use_brush:" "},bm={label:""},ym={enable_cookies:"    HuggingFace   ,      cookie.",incorrect_credentials:"  ",login:"  "},wm={number:""},vm={plot:""},km={radio:""},xm={slider:""},Sm={click_to_upload:",  ",drop_audio:"  ",drop_csv:"  CSV ",drop_file:"  ",drop_image:"  ",drop_video:"  ",drop_gallery:" (-) ",paste_clipboard:"   "},Fw={"3D_model":{"3d_model":"3D-"},annotated_image:sm,audio:om,blocks:lm,checkbox:am,code:cm,color_picker:hm,common:um,dataframe:fm,dropdown:dm,errors:pm,file:mm,highlighted_text:gm,image:_m,label:bm,login:ym,number:wm,plot:vm,radio:km,slider:xm,upload_text:Sm},Vw=Object.freeze(Object.defineProperty({__proto__:null,annotated_image:sm,audio:om,blocks:lm,checkbox:am,code:cm,color_picker:hm,common:um,dataframe:fm,default:Fw,dropdown:dm,errors:pm,file:mm,highlighted_text:gm,image:_m,label:bm,login:ym,number:wm,plot:vm,radio:km,slider:xm,upload_text:Sm},Symbol.toStringTag,{value:"Module"})),Em={built_with_gradio:"  ",clear:"",or:"",submit:""},Am={click_to_upload:" ",drop_audio:" ",drop_csv:"csv  ",drop_file:" ",drop_image:" ",drop_video:" "},jw={common:Em,upload_text:Am},Uw=Object.freeze(Object.defineProperty({__proto__:null,common:Em,default:jw,upload_text:Am},Symbol.toStringTag,{value:"Module"})),Tm={built_with_gradio:"Gradio ile oluturulmutur",clear:"Temizle",or:"veya",submit:"Ykle"},Cm={click_to_upload:"Yklemek iin Tkla",drop_audio:"Kayd Buraya Srkle",drop_csv:"CSV'yi Buraya Srkle",drop_file:"Dosyay Buraya Srkle",drop_image:"Resmi Buraya Srkle",drop_video:"Videoyu Buraya Srkle"},zw={common:Tm,upload_text:Cm},Ww=Object.freeze(Object.defineProperty({__proto__:null,common:Tm,default:zw,upload_text:Cm},Symbol.toStringTag,{value:"Module"})),Om={built_with_gradio:"   gradio",clear:"",or:"",submit:""},Mm={click_to_upload:"  ",drop_audio:"  ",drop_csv:" CSV- ",drop_file:"  ",drop_image:"  ",drop_video:"  "},Gw={common:Om,upload_text:Mm},qw=Object.freeze(Object.defineProperty({__proto__:null,common:Om,default:Gw,upload_text:Mm},Symbol.toStringTag,{value:"Module"})),Dm={built_with_gradio:"    Gradio",clear:" ",or:"",submit:" "},Pm={click_to_upload:"     ",drop_audio:"   ",drop_csv:"   ",drop_file:"   ",drop_image:"   ",drop_video:"   "},$w={common:Dm,upload_text:Pm},Kw=Object.freeze(Object.defineProperty({__proto__:null,common:Dm,default:$w,upload_text:Pm},Symbol.toStringTag,{value:"Module"})),Lm={built_with_gradio:"gradio bilan qilingan",clear:"Tozalash",submit:"Yubor"},Rm={click_to_upload:"Yuklash uchun Bosing",drop_audio:"Audioni Shu Yerga Tashlang",drop_csv:"CSVni Shu Yerga Tashlang",drop_file:"Faylni Shu Yerga Tashlang",drop_image:"Rasmni Shu Yerga Tashlang",drop_video:"Videoni Shu Yerga Tashlang"},Xw={common:Lm,upload_text:Rm},Jw=Object.freeze(Object.defineProperty({__proto__:null,common:Lm,default:Xw,upload_text:Rm},Symbol.toStringTag,{value:"Module"})),Im={annotated_image:""},Nm={allow_recording_access:"",audio:"",record_from_microphone:"",stop_recording:"",no_device_support:"https ssl_verify  SSL ",stop:"",resume:"",record:"",no_microphone:"",pause:"",play:"",waiting:""},Bm={connection_can_break:"",long_requests_queue:"",lost_connection:"..."},Hm={checkbox:"",checkbox_group:""},Fm={code:""},Vm={color_picker:""},jm={built_with:"",built_with_gradio:" Gradio ",clear:"",download:"",edit:"",empty:"",error:"",hosted_on:"",loading:"",logo:"",or:"",remove:"",share:"",submit:"",undo:""},Um={incorrect_format:" CSV  TSV ",new_column:"",new_row:""},zm={dropdown:""},Wm={build_error:"",config_error:"",contact_page_author:"",no_app_file:"",runtime_error:"",space_not_working:'"" {0}',space_paused:"",use_via_api:" API "},Gm={uploading:"..."},qm={highlighted_text:""},$m={allow_webcam_access:"",brush_color:"",brush_radius:"",image:"",remove_image:"",select_brush_color:"",start_drawing:"",use_brush:""},Km={label:""},Xm={enable_cookies:" HuggingFace  cookie",incorrect_credentials:"",login:""},Jm={number:""},Ym={plot:""},Zm={radio:""},Qm={slider:""},eg={click_to_upload:"",drop_audio:"",drop_csv:" CSV ",drop_file:"",drop_image:"",drop_video:""},Yw={"3D_model":{"3d_model":"3D"},annotated_image:Im,audio:Nm,blocks:Bm,checkbox:Hm,code:Fm,color_picker:Vm,common:jm,dataframe:Um,dropdown:zm,errors:Wm,file:Gm,highlighted_text:qm,image:$m,label:Km,login:Xm,number:Jm,plot:Ym,radio:Zm,slider:Qm,upload_text:eg},Zw=Object.freeze(Object.defineProperty({__proto__:null,annotated_image:Im,audio:Nm,blocks:Bm,checkbox:Hm,code:Fm,color_picker:Vm,common:jm,dataframe:Um,default:Yw,dropdown:zm,errors:Wm,file:Gm,highlighted_text:qm,image:$m,label:Km,login:Xm,number:Jm,plot:Ym,radio:Zm,slider:Qm,upload_text:eg},Symbol.toStringTag,{value:"Module"})),tg={built_with_gradio:"Gradio",clear:"",or:"",submit:""},ig={click_to_upload:"",drop_audio:"",drop_csv:"CSV",drop_file:"",drop_image:"",drop_video:""},Qw={common:tg,upload_text:ig},ev=Object.freeze(Object.defineProperty({__proto__:null,common:tg,default:Qw,upload_text:ig},Symbol.toStringTag,{value:"Module"})),wh=Object.assign({"./lang/ar.json":ow,"./lang/ca.json":aw,"./lang/ckb.json":hw,"./lang/de.json":fw,"./lang/en.json":pw,"./lang/es.json":gw,"./lang/eu.json":bw,"./lang/fa.json":ww,"./lang/fr.json":kw,"./lang/he.json":Sw,"./lang/hi.json":Aw,"./lang/ja.json":Cw,"./lang/ko.json":Mw,"./lang/lt.json":Pw,"./lang/nl.json":Rw,"./lang/pl.json":Nw,"./lang/pt-BR.json":Hw,"./lang/ru.json":Vw,"./lang/ta.json":Uw,"./lang/tr.json":Ww,"./lang/uk.json":qw,"./lang/ur.json":Kw,"./lang/uz.json":Jw,"./lang/zh-CN.json":Zw,"./lang/zh-TW.json":ev});function ng(){let i={};for(const e in wh){const t=e.split("/").pop().split(".").shift();i[t]=wh[e].default}return i}const vh=ng();for(const i in vh)Rd(i,vh[i]);async function tc(){await k1({fallbackLocale:"en",initialLocale:D1()})}const tv=Object.freeze(Object.defineProperty({__proto__:null,Embed:Fd,create_components:ew,mount_css:yo,prefix_css:ql,process_langs:ng,setupi18n:tc},Symbol.toStringTag,{value:"Module"}));function kn(i){let e=["","k","M","G","T","P","E","Z"],t=0;for(;i>1e3&&t<e.length-1;)i/=1e3,t++;let n=e[t];return(Number.isInteger(i)?i:i.toFixed(1))+n}function kh(i){return Object.prototype.toString.call(i)==="[object Date]"}function $l(i,e,t,n){if(typeof t=="number"||kh(t)){const r=n-t,s=(t-e)/(i.dt||1/60),o=i.opts.stiffness*r,l=i.opts.damping*s,a=(o-l)*i.inv_mass,c=(s+a)*i.dt;return Math.abs(c)<i.opts.precision&&Math.abs(r)<i.opts.precision?n:(i.settled=!1,kh(t)?new Date(t.getTime()+c):t+c)}else{if(Array.isArray(t))return t.map((r,s)=>$l(i,e[s],t[s],n[s]));if(typeof t=="object"){const r={};for(const s in t)r[s]=$l(i,e[s],t[s],n[s]);return r}else throw new Error(`Cannot spring ${typeof t} values`)}}function xh(i,e={}){const t=fi(i),{stiffness:n=.15,damping:r=.8,precision:s=.01}=e;let o,l,a,c=i,h=i,u=1,f=0,d=!1;function p(m,_={}){h=m;const k=a={};return i==null||_.hard||g.stiffness>=1&&g.damping>=1?(d=!0,o=Cr(),c=m,t.set(i=h),Promise.resolve()):(_.soft&&(f=1/((_.soft===!0?.5:+_.soft)*60),u=0),l||(o=Cr(),d=!1,l=fo(y=>{if(d)return d=!1,l=null,!1;u=Math.min(u+f,1);const w={inv_mass:u,opts:g,settled:!0,dt:(y-o)*60/1e3},A=$l(w,c,i,h);return o=y,c=i,t.set(i=A),w.settled&&(l=null),!w.settled})),new Promise(y=>{l.promise.then(()=>{k===a&&y()})}))}const g={set:p,update:(m,_)=>p(m(h,i),_),subscribe:t.subscribe,stiffness:n,damping:r,precision:s};return g}function iv(i){let e,t,n,r,s,o,l,a,c,h,u,f;return{c(){e=Y("div"),t=rt("svg"),n=rt("g"),r=rt("path"),s=rt("path"),o=rt("path"),l=rt("path"),a=rt("g"),c=rt("path"),h=rt("path"),u=rt("path"),f=rt("path"),C(r,"d","M255.926 0.754768L509.702 139.936V221.027L255.926 81.8465V0.754768Z"),C(r,"fill","#FF7C00"),C(r,"fill-opacity","0.4"),C(r,"class","svelte-zyxd38"),C(s,"d","M509.69 139.936L254.981 279.641V361.255L509.69 221.55V139.936Z"),C(s,"fill","#FF7C00"),C(s,"class","svelte-zyxd38"),C(o,"d","M0.250138 139.937L254.981 279.641V361.255L0.250138 221.55V139.937Z"),C(o,"fill","#FF7C00"),C(o,"fill-opacity","0.4"),C(o,"class","svelte-zyxd38"),C(l,"d","M255.923 0.232622L0.236328 139.936V221.55L255.923 81.8469V0.232622Z"),C(l,"fill","#FF7C00"),C(l,"class","svelte-zyxd38"),ne(n,"transform","translate("+i[1][0]+"px, "+i[1][1]+"px)"),C(c,"d","M255.926 141.5L509.702 280.681V361.773L255.926 222.592V141.5Z"),C(c,"fill","#FF7C00"),C(c,"fill-opacity","0.4"),C(c,"class","svelte-zyxd38"),C(h,"d","M509.69 280.679L254.981 420.384V501.998L509.69 362.293V280.679Z"),C(h,"fill","#FF7C00"),C(h,"class","svelte-zyxd38"),C(u,"d","M0.250138 280.681L254.981 420.386V502L0.250138 362.295V280.681Z"),C(u,"fill","#FF7C00"),C(u,"fill-opacity","0.4"),C(u,"class","svelte-zyxd38"),C(f,"d","M255.923 140.977L0.236328 280.68V362.294L255.923 222.591V140.977Z"),C(f,"fill","#FF7C00"),C(f,"class","svelte-zyxd38"),ne(a,"transform","translate("+i[2][0]+"px, "+i[2][1]+"px)"),C(t,"viewBox","-1200 -1200 3000 3000"),C(t,"fill","none"),C(t,"xmlns","http://www.w3.org/2000/svg"),C(t,"class","svelte-zyxd38"),C(e,"class","svelte-zyxd38"),te(e,"margin",i[0])},m(d,p){j(d,e,p),q(e,t),q(t,n),q(n,r),q(n,s),q(n,o),q(n,l),q(t,a),q(a,c),q(a,h),q(a,u),q(a,f)},p(d,[p]){p&2&&ne(n,"transform","translate("+d[1][0]+"px, "+d[1][1]+"px)"),p&4&&ne(a,"transform","translate("+d[2][0]+"px, "+d[2][1]+"px)"),p&1&&te(e,"margin",d[0])},i:Ee,o:Ee,d(d){d&&V(e)}}}function nv(i,e,t){let n,r,{margin:s=!0}=e;const o=xh([0,0]);Ln(i,o,f=>t(1,n=f));const l=xh([0,0]);Ln(i,l,f=>t(2,r=f));let a;async function c(){await Promise.all([o.set([125,140]),l.set([-125,-140])]),await Promise.all([o.set([-125,140]),l.set([125,-140])]),await Promise.all([o.set([-125,0]),l.set([125,-0])]),await Promise.all([o.set([125,0]),l.set([-125,0])])}async function h(){await c(),a||h()}async function u(){await Promise.all([o.set([125,0]),l.set([-125,0])]),h()}return Mr(()=>(u(),()=>a=!0)),i.$$set=f=>{"margin"in f&&t(0,s=f.margin)},[s,n,r,o,l]}class rv extends Yt{constructor(e){super(),Jt(this,e,nv,iv,vt,{margin:0})}get margin(){return this.$$.ctx[0]}set margin(e){this.$$set({margin:e}),O()}}function sv(i){let e,t,n;const r=i[21].default,s=Wr(r,i,i[20],null);let o=[{"data-testid":i[9]},{id:i[4]},{class:t="block "+i[5].join(" ")+" svelte-1wb40ub"}],l={};for(let a=0;a<o.length;a+=1)l=Wa(l,o[a]);return{c(){e=Y(i[17]),s&&s.c(),Yc(i[17])(e,l),te(e,"hidden",i[12]===!1),te(e,"padded",i[8]),te(e,"border_focus",i[7]==="focus"),te(e,"border_contrast",i[7]==="contrast"),te(e,"hide-container",!i[10]&&!i[11]),ne(e,"height",i[18](i[0])),ne(e,"min-height",i[18](i[1])),ne(e,"max-height",i[18](i[2])),ne(e,"width",typeof i[3]=="number"?`calc(min(${i[3]}px, 100%))`:i[18](i[3])),ne(e,"border-style",i[6]),ne(e,"overflow",i[13]?i[14]:"hidden"),ne(e,"flex-grow",i[15]),ne(e,"min-width",`calc(min(${i[16]}px, 100%))`),ne(e,"border-width","var(--block-border-width)")},m(a,c){j(a,e,c),s&&s.m(e,null),n=!0},p(a,c){s&&s.p&&(!n||c&1048576)&&qr(s,r,a,a[20],n?Gr(r,a[20],c,null):$r(a[20]),null),Yc(a[17])(e,l=dd(o,[(!n||c&512)&&{"data-testid":a[9]},(!n||c&16)&&{id:a[4]},(!n||c&32&&t!==(t="block "+a[5].join(" ")+" svelte-1wb40ub"))&&{class:t}])),te(e,"hidden",a[12]===!1),te(e,"padded",a[8]),te(e,"border_focus",a[7]==="focus"),te(e,"border_contrast",a[7]==="contrast"),te(e,"hide-container",!a[10]&&!a[11]),c&1&&ne(e,"height",a[18](a[0])),c&2&&ne(e,"min-height",a[18](a[1])),c&4&&ne(e,"max-height",a[18](a[2])),c&8&&ne(e,"width",typeof a[3]=="number"?`calc(min(${a[3]}px, 100%))`:a[18](a[3])),c&64&&ne(e,"border-style",a[6]),c&24576&&ne(e,"overflow",a[13]?a[14]:"hidden"),c&32768&&ne(e,"flex-grow",a[15]),c&65536&&ne(e,"min-width",`calc(min(${a[16]}px, 100%))`)},i(a){n||(re(s,a),n=!0)},o(a){se(s,a),n=!1},d(a){a&&V(e),s&&s.d(a)}}}function ov(i){let e,t=i[17]&&sv(i);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,[r]){n[17]&&t.p(n,r)},i(n){e||(re(t,n),e=!0)},o(n){se(t,n),e=!1},d(n){t&&t.d(n)}}}function lv(i,e,t){let{$$slots:n={},$$scope:r}=e,{height:s=void 0}=e,{min_height:o=void 0}=e,{max_height:l=void 0}=e,{width:a=void 0}=e,{elem_id:c=""}=e,{elem_classes:h=[]}=e,{variant:u="solid"}=e,{border_mode:f="base"}=e,{padding:d=!0}=e,{type:p="normal"}=e,{test_id:g=void 0}=e,{explicit_call:m=!1}=e,{container:_=!0}=e,{visible:k=!0}=e,{allow_overflow:y=!0}=e,{overflow_behavior:w="auto"}=e,{scale:A=null}=e,{min_width:M=0}=e,R=p==="fieldset"?"fieldset":"div";const P=x=>{if(x!==void 0){if(typeof x=="number")return x+"px";if(typeof x=="string")return x}};return i.$$set=x=>{"height"in x&&t(0,s=x.height),"min_height"in x&&t(1,o=x.min_height),"max_height"in x&&t(2,l=x.max_height),"width"in x&&t(3,a=x.width),"elem_id"in x&&t(4,c=x.elem_id),"elem_classes"in x&&t(5,h=x.elem_classes),"variant"in x&&t(6,u=x.variant),"border_mode"in x&&t(7,f=x.border_mode),"padding"in x&&t(8,d=x.padding),"type"in x&&t(19,p=x.type),"test_id"in x&&t(9,g=x.test_id),"explicit_call"in x&&t(10,m=x.explicit_call),"container"in x&&t(11,_=x.container),"visible"in x&&t(12,k=x.visible),"allow_overflow"in x&&t(13,y=x.allow_overflow),"overflow_behavior"in x&&t(14,w=x.overflow_behavior),"scale"in x&&t(15,A=x.scale),"min_width"in x&&t(16,M=x.min_width),"$$scope"in x&&t(20,r=x.$$scope)},[s,o,l,a,c,h,u,f,d,g,m,_,k,y,w,A,M,R,P,p,r,n]}class av extends Yt{constructor(e){super(),Jt(this,e,lv,ov,vt,{height:0,min_height:1,max_height:2,width:3,elem_id:4,elem_classes:5,variant:6,border_mode:7,padding:8,type:19,test_id:9,explicit_call:10,container:11,visible:12,allow_overflow:13,overflow_behavior:14,scale:15,min_width:16})}get height(){return this.$$.ctx[0]}set height(e){this.$$set({height:e}),O()}get min_height(){return this.$$.ctx[1]}set min_height(e){this.$$set({min_height:e}),O()}get max_height(){return this.$$.ctx[2]}set max_height(e){this.$$set({max_height:e}),O()}get width(){return this.$$.ctx[3]}set width(e){this.$$set({width:e}),O()}get elem_id(){return this.$$.ctx[4]}set elem_id(e){this.$$set({elem_id:e}),O()}get elem_classes(){return this.$$.ctx[5]}set elem_classes(e){this.$$set({elem_classes:e}),O()}get variant(){return this.$$.ctx[6]}set variant(e){this.$$set({variant:e}),O()}get border_mode(){return this.$$.ctx[7]}set border_mode(e){this.$$set({border_mode:e}),O()}get padding(){return this.$$.ctx[8]}set padding(e){this.$$set({padding:e}),O()}get type(){return this.$$.ctx[19]}set type(e){this.$$set({type:e}),O()}get test_id(){return this.$$.ctx[9]}set test_id(e){this.$$set({test_id:e}),O()}get explicit_call(){return this.$$.ctx[10]}set explicit_call(e){this.$$set({explicit_call:e}),O()}get container(){return this.$$.ctx[11]}set container(e){this.$$set({container:e}),O()}get visible(){return this.$$.ctx[12]}set visible(e){this.$$set({visible:e}),O()}get allow_overflow(){return this.$$.ctx[13]}set allow_overflow(e){this.$$set({allow_overflow:e}),O()}get overflow_behavior(){return this.$$.ctx[14]}set overflow_behavior(e){this.$$set({overflow_behavior:e}),O()}get scale(){return this.$$.ctx[15]}set scale(e){this.$$set({scale:e}),O()}get min_width(){return this.$$.ctx[16]}set min_width(e){this.$$set({min_width:e}),O()}}function Sh(i){let e,t;return{c(){e=Y("span"),t=fe(i[1]),C(e,"class","svelte-1h72pol")},m(n,r){j(n,e,r),q(e,t)},p(n,r){r&2&&je(t,n[1])},d(n){n&&V(e)}}}function cv(i){let e,t,n,r,s,o,l,a=i[2]&&Sh(i);var c=i[0];function h(u,f){return{}}return c&&(r=Zc(c,h())),{c(){e=Y("button"),a&&a.c(),t=Se(),n=Y("div"),r&&at(r.$$.fragment),C(n,"class","svelte-1h72pol"),te(n,"small",i[4]==="small"),te(n,"large",i[4]==="large"),te(n,"medium",i[4]==="medium"),e.disabled=i[7],C(e,"aria-label",i[1]),C(e,"aria-haspopup",i[8]),C(e,"title",i[1]),C(e,"class","svelte-1h72pol"),te(e,"pending",i[3]),te(e,"padded",i[5]),te(e,"highlight",i[6]),te(e,"transparent",i[9]),ne(e,"color",!i[7]&&i[11]?i[11]:"var(--block-label-text-color)"),ne(e,"--bg-color",i[7]?"auto":i[10])},m(u,f){j(u,e,f),a&&a.m(e,null),q(e,t),q(e,n),r&&et(r,n,null),s=!0,o||(l=Fs(e,"click",i[13]),o=!0)},p(u,[f]){if(u[2]?a?a.p(u,f):(a=Sh(u),a.c(),a.m(e,t)):a&&(a.d(1),a=null),f&1&&c!==(c=u[0])){if(r){Ht();const d=r;se(d.$$.fragment,1,0,()=>{tt(d,1)}),Ft()}c?(r=Zc(c,h()),at(r.$$.fragment),re(r.$$.fragment,1),et(r,n,null)):r=null}(!s||f&16)&&te(n,"small",u[4]==="small"),(!s||f&16)&&te(n,"large",u[4]==="large"),(!s||f&16)&&te(n,"medium",u[4]==="medium"),(!s||f&128)&&(e.disabled=u[7]),(!s||f&2)&&C(e,"aria-label",u[1]),(!s||f&256)&&C(e,"aria-haspopup",u[8]),(!s||f&2)&&C(e,"title",u[1]),(!s||f&8)&&te(e,"pending",u[3]),(!s||f&32)&&te(e,"padded",u[5]),(!s||f&64)&&te(e,"highlight",u[6]),(!s||f&512)&&te(e,"transparent",u[9]),f&2176&&ne(e,"color",!u[7]&&u[11]?u[11]:"var(--block-label-text-color)"),f&1152&&ne(e,"--bg-color",u[7]?"auto":u[10])},i(u){s||(r&&re(r.$$.fragment,u),s=!0)},o(u){r&&se(r.$$.fragment,u),s=!1},d(u){u&&V(e),a&&a.d(),r&&tt(r),o=!1,l()}}}function hv(i,e,t){let n,{Icon:r}=e,{label:s=""}=e,{show_label:o=!1}=e,{pending:l=!1}=e,{size:a="small"}=e,{padded:c=!0}=e,{highlight:h=!1}=e,{disabled:u=!1}=e,{hasPopup:f=!1}=e,{color:d="var(--block-label-text-color)"}=e,{transparent:p=!1}=e,{background:g="var(--block-background-fill)"}=e;function m(_){Gb.call(this,i,_)}return i.$$set=_=>{"Icon"in _&&t(0,r=_.Icon),"label"in _&&t(1,s=_.label),"show_label"in _&&t(2,o=_.show_label),"pending"in _&&t(3,l=_.pending),"size"in _&&t(4,a=_.size),"padded"in _&&t(5,c=_.padded),"highlight"in _&&t(6,h=_.highlight),"disabled"in _&&t(7,u=_.disabled),"hasPopup"in _&&t(8,f=_.hasPopup),"color"in _&&t(12,d=_.color),"transparent"in _&&t(9,p=_.transparent),"background"in _&&t(10,g=_.background)},i.$$.update=()=>{i.$$.dirty&4160&&t(11,n=h?"var(--color-accent)":d)},[r,s,o,l,a,c,h,u,f,p,g,n,d,m]}class uv extends Yt{constructor(e){super(),Jt(this,e,hv,cv,vt,{Icon:0,label:1,show_label:2,pending:3,size:4,padded:5,highlight:6,disabled:7,hasPopup:8,color:12,transparent:9,background:10})}get Icon(){return this.$$.ctx[0]}set Icon(e){this.$$set({Icon:e}),O()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),O()}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),O()}get pending(){return this.$$.ctx[3]}set pending(e){this.$$set({pending:e}),O()}get size(){return this.$$.ctx[4]}set size(e){this.$$set({size:e}),O()}get padded(){return this.$$.ctx[5]}set padded(e){this.$$set({padded:e}),O()}get highlight(){return this.$$.ctx[6]}set highlight(e){this.$$set({highlight:e}),O()}get disabled(){return this.$$.ctx[7]}set disabled(e){this.$$set({disabled:e}),O()}get hasPopup(){return this.$$.ctx[8]}set hasPopup(e){this.$$set({hasPopup:e}),O()}get color(){return this.$$.ctx[12]}set color(e){this.$$set({color:e}),O()}get transparent(){return this.$$.ctx[9]}set transparent(e){this.$$set({transparent:e}),O()}get background(){return this.$$.ctx[10]}set background(e){this.$$set({background:e}),O()}}function fv(i){let e,t,n,r;return{c(){e=rt("svg"),t=rt("g"),n=rt("path"),r=rt("path"),C(n,"d","M18,6L6.087,17.913"),ne(n,"fill","none"),ne(n,"fill-rule","nonzero"),ne(n,"stroke-width","2px"),C(t,"transform","matrix(1.14096,-0.140958,-0.140958,1.14096,-0.0559523,0.0559523)"),C(r,"d","M4.364,4.364L19.636,19.636"),ne(r,"fill","none"),ne(r,"fill-rule","nonzero"),ne(r,"stroke-width","2px"),C(e,"width","100%"),C(e,"height","100%"),C(e,"viewBox","0 0 24 24"),C(e,"version","1.1"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),C(e,"xml:space","preserve"),C(e,"stroke","currentColor"),ne(e,"fill-rule","evenodd"),ne(e,"clip-rule","evenodd"),ne(e,"stroke-linecap","round"),ne(e,"stroke-linejoin","round")},m(s,o){j(s,e,o),q(e,t),q(t,n),q(e,r)},p:Ee,i:Ee,o:Ee,d(s){s&&V(e)}}}class dv extends Yt{constructor(e){super(),Jt(this,e,null,fv,vt,{})}}const lM=["red","green","blue","yellow","purple","teal","orange","cyan","lime","pink"],pv=[{color:"red",primary:600,secondary:100},{color:"green",primary:600,secondary:100},{color:"blue",primary:600,secondary:100},{color:"yellow",primary:500,secondary:100},{color:"purple",primary:600,secondary:100},{color:"teal",primary:600,secondary:100},{color:"orange",primary:600,secondary:100},{color:"cyan",primary:600,secondary:100},{color:"lime",primary:500,secondary:100},{color:"pink",primary:600,secondary:100}],Eh={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"}},aM=pv.reduce((i,{color:e,primary:t,secondary:n})=>({...i,[e]:{primary:Eh[e][t],secondary:Eh[e][n]}}),{});var Ah=function(i,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(i,t):r?r.value=t:e.set(i,t),t},Xo=function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},Ds,pr;class Jo extends Error{constructor(e){super(e),this.name="ShareError"}}async function cM(i,e){if(window.__gradio_space__==null)throw new Jo("Must be on Spaces to share.");let t,n,r;{let a;if(typeof i=="object"&&i.url)a=i.url;else if(typeof i=="string")a=i;else throw new Error("Invalid data format for URL type");const c=await fetch(a);t=await c.blob(),n=c.headers.get("content-type")||"",r=c.headers.get("content-disposition")||""}const s=new File([t],r,{type:n}),o=await fetch("https://huggingface.co/uploads",{method:"POST",body:s,headers:{"Content-Type":s.type,"X-Requested-With":"XMLHttpRequest"}});if(!o.ok){if(o.headers.get("content-type")?.includes("application/json")){const a=await o.json();throw new Jo(`Upload failed: ${a.error}`)}throw new Jo("Upload failed.")}return await o.text()}function hM(i){i.addEventListener("click",e);async function e(t){const n=t.composedPath(),[r]=n.filter(s=>s?.tagName==="BUTTON"&&s.classList.contains("copy_code_button"));if(r){let a=function(c){c.style.opacity="1",setTimeout(()=>{c.style.opacity="0"},2e3)};t.stopImmediatePropagation();const s=r.parentElement.innerText.trim(),o=Array.from(r.children)[1];await mv(s)&&a(o)}}return{destroy(){i.removeEventListener("click",e)}}}async function mv(i){let e=!1;if("clipboard"in navigator)await navigator.clipboard.writeText(i),e=!0;else{const t=document.createElement("textarea");t.value=i,t.style.position="absolute",t.style.left="-999999px",document.body.prepend(t),t.select();try{document.execCommand("copy"),e=!0}catch(n){console.error(n),e=!1}finally{t.remove()}}return e}const uM=i=>{const e=Math.floor(i/3600),t=Math.floor(i%3600/60),n=Math.round(i)%60,r=`${t<10?"0":""}${t}`,s=`${n<10?"0":""}${n}`;return e>0?`${e}:${r}:${s}`:`${t}:${s}`},gv=typeof window<"u";class fM{constructor(e,t,n,r,s,o,l,a=u=>u,c,h){Ds.set(this,void 0),pr.set(this,void 0),this.load_component=_v.bind(this),Ah(this,Ds,e,"f"),this.theme=n,this.version=r,Ah(this,pr,t,"f"),this.max_file_size=l,this.i18n=a,this.root=s,this.autoscroll=o,this.client=c,this._load_component=h}dispatch(e,t){if(!gv||!Xo(this,pr,"f"))return;const n=new CustomEvent("gradio",{bubbles:!0,detail:{data:t,id:Xo(this,Ds,"f"),event:e}});Xo(this,pr,"f").dispatchEvent(n)}}Ds=new WeakMap,pr=new WeakMap;function _v(i,e="component"){return this._load_component({name:i,api_url:this.client.config?.root,variant:e})}const dM=i=>typeof i=="number"?i+"px":i,bv=i=>({}),Th=i=>({}),yv=i=>({}),Ch=i=>({});function Oh(i,e,t){const n=i.slice();return n[40]=e[t],n[42]=t,n}function Mh(i,e,t){const n=i.slice();return n[40]=e[t],n}function wv(i){let e,t,n,r,s=i[1]("common.error")+"",o,l,a;t=new uv({props:{Icon:dv,label:i[1]("common.clear"),disabled:!1}}),t.$on("click",i[32]);const c=i[30].error,h=Wr(c,i,i[29],Th);return{c(){e=Y("div"),at(t.$$.fragment),n=Se(),r=Y("span"),o=fe(s),l=Se(),h&&h.c(),C(e,"class","clear-status svelte-ls20lj"),C(r,"class","error svelte-ls20lj")},m(u,f){j(u,e,f),et(t,e,null),j(u,n,f),j(u,r,f),q(r,o),j(u,l,f),h&&h.m(u,f),a=!0},p(u,f){const d={};f[0]&2&&(d.label=u[1]("common.clear")),t.$set(d),(!a||f[0]&2)&&s!==(s=u[1]("common.error")+"")&&je(o,s),h&&h.p&&(!a||f[0]&536870912)&&qr(h,c,u,u[29],a?Gr(c,u[29],f,bv):$r(u[29]),Th)},i(u){a||(re(t.$$.fragment,u),re(h,u),a=!0)},o(u){se(t.$$.fragment,u),se(h,u),a=!1},d(u){u&&(V(e),V(n),V(r),V(l)),tt(t),h&&h.d(u)}}}function vv(i){let e,t,n,r,s,o,l,a,c,h=i[8]==="default"&&i[18]&&i[6]==="full"&&Dh(i);function u(y,w){if(y[7])return Sv;if(y[2]!==null&&y[3]!==void 0&&y[2]>=0)return xv;if(y[2]===0)return kv}let f=u(i),d=f&&f(i),p=i[5]&&Rh(i);const g=[Cv,Tv],m=[];function _(y,w){return y[15]!=null?0:y[6]==="full"?1:-1}~(s=_(i))&&(o=m[s]=g[s](i));let k=!i[5]&&jh(i);return{c(){h&&h.c(),e=Se(),t=Y("div"),d&&d.c(),n=Se(),p&&p.c(),r=Se(),o&&o.c(),l=Se(),k&&k.c(),a=Mt(),C(t,"class","progress-text svelte-ls20lj"),te(t,"meta-text-center",i[8]==="center"),te(t,"meta-text",i[8]==="default")},m(y,w){h&&h.m(y,w),j(y,e,w),j(y,t,w),d&&d.m(t,null),q(t,n),p&&p.m(t,null),j(y,r,w),~s&&m[s].m(y,w),j(y,l,w),k&&k.m(y,w),j(y,a,w),c=!0},p(y,w){y[8]==="default"&&y[18]&&y[6]==="full"?h?h.p(y,w):(h=Dh(y),h.c(),h.m(e.parentNode,e)):h&&(h.d(1),h=null),f===(f=u(y))&&d?d.p(y,w):(d&&d.d(1),d=f&&f(y),d&&(d.c(),d.m(t,n))),y[5]?p?p.p(y,w):(p=Rh(y),p.c(),p.m(t,null)):p&&(p.d(1),p=null),(!c||w[0]&256)&&te(t,"meta-text-center",y[8]==="center"),(!c||w[0]&256)&&te(t,"meta-text",y[8]==="default");let A=s;s=_(y),s===A?~s&&m[s].p(y,w):(o&&(Ht(),se(m[A],1,1,()=>{m[A]=null}),Ft()),~s?(o=m[s],o?o.p(y,w):(o=m[s]=g[s](y),o.c()),re(o,1),o.m(l.parentNode,l)):o=null),y[5]?k&&(Ht(),se(k,1,1,()=>{k=null}),Ft()):k?(k.p(y,w),w[0]&32&&re(k,1)):(k=jh(y),k.c(),re(k,1),k.m(a.parentNode,a))},i(y){c||(re(o),re(k),c=!0)},o(y){se(o),se(k),c=!1},d(y){y&&(V(e),V(t),V(r),V(l),V(a)),h&&h.d(y),d&&d.d(),p&&p.d(),~s&&m[s].d(y),k&&k.d(y)}}}function Dh(i){let e,t=`translateX(${(i[17]||0)*100-100}%)`;return{c(){e=Y("div"),C(e,"class","eta-bar svelte-ls20lj"),ne(e,"transform",t)},m(n,r){j(n,e,r)},p(n,r){r[0]&131072&&t!==(t=`translateX(${(n[17]||0)*100-100}%)`)&&ne(e,"transform",t)},d(n){n&&V(e)}}}function kv(i){let e;return{c(){e=fe("processing |")},m(t,n){j(t,e,n)},p:Ee,d(t){t&&V(e)}}}function xv(i){let e,t=i[2]+1+"",n,r,s,o;return{c(){e=fe("queue: "),n=fe(t),r=fe("/"),s=fe(i[3]),o=fe(" |")},m(l,a){j(l,e,a),j(l,n,a),j(l,r,a),j(l,s,a),j(l,o,a)},p(l,a){a[0]&4&&t!==(t=l[2]+1+"")&&je(n,t),a[0]&8&&je(s,l[3])},d(l){l&&(V(e),V(n),V(r),V(s),V(o))}}}function Sv(i){let e,t=Ws(i[7]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Lh(Mh(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Mt()},m(r,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,s);j(r,e,s)},p(r,s){if(s[0]&128){t=Ws(r[7]);let o;for(o=0;o<t.length;o+=1){const l=Mh(r,t,o);n[o]?n[o].p(l,s):(n[o]=Lh(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(r){r&&V(e),cd(n,r)}}}function Ph(i){let e,t=i[40].unit+"",n,r,s=" ",o;function l(h,u){return h[40].length!=null?Av:Ev}let a=l(i),c=a(i);return{c(){c.c(),e=Se(),n=fe(t),r=fe(" | "),o=fe(s)},m(h,u){c.m(h,u),j(h,e,u),j(h,n,u),j(h,r,u),j(h,o,u)},p(h,u){a===(a=l(h))&&c?c.p(h,u):(c.d(1),c=a(h),c&&(c.c(),c.m(e.parentNode,e))),u[0]&128&&t!==(t=h[40].unit+"")&&je(n,t)},d(h){h&&(V(e),V(n),V(r),V(o)),c.d(h)}}}function Ev(i){let e=kn(i[40].index||0)+"",t;return{c(){t=fe(e)},m(n,r){j(n,t,r)},p(n,r){r[0]&128&&e!==(e=kn(n[40].index||0)+"")&&je(t,e)},d(n){n&&V(t)}}}function Av(i){let e=kn(i[40].index||0)+"",t,n,r=kn(i[40].length)+"",s;return{c(){t=fe(e),n=fe("/"),s=fe(r)},m(o,l){j(o,t,l),j(o,n,l),j(o,s,l)},p(o,l){l[0]&128&&e!==(e=kn(o[40].index||0)+"")&&je(t,e),l[0]&128&&r!==(r=kn(o[40].length)+"")&&je(s,r)},d(o){o&&(V(t),V(n),V(s))}}}function Lh(i){let e,t=i[40].index!=null&&Ph(i);return{c(){t&&t.c(),e=Mt()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,r){n[40].index!=null?t?t.p(n,r):(t=Ph(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&V(e),t&&t.d(n)}}}function Rh(i){let e,t=i[0]?`/${i[19]}`:"",n,r;return{c(){e=fe(i[20]),n=fe(t),r=fe("s")},m(s,o){j(s,e,o),j(s,n,o),j(s,r,o)},p(s,o){o[0]&1048576&&je(e,s[20]),o[0]&524289&&t!==(t=s[0]?`/${s[19]}`:"")&&je(n,t)},d(s){s&&(V(e),V(n),V(r))}}}function Tv(i){let e,t;return e=new rv({props:{margin:i[8]==="default"}}),{c(){at(e.$$.fragment)},m(n,r){et(e,n,r),t=!0},p(n,r){const s={};r[0]&256&&(s.margin=n[8]==="default"),e.$set(s)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){tt(e,n)}}}function Cv(i){let e,t,n,r,s,o=`${i[15]*100}%`,l=i[7]!=null&&Ih(i);return{c(){e=Y("div"),t=Y("div"),l&&l.c(),n=Se(),r=Y("div"),s=Y("div"),C(t,"class","progress-level-inner svelte-ls20lj"),C(s,"class","progress-bar svelte-ls20lj"),ne(s,"width",o),C(r,"class","progress-bar-wrap svelte-ls20lj"),C(e,"class","progress-level svelte-ls20lj")},m(a,c){j(a,e,c),q(e,t),l&&l.m(t,null),q(e,n),q(e,r),q(r,s),i[31](s)},p(a,c){a[7]!=null?l?l.p(a,c):(l=Ih(a),l.c(),l.m(t,null)):l&&(l.d(1),l=null),c[0]&32768&&o!==(o=`${a[15]*100}%`)&&ne(s,"width",o)},i:Ee,o:Ee,d(a){a&&V(e),l&&l.d(),i[31](null)}}}function Ih(i){let e,t=Ws(i[7]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Vh(Oh(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Mt()},m(r,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,s);j(r,e,s)},p(r,s){if(s[0]&16512){t=Ws(r[7]);let o;for(o=0;o<t.length;o+=1){const l=Oh(r,t,o);n[o]?n[o].p(l,s):(n[o]=Vh(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(r){r&&V(e),cd(n,r)}}}function Nh(i){let e,t,n,r,s=i[42]!==0&&Ov(),o=i[40].desc!=null&&Bh(i),l=i[40].desc!=null&&i[14]&&i[14][i[42]]!=null&&Hh(),a=i[14]!=null&&Fh(i);return{c(){s&&s.c(),e=Se(),o&&o.c(),t=Se(),l&&l.c(),n=Se(),a&&a.c(),r=Mt()},m(c,h){s&&s.m(c,h),j(c,e,h),o&&o.m(c,h),j(c,t,h),l&&l.m(c,h),j(c,n,h),a&&a.m(c,h),j(c,r,h)},p(c,h){c[40].desc!=null?o?o.p(c,h):(o=Bh(c),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),c[40].desc!=null&&c[14]&&c[14][c[42]]!=null?l||(l=Hh(),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),c[14]!=null?a?a.p(c,h):(a=Fh(c),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(c){c&&(V(e),V(t),V(n),V(r)),s&&s.d(c),o&&o.d(c),l&&l.d(c),a&&a.d(c)}}}function Ov(i){let e;return{c(){e=fe(" /")},m(t,n){j(t,e,n)},d(t){t&&V(e)}}}function Bh(i){let e=i[40].desc+"",t;return{c(){t=fe(e)},m(n,r){j(n,t,r)},p(n,r){r[0]&128&&e!==(e=n[40].desc+"")&&je(t,e)},d(n){n&&V(t)}}}function Hh(i){let e;return{c(){e=fe("-")},m(t,n){j(t,e,n)},d(t){t&&V(e)}}}function Fh(i){let e=(100*(i[14][i[42]]||0)).toFixed(1)+"",t,n;return{c(){t=fe(e),n=fe("%")},m(r,s){j(r,t,s),j(r,n,s)},p(r,s){s[0]&16384&&e!==(e=(100*(r[14][r[42]]||0)).toFixed(1)+"")&&je(t,e)},d(r){r&&(V(t),V(n))}}}function Vh(i){let e,t=(i[40].desc!=null||i[14]&&i[14][i[42]]!=null)&&Nh(i);return{c(){t&&t.c(),e=Mt()},m(n,r){t&&t.m(n,r),j(n,e,r)},p(n,r){n[40].desc!=null||n[14]&&n[14][n[42]]!=null?t?t.p(n,r):(t=Nh(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&V(e),t&&t.d(n)}}}function jh(i){let e,t,n,r;const s=i[30]["additional-loading-text"],o=Wr(s,i,i[29],Ch);return{c(){e=Y("p"),t=fe(i[9]),n=Se(),o&&o.c(),C(e,"class","loading svelte-ls20lj")},m(l,a){j(l,e,a),q(e,t),j(l,n,a),o&&o.m(l,a),r=!0},p(l,a){(!r||a[0]&512)&&je(t,l[9]),o&&o.p&&(!r||a[0]&536870912)&&qr(o,s,l,l[29],r?Gr(s,l[29],a,yv):$r(l[29]),Ch)},i(l){r||(re(o,l),r=!0)},o(l){se(o,l),r=!1},d(l){l&&(V(e),V(n)),o&&o.d(l)}}}function Mv(i){let e,t,n,r,s;const o=[vv,wv],l=[];function a(c,h){return c[4]==="pending"?0:c[4]==="error"?1:-1}return~(t=a(i))&&(n=l[t]=o[t](i)),{c(){e=Y("div"),n&&n.c(),C(e,"class",r="wrap "+i[8]+" "+i[6]+" svelte-ls20lj"),te(e,"hide",!i[4]||i[4]==="complete"||i[6]==="hidden"||i[4]=="streaming"),te(e,"translucent",i[8]==="center"&&(i[4]==="pending"||i[4]==="error")||i[11]||i[6]==="minimal"),te(e,"generating",i[4]==="generating"&&i[6]==="full"),te(e,"border",i[12]),ne(e,"position",i[10]?"absolute":"static"),ne(e,"padding",i[10]?"0":"var(--size-8) 0")},m(c,h){j(c,e,h),~t&&l[t].m(e,null),i[33](e),s=!0},p(c,h){let u=t;t=a(c),t===u?~t&&l[t].p(c,h):(n&&(Ht(),se(l[u],1,1,()=>{l[u]=null}),Ft()),~t?(n=l[t],n?n.p(c,h):(n=l[t]=o[t](c),n.c()),re(n,1),n.m(e,null)):n=null),(!s||h[0]&320&&r!==(r="wrap "+c[8]+" "+c[6]+" svelte-ls20lj"))&&C(e,"class",r),(!s||h[0]&336)&&te(e,"hide",!c[4]||c[4]==="complete"||c[6]==="hidden"||c[4]=="streaming"),(!s||h[0]&2384)&&te(e,"translucent",c[8]==="center"&&(c[4]==="pending"||c[4]==="error")||c[11]||c[6]==="minimal"),(!s||h[0]&336)&&te(e,"generating",c[4]==="generating"&&c[6]==="full"),(!s||h[0]&4416)&&te(e,"border",c[12]),h[0]&1024&&ne(e,"position",c[10]?"absolute":"static"),h[0]&1024&&ne(e,"padding",c[10]?"0":"var(--size-8) 0")},i(c){s||(re(n),s=!0)},o(c){se(n),s=!1},d(c){c&&V(e),~t&&l[t].d(),i[33](null)}}}let ls=[],Yo=!1;const Dv=typeof window<"u",rg=Dv?window.requestAnimationFrame:i=>{};async function Pv(i,e=!0){if(!(window.__gradio_mode__==="website"||window.__gradio_mode__!=="app"&&e!==!0)){if(ls.push(i),!Yo)Yo=!0;else return;await qb(),rg(()=>{let t=[0,0];for(let n=0;n<ls.length;n++){const s=ls[n].getBoundingClientRect();(n===0||s.top+window.scrollY<=t[0])&&(t[0]=s.top+window.scrollY,t[1]=n)}window.scrollTo({top:t[0]-20,behavior:"smooth"}),Yo=!1,ls=[]})}}function Lv(i,e,t){let n,{$$slots:r={},$$scope:s}=e;const o=mo();let{i18n:l}=e,{eta:a=null}=e,{queue_position:c}=e,{queue_size:h}=e,{status:u}=e,{scroll_to_output:f=!1}=e,{timer:d=!0}=e,{show_progress:p="full"}=e,{message:g=null}=e,{progress:m=null}=e,{variant:_="default"}=e,{loading_text:k="Loading..."}=e,{absolute:y=!0}=e,{translucent:w=!1}=e,{border:A=!1}=e,{autoscroll:M}=e,R,P=!1,x=0,E=0,T=null,D=null,B=0,ee=null,oe,G=null,he=!0;const H=()=>{t(0,a=t(27,T=t(19,N=null))),t(25,x=performance.now()),t(26,E=0),P=!0,S()};function S(){rg(()=>{t(26,E=(performance.now()-x)/1e3),P&&S()})}function ie(){t(26,E=0),t(0,a=t(27,T=t(19,N=null))),P&&(P=!1)}$a(()=>{P&&ie()});let N=null;function Re(K){wt[K?"unshift":"push"](()=>{G=K,t(16,G),t(7,m),t(14,ee),t(15,oe)})}const Z=()=>{o("clear_status")};function Ae(K){wt[K?"unshift":"push"](()=>{R=K,t(13,R)})}return i.$$set=K=>{"i18n"in K&&t(1,l=K.i18n),"eta"in K&&t(0,a=K.eta),"queue_position"in K&&t(2,c=K.queue_position),"queue_size"in K&&t(3,h=K.queue_size),"status"in K&&t(4,u=K.status),"scroll_to_output"in K&&t(22,f=K.scroll_to_output),"timer"in K&&t(5,d=K.timer),"show_progress"in K&&t(6,p=K.show_progress),"message"in K&&t(23,g=K.message),"progress"in K&&t(7,m=K.progress),"variant"in K&&t(8,_=K.variant),"loading_text"in K&&t(9,k=K.loading_text),"absolute"in K&&t(10,y=K.absolute),"translucent"in K&&t(11,w=K.translucent),"border"in K&&t(12,A=K.border),"autoscroll"in K&&t(24,M=K.autoscroll),"$$scope"in K&&t(29,s=K.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&436207617&&(a===null&&t(0,a=T),a!=null&&T!==a&&(t(28,D=(performance.now()-x)/1e3+a),t(19,N=D.toFixed(1)),t(27,T=a))),i.$$.dirty[0]&335544320&&t(17,B=D===null||D<=0||!E?null:Math.min(E/D,1)),i.$$.dirty[0]&128&&m!=null&&t(18,he=!1),i.$$.dirty[0]&114816&&(m!=null?t(14,ee=m.map(K=>{if(K.index!=null&&K.length!=null)return K.index/K.length;if(K.progress!=null)return K.progress})):t(14,ee=null),ee?(t(15,oe=ee[ee.length-1]),G&&(oe===0?t(16,G.style.transition="0",G):t(16,G.style.transition="150ms",G))):t(15,oe=void 0)),i.$$.dirty[0]&16&&(u==="pending"?H():ie()),i.$$.dirty[0]&20979728&&R&&f&&(u==="pending"||u==="complete")&&Pv(R,M),i.$$.dirty[0]&8388624,i.$$.dirty[0]&67108864&&t(20,n=E.toFixed(1))},[a,l,c,h,u,d,p,m,_,k,y,w,A,R,ee,oe,G,B,he,N,n,o,f,g,M,x,E,T,D,s,r,Re,Z,Ae]}class sg extends Yt{constructor(e){super(),Jt(this,e,Lv,Mv,vt,{i18n:1,eta:0,queue_position:2,queue_size:3,status:4,scroll_to_output:22,timer:5,show_progress:6,message:23,progress:7,variant:8,loading_text:9,absolute:10,translucent:11,border:12,autoscroll:24},null,[-1,-1])}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),O()}get eta(){return this.$$.ctx[0]}set eta(e){this.$$set({eta:e}),O()}get queue_position(){return this.$$.ctx[2]}set queue_position(e){this.$$set({queue_position:e}),O()}get queue_size(){return this.$$.ctx[3]}set queue_size(e){this.$$set({queue_size:e}),O()}get status(){return this.$$.ctx[4]}set status(e){this.$$set({status:e}),O()}get scroll_to_output(){return this.$$.ctx[22]}set scroll_to_output(e){this.$$set({scroll_to_output:e}),O()}get timer(){return this.$$.ctx[5]}set timer(e){this.$$set({timer:e}),O()}get show_progress(){return this.$$.ctx[6]}set show_progress(e){this.$$set({show_progress:e}),O()}get message(){return this.$$.ctx[23]}set message(e){this.$$set({message:e}),O()}get progress(){return this.$$.ctx[7]}set progress(e){this.$$set({progress:e}),O()}get variant(){return this.$$.ctx[8]}set variant(e){this.$$set({variant:e}),O()}get loading_text(){return this.$$.ctx[9]}set loading_text(e){this.$$set({loading_text:e}),O()}get absolute(){return this.$$.ctx[10]}set absolute(e){this.$$set({absolute:e}),O()}get translucent(){return this.$$.ctx[11]}set translucent(e){this.$$set({translucent:e}),O()}get border(){return this.$$.ctx[12]}set border(e){this.$$set({border:e}),O()}get autoscroll(){return this.$$.ctx[24]}set autoscroll(e){this.$$set({autoscroll:e}),O()}}/*! @license DOMPurify 3.0.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.3/LICENSE */const{entries:og,setPrototypeOf:Uh,isFrozen:Rv,getPrototypeOf:Iv,getOwnPropertyDescriptor:Nv}=Object;let{freeze:mt,seal:Xt,create:Bv}=Object,{apply:Kl,construct:Xl}=typeof Reflect<"u"&&Reflect;Kl||(Kl=function(e,t,n){return e.apply(t,n)});mt||(mt=function(e){return e});Xt||(Xt=function(e){return e});Xl||(Xl=function(e,t){return new e(...t)});const Hv=Vt(Array.prototype.forEach),zh=Vt(Array.prototype.pop),ir=Vt(Array.prototype.push),Ps=Vt(String.prototype.toLowerCase),Zo=Vt(String.prototype.toString),Fv=Vt(String.prototype.match),qt=Vt(String.prototype.replace),Vv=Vt(String.prototype.indexOf),jv=Vt(String.prototype.trim),Et=Vt(RegExp.prototype.test),nr=Uv(TypeError);function Vt(i){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Kl(i,e,n)}}function Uv(i){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Xl(i,t)}}function ce(i,e,t){var n;t=(n=t)!==null&&n!==void 0?n:Ps,Uh&&Uh(i,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const o=t(s);o!==s&&(Rv(e)||(e[r]=o),s=o)}i[s]=!0}return i}function bn(i){const e=Bv(null);for(const[t,n]of og(i))e[t]=n;return e}function as(i,e){for(;i!==null;){const n=Nv(i,e);if(n){if(n.get)return Vt(n.get);if(typeof n.value=="function")return Vt(n.value)}i=Iv(i)}function t(n){return console.warn("fallback value for",n),null}return t}const Wh=mt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Qo=mt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),el=mt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),zv=mt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),tl=mt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Wv=mt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Gh=mt(["#text"]),qh=mt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),il=mt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$h=mt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),cs=mt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Gv=Xt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),qv=Xt(/<%[\w\W]*|[\w\W]*%>/gm),$v=Xt(/\${[\w\W]*}/gm),Kv=Xt(/^data-[\-\w.\u00B7-\uFFFF]/),Xv=Xt(/^aria-[\-\w]+$/),lg=Xt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Jv=Xt(/^(?:\w+script|data):/i),Yv=Xt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ag=Xt(/^html$/i);var Kh=Object.freeze({__proto__:null,MUSTACHE_EXPR:Gv,ERB_EXPR:qv,TMPLIT_EXPR:$v,DATA_ATTR:Kv,ARIA_ATTR:Xv,IS_ALLOWED_URI:lg,IS_SCRIPT_OR_DATA:Jv,ATTR_WHITESPACE:Yv,DOCTYPE_NAME:ag});const Zv=()=>typeof window>"u"?null:window,Qv=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function cg(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zv();const e=J=>cg(J);if(e.version="3.0.3",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;const t=i.document,n=t.currentScript;let{document:r}=i;const{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:a,NodeFilter:c,NamedNodeMap:h=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:u,DOMParser:f,trustedTypes:d}=i,p=a.prototype,g=as(p,"cloneNode"),m=as(p,"nextSibling"),_=as(p,"childNodes"),k=as(p,"parentNode");if(typeof o=="function"){const J=r.createElement("template");J.content&&J.content.ownerDocument&&(r=J.content.ownerDocument)}let y,w="";const{implementation:A,createNodeIterator:M,createDocumentFragment:R,getElementsByTagName:P}=r,{importNode:x}=t;let E={};e.isSupported=typeof og=="function"&&typeof k=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:T,ERB_EXPR:D,TMPLIT_EXPR:B,DATA_ATTR:ee,ARIA_ATTR:oe,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:he}=Kh;let{IS_ALLOWED_URI:H}=Kh,S=null;const ie=ce({},[...Wh,...Qo,...el,...tl,...Gh]);let N=null;const Re=ce({},[...qh,...il,...$h,...cs]);let Z=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ae=null,K=null,xt=!0,Vi=!0,un=!1,fn=!0,Ut=!1,nt=!1,St=!1,zt=!1,Wt=!1,me=!1,Ge=!1,Gt=!0,z=!1;const le="user-content-";let ye=!0,Te=!1,Fe={},Ue=null;const Xe=ce({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let _t=null;const ut=ce({},["audio","video","img","source","image","track"]);let dn=null;const Zn=ce({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ki="http://www.w3.org/1998/Math/MathML",bt="http://www.w3.org/2000/svg",Ce="http://www.w3.org/1999/xhtml";let Je=Ce,Qn=!1,Bo=null;const ub=ce({},[ki,bt,Ce],Zo);let ji;const fb=["application/xhtml+xml","text/html"],db="text/html";let qe,pn=null;const pb=r.createElement("form"),Bc=function(v){return v instanceof RegExp||v instanceof Function},Ho=function(v){if(!(pn&&pn===v)){if((!v||typeof v!="object")&&(v={}),v=bn(v),ji=fb.indexOf(v.PARSER_MEDIA_TYPE)===-1?ji=db:ji=v.PARSER_MEDIA_TYPE,qe=ji==="application/xhtml+xml"?Zo:Ps,S="ALLOWED_TAGS"in v?ce({},v.ALLOWED_TAGS,qe):ie,N="ALLOWED_ATTR"in v?ce({},v.ALLOWED_ATTR,qe):Re,Bo="ALLOWED_NAMESPACES"in v?ce({},v.ALLOWED_NAMESPACES,Zo):ub,dn="ADD_URI_SAFE_ATTR"in v?ce(bn(Zn),v.ADD_URI_SAFE_ATTR,qe):Zn,_t="ADD_DATA_URI_TAGS"in v?ce(bn(ut),v.ADD_DATA_URI_TAGS,qe):ut,Ue="FORBID_CONTENTS"in v?ce({},v.FORBID_CONTENTS,qe):Xe,Ae="FORBID_TAGS"in v?ce({},v.FORBID_TAGS,qe):{},K="FORBID_ATTR"in v?ce({},v.FORBID_ATTR,qe):{},Fe="USE_PROFILES"in v?v.USE_PROFILES:!1,xt=v.ALLOW_ARIA_ATTR!==!1,Vi=v.ALLOW_DATA_ATTR!==!1,un=v.ALLOW_UNKNOWN_PROTOCOLS||!1,fn=v.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ut=v.SAFE_FOR_TEMPLATES||!1,nt=v.WHOLE_DOCUMENT||!1,Wt=v.RETURN_DOM||!1,me=v.RETURN_DOM_FRAGMENT||!1,Ge=v.RETURN_TRUSTED_TYPE||!1,zt=v.FORCE_BODY||!1,Gt=v.SANITIZE_DOM!==!1,z=v.SANITIZE_NAMED_PROPS||!1,ye=v.KEEP_CONTENT!==!1,Te=v.IN_PLACE||!1,H=v.ALLOWED_URI_REGEXP||lg,Je=v.NAMESPACE||Ce,Z=v.CUSTOM_ELEMENT_HANDLING||{},v.CUSTOM_ELEMENT_HANDLING&&Bc(v.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Z.tagNameCheck=v.CUSTOM_ELEMENT_HANDLING.tagNameCheck),v.CUSTOM_ELEMENT_HANDLING&&Bc(v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Z.attributeNameCheck=v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),v.CUSTOM_ELEMENT_HANDLING&&typeof v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Z.allowCustomizedBuiltInElements=v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ut&&(Vi=!1),me&&(Wt=!0),Fe&&(S=ce({},[...Gh]),N=[],Fe.html===!0&&(ce(S,Wh),ce(N,qh)),Fe.svg===!0&&(ce(S,Qo),ce(N,il),ce(N,cs)),Fe.svgFilters===!0&&(ce(S,el),ce(N,il),ce(N,cs)),Fe.mathMl===!0&&(ce(S,tl),ce(N,$h),ce(N,cs))),v.ADD_TAGS&&(S===ie&&(S=bn(S)),ce(S,v.ADD_TAGS,qe)),v.ADD_ATTR&&(N===Re&&(N=bn(N)),ce(N,v.ADD_ATTR,qe)),v.ADD_URI_SAFE_ATTR&&ce(dn,v.ADD_URI_SAFE_ATTR,qe),v.FORBID_CONTENTS&&(Ue===Xe&&(Ue=bn(Ue)),ce(Ue,v.FORBID_CONTENTS,qe)),ye&&(S["#text"]=!0),nt&&ce(S,["html","head","body"]),S.table&&(ce(S,["tbody"]),delete Ae.tbody),v.TRUSTED_TYPES_POLICY){if(typeof v.TRUSTED_TYPES_POLICY.createHTML!="function")throw nr('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof v.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw nr('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=v.TRUSTED_TYPES_POLICY,w=y.createHTML("")}else y===void 0&&(y=Qv(d,n)),y!==null&&typeof w=="string"&&(w=y.createHTML(""));mt&&mt(v),pn=v}},Hc=ce({},["mi","mo","mn","ms","mtext"]),Fc=ce({},["foreignobject","desc","title","annotation-xml"]),mb=ce({},["title","style","font","a","script"]),is=ce({},Qo);ce(is,el),ce(is,zv);const Fo=ce({},tl);ce(Fo,Wv);const gb=function(v){let F=k(v);(!F||!F.tagName)&&(F={namespaceURI:Je,tagName:"template"});const W=Ps(v.tagName),ke=Ps(F.tagName);return Bo[v.namespaceURI]?v.namespaceURI===bt?F.namespaceURI===Ce?W==="svg":F.namespaceURI===ki?W==="svg"&&(ke==="annotation-xml"||Hc[ke]):!!is[W]:v.namespaceURI===ki?F.namespaceURI===Ce?W==="math":F.namespaceURI===bt?W==="math"&&Fc[ke]:!!Fo[W]:v.namespaceURI===Ce?F.namespaceURI===bt&&!Fc[ke]||F.namespaceURI===ki&&!Hc[ke]?!1:!Fo[W]&&(mb[W]||!is[W]):!!(ji==="application/xhtml+xml"&&Bo[v.namespaceURI]):!1},Ui=function(v){ir(e.removed,{element:v});try{v.parentNode.removeChild(v)}catch{v.remove()}},Vo=function(v,F){try{ir(e.removed,{attribute:F.getAttributeNode(v),from:F})}catch{ir(e.removed,{attribute:null,from:F})}if(F.removeAttribute(v),v==="is"&&!N[v])if(Wt||me)try{Ui(F)}catch{}else try{F.setAttribute(v,"")}catch{}},Vc=function(v){let F,W;if(zt)v="<remove></remove>"+v;else{const Dt=Fv(v,/^[\r\n\t ]+/);W=Dt&&Dt[0]}ji==="application/xhtml+xml"&&Je===Ce&&(v='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+v+"</body></html>");const ke=y?y.createHTML(v):v;if(Je===Ce)try{F=new f().parseFromString(ke,ji)}catch{}if(!F||!F.documentElement){F=A.createDocument(Je,"template",null);try{F.documentElement.innerHTML=Qn?w:ke}catch{}}const $e=F.body||F.documentElement;return v&&W&&$e.insertBefore(r.createTextNode(W),$e.childNodes[0]||null),Je===Ce?P.call(F,nt?"html":"body")[0]:nt?F.documentElement:$e},jc=function(v){return M.call(v.ownerDocument||v,v,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},_b=function(v){return v instanceof u&&(typeof v.nodeName!="string"||typeof v.textContent!="string"||typeof v.removeChild!="function"||!(v.attributes instanceof h)||typeof v.removeAttribute!="function"||typeof v.setAttribute!="function"||typeof v.namespaceURI!="string"||typeof v.insertBefore!="function"||typeof v.hasChildNodes!="function")},ns=function(v){return typeof l=="object"?v instanceof l:v&&typeof v=="object"&&typeof v.nodeType=="number"&&typeof v.nodeName=="string"},bi=function(v,F,W){E[v]&&Hv(E[v],ke=>{ke.call(e,F,W,pn)})},Uc=function(v){let F;if(bi("beforeSanitizeElements",v,null),_b(v))return Ui(v),!0;const W=qe(v.nodeName);if(bi("uponSanitizeElement",v,{tagName:W,allowedTags:S}),v.hasChildNodes()&&!ns(v.firstElementChild)&&(!ns(v.content)||!ns(v.content.firstElementChild))&&Et(/<[/\w]/g,v.innerHTML)&&Et(/<[/\w]/g,v.textContent))return Ui(v),!0;if(!S[W]||Ae[W]){if(!Ae[W]&&Wc(W)&&(Z.tagNameCheck instanceof RegExp&&Et(Z.tagNameCheck,W)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(W)))return!1;if(ye&&!Ue[W]){const ke=k(v)||v.parentNode,$e=_(v)||v.childNodes;if($e&&ke){const Dt=$e.length;for(let Ie=Dt-1;Ie>=0;--Ie)ke.insertBefore(g($e[Ie],!0),m(v))}}return Ui(v),!0}return v instanceof a&&!gb(v)||(W==="noscript"||W==="noembed")&&Et(/<\/no(script|embed)/i,v.innerHTML)?(Ui(v),!0):(Ut&&v.nodeType===3&&(F=v.textContent,F=qt(F,T," "),F=qt(F,D," "),F=qt(F,B," "),v.textContent!==F&&(ir(e.removed,{element:v.cloneNode()}),v.textContent=F)),bi("afterSanitizeElements",v,null),!1)},zc=function(v,F,W){if(Gt&&(F==="id"||F==="name")&&(W in r||W in pb))return!1;if(!(Vi&&!K[F]&&Et(ee,F))){if(!(xt&&Et(oe,F))){if(!N[F]||K[F]){if(!(Wc(v)&&(Z.tagNameCheck instanceof RegExp&&Et(Z.tagNameCheck,v)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(v))&&(Z.attributeNameCheck instanceof RegExp&&Et(Z.attributeNameCheck,F)||Z.attributeNameCheck instanceof Function&&Z.attributeNameCheck(F))||F==="is"&&Z.allowCustomizedBuiltInElements&&(Z.tagNameCheck instanceof RegExp&&Et(Z.tagNameCheck,W)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(W))))return!1}else if(!dn[F]){if(!Et(H,qt(W,he,""))){if(!((F==="src"||F==="xlink:href"||F==="href")&&v!=="script"&&Vv(W,"data:")===0&&_t[v])){if(!(un&&!Et(G,qt(W,he,"")))){if(W)return!1}}}}}}return!0},Wc=function(v){return v.indexOf("-")>0},Gc=function(v){let F,W,ke,$e;bi("beforeSanitizeAttributes",v,null);const{attributes:Dt}=v;if(!Dt)return;const Ie={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:N};for($e=Dt.length;$e--;){F=Dt[$e];const{name:Qt,namespaceURI:jo}=F;if(W=Qt==="value"?F.value:jv(F.value),ke=qe(Qt),Ie.attrName=ke,Ie.attrValue=W,Ie.keepAttr=!0,Ie.forceKeepAttr=void 0,bi("uponSanitizeAttribute",v,Ie),W=Ie.attrValue,Ie.forceKeepAttr||(Vo(Qt,v),!Ie.keepAttr))continue;if(!fn&&Et(/\/>/i,W)){Vo(Qt,v);continue}Ut&&(W=qt(W,T," "),W=qt(W,D," "),W=qt(W,B," "));const qc=qe(v.nodeName);if(zc(qc,ke,W)){if(z&&(ke==="id"||ke==="name")&&(Vo(Qt,v),W=le+W),y&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!jo)switch(d.getAttributeType(qc,ke)){case"TrustedHTML":{W=y.createHTML(W);break}case"TrustedScriptURL":{W=y.createScriptURL(W);break}}try{jo?v.setAttributeNS(jo,Qt,W):v.setAttribute(Qt,W),zh(e.removed)}catch{}}}bi("afterSanitizeAttributes",v,null)},bb=function J(v){let F;const W=jc(v);for(bi("beforeSanitizeShadowDOM",v,null);F=W.nextNode();)bi("uponSanitizeShadowNode",F,null),!Uc(F)&&(F.content instanceof s&&J(F.content),Gc(F));bi("afterSanitizeShadowDOM",v,null)};return e.sanitize=function(J){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},F,W,ke,$e;if(Qn=!J,Qn&&(J="<!-->"),typeof J!="string"&&!ns(J))if(typeof J.toString=="function"){if(J=J.toString(),typeof J!="string")throw nr("dirty is not a string, aborting")}else throw nr("toString is not a function");if(!e.isSupported)return J;if(St||Ho(v),e.removed=[],typeof J=="string"&&(Te=!1),Te){if(J.nodeName){const Qt=qe(J.nodeName);if(!S[Qt]||Ae[Qt])throw nr("root node is forbidden and cannot be sanitized in-place")}}else if(J instanceof l)F=Vc("<!---->"),W=F.ownerDocument.importNode(J,!0),W.nodeType===1&&W.nodeName==="BODY"||W.nodeName==="HTML"?F=W:F.appendChild(W);else{if(!Wt&&!Ut&&!nt&&J.indexOf("<")===-1)return y&&Ge?y.createHTML(J):J;if(F=Vc(J),!F)return Wt?null:Ge?w:""}F&&zt&&Ui(F.firstChild);const Dt=jc(Te?J:F);for(;ke=Dt.nextNode();)Uc(ke)||(ke.content instanceof s&&bb(ke.content),Gc(ke));if(Te)return J;if(Wt){if(me)for($e=R.call(F.ownerDocument);F.firstChild;)$e.appendChild(F.firstChild);else $e=F;return(N.shadowroot||N.shadowrootmod)&&($e=x.call(t,$e,!0)),$e}let Ie=nt?F.outerHTML:F.innerHTML;return nt&&S["!doctype"]&&F.ownerDocument&&F.ownerDocument.doctype&&F.ownerDocument.doctype.name&&Et(ag,F.ownerDocument.doctype.name)&&(Ie="<!DOCTYPE "+F.ownerDocument.doctype.name+`>
`+Ie),Ut&&(Ie=qt(Ie,T," "),Ie=qt(Ie,D," "),Ie=qt(Ie,B," ")),y&&Ge?y.createHTML(Ie):Ie},e.setConfig=function(J){Ho(J),St=!0},e.clearConfig=function(){pn=null,St=!1},e.isValidAttribute=function(J,v,F){pn||Ho({});const W=qe(J),ke=qe(v);return zc(W,ke,F)},e.addHook=function(J,v){typeof v=="function"&&(E[J]=E[J]||[],ir(E[J],v))},e.removeHook=function(J){if(E[J])return zh(E[J])},e.removeHooks=function(J){E[J]&&(E[J]=[])},e.removeAllHooks=function(){E={}},e}var pM=cg();const hg="WORKER_PROXY_CONTEXT_KEY";function e2(i){zb(hg,i)}function mM(){return Wb(hg)}var t2=()=>{const i=document.createElement("link");i.href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap",i.rel="stylesheet";const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&display=swap",e.rel="stylesheet",document.head.appendChild(i),document.head.appendChild(e)},i2=()=>{const i=document.createElement("div");return i.style.backgroundImage="linear-gradient(to top, #f9fafb, white)",i.style.border="1px solid #e5e7eb",i.style.borderRadius="0.75rem",i.style.boxShadow="0 0 10px rgba(0, 0, 0, 0.1)",i.style.color="#374151",i.style.display="flex",i.style.flexDirection="row",i.style.alignItems="center",i.style.height="40px",i.style.justifyContent="space-between",i.style.overflow="hidden",i.style.position="fixed",i.style.right=".75rem",i.style.top=".75rem",i.style.width="auto",i.style.zIndex="20",i.style.paddingLeft="1rem",i.setAttribute("id","huggingface-space-header"),window.matchMedia("(max-width: 768px)").addEventListener("change",e=>{e.matches?i.style.display="none":i.style.display="flex"}),i},n2=()=>{const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:link","http://www.w3.org/1999/xlink"),i.setAttribute("aria-hidden","true"),i.setAttribute("focusable","false"),i.setAttribute("role","img"),i.setAttribute("width","1em"),i.setAttribute("height","1em"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("viewBox","0 0 12 12"),i.setAttribute("fill","currentColor");const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d","M0.375001 10.3828L0.375 1.61719C0.375 1.104 0.816001 0.687501 1.35938 0.687501L10.6406 0.6875C10.9017 0.6875 11.1521 0.785449 11.3367 0.959797C11.5213 1.13415 11.625 1.37062 11.625 1.61719V10.3828C11.625 10.6294 11.5213 10.8659 11.3367 11.0402C11.1521 11.2145 10.9017 11.3125 10.6406 11.3125H1.35938C0.816001 11.3125 0.375001 10.896 0.375001 10.3828ZM1.35938 10.5156H10.6406C10.7183 10.5156 10.7813 10.4561 10.7813 10.3828V4.40625H1.21875V10.3828C1.21875 10.418 1.23356 10.4518 1.25994 10.4767C1.28631 10.5017 1.32208 10.5156 1.35938 10.5156ZM4.61052 6.38251L5.9999 7.69472L7.38927 6.38251C7.44083 6.33007 7.50645 6.29173 7.57913 6.27153C7.6518 6.25134 7.72898 6.25003 7.8024 6.26776C7.87583 6.28549 7.9428 6.3216 7.99628 6.37227C8.04983 6.42295 8.08785 6.48631 8.10645 6.5557C8.12528 6.62497 8.12393 6.69773 8.10263 6.76635C8.0814 6.83497 8.0409 6.8969 7.98555 6.94564L6.29802 8.53936C6.21892 8.61399 6.11169 8.65592 5.9999 8.65592C5.8881 8.65592 5.78087 8.61399 5.70177 8.53936L4.01427 6.94564C3.95874 6.89694 3.91814 6.835 3.89676 6.76633C3.87538 6.69766 3.874 6.62483 3.89277 6.55549C3.91154 6.48615 3.94977 6.42287 4.00343 6.37233C4.05708 6.32179 4.12418 6.28585 4.19765 6.2683C4.27098 6.25054 4.34803 6.25178 4.42068 6.27188C4.49334 6.29198 4.55891 6.3302 4.61052 6.38251Z"),i.appendChild(e),i},r2=(i,e)=>{const t=document.createElement("div");return t.setAttribute("id","space-header__collapse"),t.style.display="flex",t.style.flexDirection="row",t.style.alignItems="center",t.style.justifyContent="center",t.style.fontSize="16px",t.style.paddingLeft="10px",t.style.paddingRight="10px",t.style.height="40px",t.style.cursor="pointer",t.style.color="#40546e",t.style.transitionDuration="0.1s",t.style.transitionProperty="all",t.style.transitionTimingFunction="ease-in-out",t.appendChild(n2()),t.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),e()}),t.addEventListener("mouseenter",()=>{t.style.color="#213551"}),t.addEventListener("mouseleave",()=>{t.style.color="#40546e"}),t},s2=i=>{const e=document.createElement("p");return e.style.margin="0",e.style.padding="0",e.style.color="#9ca3af",e.style.fontSize="14px",e.style.fontFamily="Source Sans Pro, sans-serif",e.style.padding="0px 6px",e.style.borderLeft="1px solid #e5e7eb",e.style.marginLeft="4px",e.textContent=(i??0).toString(),e},o2=()=>{const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:link","http://www.w3.org/1999/xlink"),i.setAttribute("aria-hidden","true"),i.setAttribute("focusable","false"),i.setAttribute("role","img"),i.setAttribute("width","1em"),i.setAttribute("height","1em"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("viewBox","0 0 32 32"),i.setAttribute("fill","#6b7280");const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d","M22.45,6a5.47,5.47,0,0,1,3.91,1.64,5.7,5.7,0,0,1,0,8L16,26.13,5.64,15.64a5.7,5.7,0,0,1,0-8,5.48,5.48,0,0,1,7.82,0L16,10.24l2.53-2.58A5.44,5.44,0,0,1,22.45,6m0-2a7.47,7.47,0,0,0-5.34,2.24L16,7.36,14.89,6.24a7.49,7.49,0,0,0-10.68,0,7.72,7.72,0,0,0,0,10.82L16,29,27.79,17.06a7.72,7.72,0,0,0,0-10.82A7.49,7.49,0,0,0,22.45,4Z"),i.appendChild(e),i},l2=i=>{const e=document.createElement("a");return e.setAttribute("href",`https://huggingface.co/spaces/${i.id}`),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e.style.border="1px solid #e5e7eb",e.style.borderRadius="6px",e.style.display="flex",e.style.flexDirection="row",e.style.alignItems="center",e.style.margin="0 0 0 12px",e.style.fontSize="14px",e.style.paddingLeft="4px",e.style.textDecoration="none",e.appendChild(o2()),e.appendChild(s2(i.likes)),e},a2=i=>{const e=document.createElement("img");return e.src=`https://huggingface.co/api/users/${i}/avatar`,e.style.width="0.875rem",e.style.height="0.875rem",e.style.borderRadius="50%",e.style.flex="none",e.style.marginRight="0.375rem",e},c2=i=>{const[e,t]=i.split("/"),n=document.createElement("a");return n.setAttribute("href",`https://huggingface.co/spaces/${i}`),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n.style.color="#1f2937",n.style.textDecoration="none",n.style.fontWeight="600",n.style.fontSize="15px",n.style.lineHeight="24px",n.style.flex="none",n.style.fontFamily="IBM Plex Mono, sans-serif",n.addEventListener("mouseover",()=>{n.style.color="#2563eb"}),n.addEventListener("mouseout",()=>{n.style.color="#1f2937"}),n.textContent=t,n},h2=()=>{const i=document.createElement("div");return i.style.marginLeft=".125rem",i.style.marginRight=".125rem",i.style.color="#d1d5db",i.textContent="/",i},u2=i=>{const e=document.createElement("a");return e.setAttribute("href",`https://huggingface.co/${i}`),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e.style.color="rgb(107, 114, 128)",e.style.textDecoration="none",e.style.fontWeight="400",e.style.fontSize="16px",e.style.lineHeight="24px",e.style.flex="none",e.style.fontFamily="Source Sans Pro, sans-serif",e.addEventListener("mouseover",()=>{e.style.color="#2563eb"}),e.addEventListener("mouseout",()=>{e.style.color="rgb(107, 114, 128)"}),e.textContent=i,e},f2=i=>{const e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="row",e.style.alignItems="center",e.style.justifyContent="center",e.style.borderRight="1px solid #e5e7eb",e.style.paddingRight="12px",e.style.height="40px",e.appendChild(a2(i.author)),e.appendChild(u2(i.author)),e.appendChild(h2()),e.appendChild(c2(i.id)),e.appendChild(l2(i)),e},d2=i=>{const e=i2(),t=()=>e.style.display="none";return e.appendChild(f2(i)),e.appendChild(r2(i,t)),e},p2=async i=>{try{return await(await fetch(`https://huggingface.co/api/spaces/${i}`)).json()}catch{return null}},m2=(i,e)=>{if(document.body===null)return console.error("document.body is null");document.body.appendChild(i)};async function g2(i,e){var t,n;if(window===void 0)return console.error("Please run this script in a browser environment");if(Object.values((n=(t=window.location)==null?void 0:t.ancestorOrigins)!=null?n:{0:window.document.referrer}).some(l=>{var a;return((a=new URL(l))==null?void 0:a.origin)==="https://huggingface.co"}))return;t2();let s;if(typeof i=="string"){if(s=await p2(i),s===null)return console.error("Space not found")}else s=i;const o=d2(s);return m2(o),{element:o}}var _2=(i,e)=>g2(i);function Xh(i){let e,t;return e=new sg({props:{absolute:!i[4],status:i[15],timer:!1,queue_position:null,queue_size:null,translucent:!0,loading_text:i[16],i18n:i[22],autoscroll:i[0],$$slots:{error:[k2],"additional-loading-text":[y2]},$$scope:{ctx:i}}}),{c(){at(e.$$.fragment)},m(n,r){et(e,n,r),t=!0},p(n,r){const s={};r[0]&16&&(s.absolute=!n[4]),r[0]&32768&&(s.status=n[15]),r[0]&65536&&(s.loading_text=n[16]),r[0]&4194304&&(s.i18n=n[22]),r[0]&1&&(s.autoscroll=n[0]),r[0]&4202752|r[1]&2097152&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){tt(e,n)}}}function b2(i){let e;return{c(){e=Y("p"),e.innerHTML='If your custom component never loads, consult the troubleshooting <a style="color: blue;" href="https://www.gradio.app/guides/frequently-asked-questions#the-development-server-didnt-work-for-me" class="svelte-y6l4b">guide</a>.'},m(t,n){j(t,e,n)},d(t){t&&V(e)}}}function y2(i){let e,t=i[23]==="dev"&&b2();return{c(){e=Y("div"),t&&t.c(),C(e,"class","load-text"),C(e,"slot","additional-loading-text")},m(n,r){j(n,e,r),t&&t.m(e,null)},p:Ee,d(n){n&&V(e),t&&t.d()}}}function w2(i){let e,t=i[22]("errors.contact_page_author")+"",n;return{c(){e=Y("p"),n=fe(t),C(e,"class","svelte-y6l4b")},m(r,s){j(r,e,s),q(e,n)},p(r,s){s[0]&4194304&&t!==(t=r[22]("errors.contact_page_author")+"")&&je(n,t)},d(r){r&&V(e)}}}function v2(i){let e,t,n,r,s,o;return{c(){e=Y("p"),t=fe("Please "),n=Y("a"),r=fe("contact the author of the space"),o=fe(" to let them know."),C(n,"href",s="https://huggingface.co/spaces/"+i[8]+"/discussions/new?title="+i[24].title(i[13]?.detail)+"&description="+i[24].description(i[13]?.detail,location.origin)),C(n,"class","svelte-y6l4b"),C(e,"class","svelte-y6l4b")},m(l,a){j(l,e,a),q(e,t),q(e,n),q(n,r),q(e,o)},p(l,a){a[0]&8448&&s!==(s="https://huggingface.co/spaces/"+l[8]+"/discussions/new?title="+l[24].title(l[13]?.detail)+"&description="+l[24].description(l[13]?.detail,location.origin))&&C(n,"href",s)},d(l){l&&V(e)}}}function k2(i){let e,t,n,r=(i[13]?.message||"")+"",s,o;function l(h,u){return(h[13].status==="space_error"||h[13].status==="paused")&&h[13].discussions_enabled?v2:w2}let a=l(i),c=a(i);return{c(){e=Y("div"),t=Y("p"),n=Y("strong"),s=fe(r),o=Se(),c.c(),C(t,"class","svelte-y6l4b"),C(e,"class","error svelte-y6l4b"),C(e,"slot","error")},m(h,u){j(h,e,u),q(e,t),q(t,n),q(n,s),q(e,o),c.m(e,null)},p(h,u){u[0]&8192&&r!==(r=(h[13]?.message||"")+"")&&je(s,r),a===(a=l(h))&&c?c.p(h,u):(c.d(1),c=a(h),c&&(c.c(),c.m(e,null)))},d(h){h&&V(e),c.d()}}}function x2(i){let e,t,n,r,s;const o=[{app:i[14]},i[12],{fill_height:!i[4]&&i[12].fill_height},{theme_mode:i[17]},{control_page_title:i[5]},{target:i[9]},{autoscroll:i[0]},{show_footer:!i[4]},{app_mode:i[3]},{version:i[1]},{api_prefix:i[12].api_prefix||""},{max_file_size:i[12].max_file_size},{initial_layout:void 0},{search_params:new URLSearchParams(window.location.search)}];function l(u){i[32](u)}function a(u){i[33](u)}function c(u){i[34](u)}let h={};for(let u=0;u<o.length;u+=1)h=Wa(h,o[u]);return i[10]!==void 0&&(h.ready=i[10]),i[11]!==void 0&&(h.render_complete=i[11]),i[21]!==void 0&&(h.add_new_message=i[21]),e=new i[19]({props:h}),wt.push(()=>vr(e,"ready",l)),wt.push(()=>vr(e,"render_complete",a)),wt.push(()=>vr(e,"add_new_message",c)),{c(){at(e.$$.fragment)},m(u,f){et(e,u,f),s=!0},p(u,f){const d=f[0]&152123?dd(o,[f[0]&16384&&{app:u[14]},f[0]&4096&&Jb(u[12]),f[0]&4112&&{fill_height:!u[4]&&u[12].fill_height},f[0]&131072&&{theme_mode:u[17]},f[0]&32&&{control_page_title:u[5]},f[0]&512&&{target:u[9]},f[0]&1&&{autoscroll:u[0]},f[0]&16&&{show_footer:!u[4]},f[0]&8&&{app_mode:u[3]},f[0]&2&&{version:u[1]},f[0]&4096&&{api_prefix:u[12].api_prefix||""},f[0]&4096&&{max_file_size:u[12].max_file_size},f&0&&{initial_layout:void 0},f&0&&{search_params:new URLSearchParams(window.location.search)}]):{};!t&&f[0]&1024&&(t=!0,d.ready=u[10],wr(()=>t=!1)),!n&&f[0]&2048&&(n=!0,d.render_complete=u[11],wr(()=>n=!1)),!r&&f[0]&2097152&&(r=!0,d.add_new_message=u[21],wr(()=>r=!1)),e.$set(d)},i(u){s||(re(e.$$.fragment,u),s=!0)},o(u){se(e.$$.fragment,u),s=!1},d(u){tt(e,u)}}}function S2(i){let e,t;return e=new i[20]({props:{auth_message:i[12].auth_message,root:i[12].root,space_id:i[8],app_mode:i[3]}}),{c(){at(e.$$.fragment)},m(n,r){et(e,n,r),t=!0},p(n,r){const s={};r[0]&4096&&(s.auth_message=n[12].auth_message),r[0]&4096&&(s.root=n[12].root),r[0]&256&&(s.space_id=n[8]),r[0]&8&&(s.app_mode=n[3]),e.$set(s)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){tt(e,n)}}}function E2(i){let e,t,n,r,s,o=(i[15]==="pending"||i[15]==="error")&&!(i[12]&&i[12]?.auth_required)&&Xh(i);const l=[S2,x2],a=[];function c(h,u){return h[12]?.auth_required&&h[20]?0:h[12]&&h[19]&&h[18]?1:-1}return~(t=c(i))&&(n=a[t]=l[t](i)),{c(){o&&o.c(),e=Se(),n&&n.c(),r=Mt()},m(h,u){o&&o.m(h,u),j(h,e,u),~t&&a[t].m(h,u),j(h,r,u),s=!0},p(h,u){(h[15]==="pending"||h[15]==="error")&&!(h[12]&&h[12]?.auth_required)?o?(o.p(h,u),u[0]&36864&&re(o,1)):(o=Xh(h),o.c(),re(o,1),o.m(e.parentNode,e)):o&&(Ht(),se(o,1,1,()=>{o=null}),Ft());let f=t;t=c(h),t===f?~t&&a[t].p(h,u):(n&&(Ht(),se(a[f],1,1,()=>{a[f]=null}),Ft()),~t?(n=a[t],n?n.p(h,u):(n=a[t]=l[t](h),n.c()),re(n,1),n.m(r.parentNode,r)):n=null)},i(h){s||(re(o),re(n),s=!0)},o(h){se(o),se(n),s=!1},d(h){h&&(V(e),V(r)),o&&o.d(h),~t&&a[t].d(h)}}}function A2(i){let e,t,n;function r(o){i[35](o)}let s={display:i[6]&&i[4],is_embed:i[4],info:!!i[8]&&i[7],version:i[1],initial_height:i[2],space:i[8],loaded:i[15]==="complete",fill_width:i[12]?.fill_width||!1,$$slots:{default:[E2]},$$scope:{ctx:i}};return i[9]!==void 0&&(s.wrapper=i[9]),e=new Fd({props:s}),wt.push(()=>vr(e,"wrapper",r)),{c(){at(e.$$.fragment)},m(o,l){et(e,o,l),n=!0},p(o,l){const a={};l[0]&80&&(a.display=o[6]&&o[4]),l[0]&16&&(a.is_embed=o[4]),l[0]&384&&(a.info=!!o[8]&&o[7]),l[0]&2&&(a.version=o[1]),l[0]&4&&(a.initial_height=o[2]),l[0]&256&&(a.space=o[8]),l[0]&32768&&(a.loaded=o[15]==="complete"),l[0]&4096&&(a.fill_width=o[12]?.fill_width||!1),l[0]&8388411|l[1]&2097152&&(a.$$scope={dirty:l,ctx:o}),!t&&l[0]&512&&(t=!0,a.wrapper=o[9],wr(()=>t=!1)),e.$set(a)},i(o){n||(re(e.$$.fragment,o),n=!0)},o(o){se(e.$$.fragment,o),n=!1},d(o){tt(e,o)}}}let T2=-1;function C2(){const i=fi({}),e=new Map,t=new IntersectionObserver(r=>{r.forEach(s=>{if(s.isIntersecting){let o=e.get(s.target);o!==void 0&&i.update(l=>({...l,[o]:!0}))}})});function n(r,s){e.set(s,r),t.observe(s)}return{register:n,subscribe:i.subscribe}}const Jh=C2();async function O2(i){if(i){const e=new DOMParser,t=Array.from(e.parseFromString(i,"text/html").head.children);if(t)for(let n of t){let r=document.createElement(n.tagName);if(Array.from(n.attributes).forEach(s=>{r.setAttribute(s.name,s.value)}),r.textContent=n.textContent,r.tagName=="META"&&r.getAttribute("property")){const o=Array.from(document.head.getElementsByTagName("meta")??[]).find(l=>l.getAttribute("property")==r.getAttribute("property")&&!l.isEqualNode(r));if(o){document.head.replaceChild(r,o);continue}}document.head.appendChild(r)}}}function M2(i,e,t){let n,r;Ln(i,ec,z=>t(22,n=z)),Ln(i,Jh,z=>t(31,r=z)),tc();const s=mo();let{autoscroll:o}=e,{version:l}=e,{initial_height:a}=e,{app_mode:c}=e,{is_embed:h}=e,{theme_mode:u="system"}=e,{control_page_title:f}=e,{container:d}=e,{info:p}=e,{eager:g}=e,m,{mount_css:_=yo}=e,{Client:k}=e,{worker_proxy:y=void 0}=e;y&&(e2(y),y.addEventListener("progress-update",z=>{t(16,D=z.detail+"...")}));let{space:w}=e,{src:A}=e,M=T2++,R="pending",P,x=!1,E=!1,T,D=n("common.loading")+"...",B,ee,oe=null;async function G(z){z&&(oe=ql(z,l,oe||void 0)),await _(T.root+"/theme.css?v="+T.theme_hash,document.head),T.stylesheets&&await Promise.all(T.stylesheets.map(le=>le.startsWith("http:")||le.startsWith("https:")?_(le,document.head):fetch(T.root+"/"+le).then(Te=>Te.text()).then(Te=>{ql(Te,l)})))}function he(z){const le=window.__gradio_mode__==="website";let ye;if(le)ye="light";else{const Fe=new URL(window.location.toString()).searchParams.get("__theme");ye=u||Fe||"system"}return ye==="dark"||ye==="light"?S(z,ye):ye=H(z),ye}function H(z){const le=ye();window?.matchMedia("(prefers-color-scheme: dark)")?.addEventListener("change",ye);function ye(){let Te=window?.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light";return S(z,Te),Te}return le}function S(z,le){const ye=h?z.parentElement:document.body,Te=h?z:z.parentElement;Te.style.background="var(--body-background-fill)",le==="dark"?ye.classList.add("dark"):ye.classList.remove("dark")}let ie={message:"",load_status:"pending",status:"sleeping",detail:"SLEEPING"},N,Re=!1;function Z(z){t(13,ie=z)}const Ae=window.__GRADIO_DEV__;Mr(async()=>{t(17,B=he(P));const z=window.__GRADIO__SERVER_PORT__;if(ee=Ae==="dev"?`http://localhost:${typeof z=="number"?z:7860}`:w||A||location.origin,t(14,N=await k.connect(ee,{status_callback:Z,with_null_state:!0,events:["data","log","status","render"]})),!N.config)throw new Error("Could not resolve app config");t(12,T=N.config),window.__gradio_space__=T.space_id,t(13,ie={message:"",load_status:"complete",status:"running",detail:"RUNNING"}),await G(T.css),await O2(T.head),t(18,Re=!0),window.__is_colab__=T.is_colab,s("loaded"),T.dev_mode&&setTimeout(()=>{const{host:le}=new URL(ee);let ye=new URL(`http://${le}${N.api_prefix}/dev/reload`);m=new EventSource(ye),m.addEventListener("error",async Te=>{nt("Error reloading app","error"),console.error(JSON.parse(Te.data))}),m.addEventListener("reload",async Te=>{if(N.close(),t(14,N=await k.connect(ee,{status_callback:Z,with_null_state:!0,events:["data","log","status","render"]})),!N.config)throw new Error("Could not resolve app config");t(12,T=N.config),window.__gradio_space__=T.space_id,await G(T.css)})},200)});let K,xt;async function Vi(){t(19,K=(await I(()=>import("./assets/Blocks-Bo9iBAHr.js"),__vite__mapDeps([178,35,36,161,86,179]),import.meta.url)).default)}async function un(){t(20,xt=(await I(()=>import("./assets/Login-BFKY5FiJ.js"),__vite__mapDeps([180,98,99,168,59,55,43,44,139,120,86,77,35,36,1,2,181,75]),import.meta.url)).default)}function fn(){T.auth_required?un():Vi()}const Ut={readable_error:{NO_APP_FILE:n("errors.no_app_file"),CONFIG_ERROR:n("errors.config_error"),BUILD_ERROR:n("errors.build_error"),RUNTIME_ERROR:n("errors.runtime_error"),PAUSED:n("errors.space_paused")},title(z){return encodeURIComponent(n("errors.space_not_working"))},description(z,le){return encodeURIComponent(`Hello,

Firstly, thanks for creating this space!

I noticed that the space isn't working correctly because there is ${this.readable_error[z]||"an error"}.

It would be great if you could take a look at this because this space is being embedded on ${le}.

Thanks!`)}};let nt;Mr(async()=>{Jh.register(M,P)});let St;async function zt(z,le){if(z&&!le&&window.self===window.top){St&&(St.remove(),St=void 0);const ye=await _2(z);ye&&(St=ye.element)}}$a(()=>{St?.remove()});function Wt(z){x=z,t(10,x)}function me(z){E=z,t(11,E)}function Ge(z){nt=z,t(21,nt)}function Gt(z){P=z,t(9,P)}return i.$$set=z=>{"autoscroll"in z&&t(0,o=z.autoscroll),"version"in z&&t(1,l=z.version),"initial_height"in z&&t(2,a=z.initial_height),"app_mode"in z&&t(3,c=z.app_mode),"is_embed"in z&&t(4,h=z.is_embed),"theme_mode"in z&&t(25,u=z.theme_mode),"control_page_title"in z&&t(5,f=z.control_page_title),"container"in z&&t(6,d=z.container),"info"in z&&t(7,p=z.info),"eager"in z&&t(26,g=z.eager),"mount_css"in z&&t(27,_=z.mount_css),"Client"in z&&t(28,k=z.Client),"worker_proxy"in z&&t(29,y=z.worker_proxy),"space"in z&&t(8,w=z.space),"src"in z&&t(30,A=z.src)},i.$$.update=()=>{i.$$.dirty[0]&4096&&T?.app_id&&T.app_id,i.$$.dirty[0]&9216&&t(15,R=!x&&ie.load_status!=="error"?"pending":!x&&ie.load_status==="error"?"error":ie.load_status),i.$$.dirty[0]&67112960|i.$$.dirty[1]&1&&T&&(g||r[M])&&fn(),i.$$.dirty[0]&2560&&E&&P.dispatchEvent(new CustomEvent("render",{bubbles:!0,cancelable:!1,composed:!0})),i.$$.dirty[0]&16400&&N?.config&&zt(N?.config?.space_id,h)},[o,l,a,c,h,f,d,p,w,P,x,E,T,ie,N,R,D,B,Re,K,xt,nt,n,Ae,Ut,u,g,_,k,y,A,r,Wt,me,Ge,Gt]}class ug extends Yt{constructor(e){super(),Jt(this,e,M2,A2,vt,{autoscroll:0,version:1,initial_height:2,app_mode:3,is_embed:4,theme_mode:25,control_page_title:5,container:6,info:7,eager:26,mount_css:27,Client:28,worker_proxy:29,space:8,src:30},null,[-1,-1])}get autoscroll(){return this.$$.ctx[0]}set autoscroll(e){this.$$set({autoscroll:e}),O()}get version(){return this.$$.ctx[1]}set version(e){this.$$set({version:e}),O()}get initial_height(){return this.$$.ctx[2]}set initial_height(e){this.$$set({initial_height:e}),O()}get app_mode(){return this.$$.ctx[3]}set app_mode(e){this.$$set({app_mode:e}),O()}get is_embed(){return this.$$.ctx[4]}set is_embed(e){this.$$set({is_embed:e}),O()}get theme_mode(){return this.$$.ctx[25]}set theme_mode(e){this.$$set({theme_mode:e}),O()}get control_page_title(){return this.$$.ctx[5]}set control_page_title(e){this.$$set({control_page_title:e}),O()}get container(){return this.$$.ctx[6]}set container(e){this.$$set({container:e}),O()}get info(){return this.$$.ctx[7]}set info(e){this.$$set({info:e}),O()}get eager(){return this.$$.ctx[26]}set eager(e){this.$$set({eager:e}),O()}get mount_css(){return this.$$.ctx[27]}set mount_css(e){this.$$set({mount_css:e}),O()}get Client(){return this.$$.ctx[28]}set Client(e){this.$$set({Client:e}),O()}get worker_proxy(){return this.$$.ctx[29]}set worker_proxy(e){this.$$set({worker_proxy:e}),O()}get space(){return this.$$.ctx[8]}set space(e){this.$$set({space:e}),O()}get src(){return this.$$.ctx[30]}set src(e){this.$$set({src:e}),O()}}class ve{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),li.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),li.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new kr(this),s=new kr(e);for(let o=t,l=t;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=n)return!0}}iter(e=1){return new kr(this,e)}iterRange(e,t=this.length){return new fg(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new dg(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ve.empty:e.length<=32?new Ve(e):li.from(Ve.split(e,[]))}}class Ve extends ve{constructor(e,t=D2(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let s=0;;s++){let o=this.text[s],l=r+o.length;if((t?n:l)>=e)return new P2(r,l,n,o);r=l+1,n++}}decompose(e,t,n,r){let s=e<=0&&t>=this.length?this:new Ve(Yh(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let o=n.pop(),l=Ls(s.text,o.text.slice(),0,s.length);if(l.length<=32)n.push(new Ve(l,o.length+s.length));else{let a=l.length>>1;n.push(new Ve(l.slice(0,a)),new Ve(l.slice(a)))}}else n.push(s)}replace(e,t,n){if(!(n instanceof Ve))return super.replace(e,t,n);let r=Ls(this.text,Ls(n.text,Yh(this.text,0,e)),t),s=this.length+n.length-(t-e);return r.length<=32?new Ve(r,s):li.from(Ve.split(r,[]),s)}sliceString(e,t=this.length,n=`
`){let r="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(r+=n),e<a&&t>s&&(r+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let s of e)n.push(s),r+=s.length+1,n.length==32&&(t.push(new Ve(n,r)),n=[],r=-1);return r>-1&&t.push(new Ve(n,r)),t}}class li extends ve{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,r){for(let s=0;;s++){let o=this.children[s],l=r+o.length,a=n+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,n,r);r=l+1,n=a+1}}decompose(e,t,n,r){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let c=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!c?n.push(l):l.decompose(e-o,t-o,n,c)}o=a+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,n),c=this.lines-o.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let h=this.children.slice();return h[r]=a,new li(h,this.length-(t-e)+n.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){let r="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(r+=n),e<a&&t>o&&(r+=l.sliceString(e-o,t-o,n)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof li))return 0;let n=0,[r,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,s+=t){if(r==o||s==l)return n;let a=this.children[r],c=e.children[s];if(a!=c)return n+a.scanIdentical(c,t);n+=a.length+1}}static from(e,t=e.reduce((n,r)=>n+r.length+1,-1)){let n=0;for(let d of e)n+=d.lines;if(n<32){let d=[];for(let p of e)p.flatten(d);return new Ve(d,t)}let r=Math.max(32,n>>5),s=r<<1,o=r>>1,l=[],a=0,c=-1,h=[];function u(d){let p;if(d.lines>s&&d instanceof li)for(let g of d.children)u(g);else d.lines>o&&(a>o||!a)?(f(),l.push(d)):d instanceof Ve&&a&&(p=h[h.length-1])instanceof Ve&&d.lines+p.lines<=32?(a+=d.lines,c+=d.length+1,h[h.length-1]=new Ve(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>r&&f(),a+=d.lines,c+=d.length+1,h.push(d))}function f(){a!=0&&(l.push(h.length==1?h[0]:li.from(h,c)),c=-1,a=h.length=0)}for(let d of e)u(d);return f(),l.length==1?l[0]:new li(l,t)}}ve.empty=new Ve([""],0);function D2(i){let e=-1;for(let t of i)e+=t.length+1;return e}function Ls(i,e,t=0,n=1e9){for(let r=0,s=0,o=!0;s<i.length&&r<=n;s++){let l=i[s],a=r+l.length;a>=t&&(a>n&&(l=l.slice(0,n-r)),r<t&&(l=l.slice(t-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=a+1}return e}function Yh(i,e,t){return Ls(i,[""],e,t)}class kr{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ve?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],s=this.offsets[n],o=s>>1,l=r instanceof Ve?r.text.length:r.children.length;if(o==(t>0?l:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Ve){let a=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Ve?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class fg{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new kr(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class dg{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ve.prototype[Symbol.iterator]=function(){return this.iter()},kr.prototype[Symbol.iterator]=fg.prototype[Symbol.iterator]=dg.prototype[Symbol.iterator]=function(){return this});class P2{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}let On="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(i=>i?parseInt(i,36):1);for(let i=1;i<On.length;i++)On[i]+=On[i-1];function L2(i){for(let e=1;e<On.length;e+=2)if(On[e]>i)return On[e-1]<=i;return!1}function Zh(i){return i>=127462&&i<=127487}const Qh=8205;function Ct(i,e,t=!0,n=!0){return(t?pg:R2)(i,e,n)}function pg(i,e,t){if(e==i.length)return e;e&&mg(i.charCodeAt(e))&&gg(i.charCodeAt(e-1))&&e--;let n=ot(i,e);for(e+=Pt(n);e<i.length;){let r=ot(i,e);if(n==Qh||r==Qh||t&&L2(r))e+=Pt(r),n=r;else if(Zh(r)){let s=0,o=e-2;for(;o>=0&&Zh(ot(i,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function R2(i,e,t){for(;e>0;){let n=pg(i,e-2,t);if(n<e)return n;e--}return 0}function mg(i){return i>=56320&&i<57344}function gg(i){return i>=55296&&i<56320}function ot(i,e){let t=i.charCodeAt(e);if(!gg(t)||e+1==i.length)return t;let n=i.charCodeAt(e+1);return mg(n)?(t-55296<<10)+(n-56320)+65536:t}function _g(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function Pt(i){return i<65536?1:2}const Jl=/\r\n?|\n/;var Qe=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(Qe||(Qe={}));class di{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,s),r+=s):r+=o,n+=s}}iterChangedRanges(e,t=!1){Yl(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new di(e)}composeDesc(e){return this.empty?e:e.empty?this:bg(this,e)}mapDesc(e,t=!1){return e.empty?this:Zl(this,e,t)}mapPos(e,t=-1,n=Qe.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=r+l;if(a<0){if(c>e)return s+(e-r);s+=l}else{if(n!=Qe.Simple&&c>=e&&(n==Qe.TrackDel&&r<e&&c>e||n==Qe.TrackBefore&&r<e||n==Qe.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!l)return e==r||t<0?s:s+a;s+=a}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let s=this.sections[n++],o=this.sections[n++],l=r+s;if(o>=0&&r<=t&&l>=e)return r<e&&l>t?"cover":!0;r=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new di(e)}static create(e){return new di(e)}}class ze extends di{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Yl(this,(t,n,r,s,o)=>e=e.replace(r,r+(n-t),o),!1),e}mapDesc(e,t=!1){return Zl(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,s=0;r<t.length;r+=2){let o=t[r],l=t[r+1];if(l>=0){t[r]=l,t[r+1]=o;let a=r>>1;for(;n.length<a;)n.push(ve.empty);n.push(o?e.slice(s,s+o):ve.empty)}s+=o}return new ze(t,n)}compose(e){return this.empty?e:e.empty?this:bg(this,e,!0)}map(e,t=!1){return e.empty?this:Zl(this,e,t,!0)}iterChanges(e,t=!1){Yl(this,e,t)}get desc(){return di.create(this.sections)}filter(e){let t=[],n=[],r=[],s=new Lr(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,a-l);st(r,h,-1);let u=s.ins==-1?-1:s.off==0?s.ins:0;st(t,h,u),u>0&&Oi(n,t,s.text),s.forward(h),l+=h}let c=e[o++];for(;l<c;){if(s.done)break e;let h=Math.min(s.len,c-l);st(t,h,-1),st(r,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),l+=h}}return{changes:new ze(t,n),filtered:di.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):r==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],s=[],o=0,l=null;function a(h=!1){if(!h&&!r.length)return;o<t&&st(r,t-o,-1);let u=new ze(r,s);l=l?l.compose(u.map(l)):u,r=[],s=[],o=0}function c(h){if(Array.isArray(h))for(let u of h)c(u);else if(h instanceof ze){if(h.length!=t)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${t})`);a(),l=l?l.compose(h.map(l)):h}else{let{from:u,to:f=u,insert:d}=h;if(u>f||u<0||f>t)throw new RangeError(`Invalid change range ${u} to ${f} (in doc of length ${t})`);let p=d?typeof d=="string"?ve.of(d.split(n||Jl)):d:ve.empty,g=p.length;if(u==f&&g==0)return;u<o&&a(),u>o&&st(r,u-o,-1),st(r,f-u,g),Oi(s,r,p),o=f}}return c(e),a(!l),l}static empty(e){return new ze(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;n.length<r;)n.push(ve.empty);n[r]=ve.of(s.slice(1)),t.push(s[0],n[r].length)}}}return new ze(t,n)}static createSet(e,t){return new ze(e,t)}}function st(i,e,t,n=!1){if(e==0&&t<=0)return;let r=i.length-2;r>=0&&t<=0&&t==i[r+1]?i[r]+=e:e==0&&i[r]==0?i[r+1]+=t:n?(i[r]+=e,i[r+1]+=t):i.push(e,t)}function Oi(i,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<i.length)i[i.length-1]=i[i.length-1].append(t);else{for(;i.length<n;)i.push(ve.empty);i.push(t)}}function Yl(i,e,t){let n=i.inserted;for(let r=0,s=0,o=0;o<i.sections.length;){let l=i.sections[o++],a=i.sections[o++];if(a<0)r+=l,s+=l;else{let c=r,h=s,u=ve.empty;for(;c+=l,h+=a,a&&n&&(u=u.append(n[o-2>>1])),!(t||o==i.sections.length||i.sections[o+1]<0);)l=i.sections[o++],a=i.sections[o++];e(r,c,s,h,u),r=c,s=h}}}function Zl(i,e,t,n=!1){let r=[],s=n?[]:null,o=new Lr(i),l=new Lr(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);st(r,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let c=l.len;for(st(r,l.ins,-1);c;){let h=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=h&&(st(r,0,o.ins),s&&Oi(s,r,o.text),a=o.i),o.forward(h),c-=h}l.next()}else if(o.ins>=0){let c=0,h=o.len;for(;h;)if(l.ins==-1){let u=Math.min(h,l.len);c+=u,h-=u,l.forward(u)}else if(l.ins==0&&l.len<h)h-=l.len,l.next();else break;st(r,c,a<o.i?o.ins:0),s&&a<o.i&&Oi(s,r,o.text),a=o.i,o.forward(o.len-h)}else{if(o.done&&l.done)return s?ze.createSet(r,s):di.create(r);throw new Error("Mismatched change set lengths")}}function bg(i,e,t=!1){let n=[],r=t?[]:null,s=new Lr(i),o=new Lr(e);for(let l=!1;;){if(s.done&&o.done)return r?ze.createSet(n,r):di.create(n);if(s.ins==0)st(n,s.len,0,l),s.next();else if(o.len==0&&!o.done)st(n,0,o.ins,l),r&&Oi(r,n,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),c=n.length;if(s.ins==-1){let h=o.ins==-1?-1:o.off?0:o.ins;st(n,a,h,l),r&&h&&Oi(r,n,o.text)}else o.ins==-1?(st(n,s.off?0:s.len,a,l),r&&Oi(r,n,s.textBit(a))):(st(n,s.off?0:s.len,o.off?0:o.ins,l),r&&!o.off&&Oi(r,n,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||n.length>c),s.forward2(a),o.forward(a)}}}}class Lr{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ve.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?ve.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class $i{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new $i(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return L.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return L.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return L.range(e.anchor,e.head)}static create(e,t,n){return new $i(e,t,n)}}class L{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:L.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new L([this.main],0)}addRange(e,t=!0){return L.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,L.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new L(e.ranges.map(t=>$i.fromJSON(t)),e.main)}static single(e,t=e){return new L([L.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=n:s.from<n)return L.normalized(e.slice(),t);n=s.to}return new L(e,t)}static cursor(e,t=0,n,r){return $i.create(e,e,(t==0?0:t<0?4:8)|(n==null?3:Math.min(2,n))|(r??33554431)<<5)}static range(e,t,n){let r=(n??33554431)<<5;return t<e?$i.create(t,e,16|r|8):$i.create(e,t,r|(t>e?4:0))}static normalized(e,t=0){let n=e[t];e.sort((r,s)=>r.from-s.from),t=e.indexOf(n);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);r<=t&&t--,e.splice(--r,2,s.anchor>s.head?L.range(a,l):L.range(l,a))}}return new L(e,t)}}function yg(i,e){for(let t of i.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let ic=0;class X{constructor(e,t,n,r,s){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=ic++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new X(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:nc),!!e.static,e.enables)}of(e){return new Rs([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Rs(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Rs(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function nc(i,e){return i==e||i.length==e.length&&i.every((t,n)=>t===e[n])}class Rs{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=ic++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,c=!1,h=[];for(let u of this.dependencies)u=="doc"?a=!0:u=="selection"?c=!0:((t=e[u.id])!==null&&t!==void 0?t:1)&1||h.push(e[u.id]);return{create(u){return u.values[o]=n(u),1},update(u,f){if(a&&f.docChanged||c&&(f.docChanged||f.selection)||Ql(u,h)){let d=n(u);if(l?!eu(d,u.values[o],r):!r(d,u.values[o]))return u.values[o]=d,1}return 0},reconfigure:(u,f)=>{let d=n(u),p=f.config.address[s];if(p!=null){let g=Xs(f,p);if(this.dependencies.every(m=>m instanceof X?f.facet(m)===u.facet(m):m instanceof kt?f.field(m,!1)==u.field(m,!1):!0)||(l?eu(d,g,r):r(d,g)))return u.values[o]=g,0}return u.values[o]=d,1}}}}function eu(i,e,t){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!t(i[n],e[n]))return!1;return!0}function Ql(i,e){let t=!1;for(let n of e)xr(i,n)&1&&(t=!0);return t}function I2(i,e,t){let n=t.map(a=>i[a.id]),r=t.map(a=>a.type),s=n.filter(a=>!(a&1)),o=i[e.id]>>1;function l(a){let c=[];for(let h=0;h<n.length;h++){let u=Xs(a,n[h]);if(r[h]==2)for(let f of u)c.push(f);else c.push(u)}return e.combine(c)}return{create(a){for(let c of n)xr(a,c);return a.values[o]=l(a),1},update(a,c){if(!Ql(a,s))return 0;let h=l(a);return e.compare(h,a.values[o])?0:(a.values[o]=h,1)},reconfigure(a,c){let h=Ql(a,n),u=c.config.facets[e.id],f=c.facet(e);if(u&&!h&&nc(t,u))return a.values[o]=f,0;let d=l(a);return e.compare(d,f)?(a.values[o]=f,0):(a.values[o]=d,1)}}}const tu=X.define({static:!0});class kt{constructor(e,t,n,r,s){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let t=new kt(ic++,e.create,e.update,e.compare||((n,r)=>n===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(tu).find(n=>n.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,r)=>{let s=n.values[t],o=this.updateF(s,r);return this.compareF(s,o)?0:(n.values[t]=o,1)},reconfigure:(n,r)=>r.config.address[this.id]!=null?(n.values[t]=r.field(this),0):(n.values[t]=this.create(n),1)}}init(e){return[this,tu.of({field:this,create:e})]}get extension(){return this}}const Gi={lowest:4,low:3,default:2,high:1,highest:0};function rr(i){return e=>new wg(e,i)}const Jr={highest:rr(Gi.highest),high:rr(Gi.high),default:rr(Gi.default),low:rr(Gi.low),lowest:rr(Gi.lowest)};class wg{constructor(e,t){this.inner=e,this.prec=t}}class wo{of(e){return new ea(this,e)}reconfigure(e){return wo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class ea{constructor(e,t){this.compartment=e,this.inner=t}}class Ks{constructor(e,t,n,r,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],s=Object.create(null),o=new Map;for(let f of N2(e,t,o))f instanceof kt?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let l=Object.create(null),a=[],c=[];for(let f of r)l[f.id]=c.length<<1,c.push(d=>f.slot(d));let h=n?.config.facets;for(let f in s){let d=s[f],p=d[0].facet,g=h&&h[f]||[];if(d.every(m=>m.type==0))if(l[p.id]=a.length<<1|1,nc(g,d))a.push(n.facet(p));else{let m=p.combine(d.map(_=>_.value));a.push(n&&p.compare(m,n.facet(p))?n.facet(p):m)}else{for(let m of d)m.type==0?(l[m.id]=a.length<<1|1,a.push(m.value)):(l[m.id]=c.length<<1,c.push(_=>m.dynamicSlot(_)));l[p.id]=c.length<<1,c.push(m=>I2(m,p,d))}}let u=c.map(f=>f(l));return new Ks(e,o,u,l,a,s)}}function N2(i,e,t){let n=[[],[],[],[],[]],r=new Map;function s(o,l){let a=r.get(o);if(a!=null){if(a<=l)return;let c=n[a].indexOf(o);c>-1&&n[a].splice(c,1),o instanceof ea&&t.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let c of o)s(c,l);else if(o instanceof ea){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),s(c,l)}else if(o instanceof wg)s(o.inner,o.prec);else if(o instanceof kt)n[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Rs)n[l].push(o),o.facet.extensions&&s(o.facet.extensions,Gi.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,l)}}return s(i,Gi.default),n.reduce((o,l)=>o.concat(l))}function xr(i,e){if(e&1)return 2;let t=e>>1,n=i.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;i.status[t]=4;let r=i.computeSlot(i,i.config.dynamicSlots[t]);return i.status[t]=2|r}function Xs(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}const vg=X.define(),kg=X.define({combine:i=>i.some(e=>e),static:!0}),xg=X.define({combine:i=>i.length?i[0]:void 0,static:!0}),Sg=X.define(),Eg=X.define(),Ag=X.define(),Tg=X.define({combine:i=>i.length?i[0]:!1});class an{constructor(e,t){this.type=e,this.value=t}static define(){return new B2}}class B2{of(e){return new an(this,e)}}class H2{constructor(e){this.map=e}of(e){return new de(this,e)}}class de{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new de(this.type,t)}is(e){return this.type==e}static define(e={}){return new H2(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let s=r.map(t);s&&n.push(s)}return n}}de.reconfigure=de.define();de.appendConfig=de.define();class We{constructor(e,t,n,r,s,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,n&&yg(n,t.newLength),s.some(l=>l.type==We.time)||(this.annotations=s.concat(We.time.of(Date.now())))}static create(e,t,n,r,s,o){return new We(e,t,n,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(We.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}We.time=an.define();We.userEvent=an.define();We.addToHistory=an.define();We.remote=an.define();function F2(i,e){let t=[];for(let n=0,r=0;;){let s,o;if(n<i.length&&(r==e.length||e[r]>=i[n]))s=i[n++],o=i[n++];else if(r<e.length)s=e[r++],o=e[r++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function Cg(i,e,t){var n;let r,s,o;return t?(r=e.changes,s=ze.empty(e.changes.length),o=i.changes.compose(e.changes)):(r=e.changes.map(i.changes),s=i.changes.mapDesc(e.changes,!0),o=i.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(n=i.selection)===null||n===void 0?void 0:n.map(r),effects:de.mapEffects(i.effects,r).concat(de.mapEffects(e.effects,s)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function ta(i,e,t){let n=e.selection,r=Mn(e.annotations);return e.userEvent&&(r=r.concat(We.userEvent.of(e.userEvent))),{changes:e.changes instanceof ze?e.changes:ze.of(e.changes||[],t,i.facet(xg)),selection:n&&(n instanceof L?n:L.single(n.anchor,n.head)),effects:Mn(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Og(i,e,t){let n=ta(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;n=Cg(n,ta(i,e[s],o?n.changes.newLength:i.doc.length),o)}let r=We.create(i,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return j2(t?V2(r):r)}function V2(i){let e=i.startState,t=!0;for(let r of e.facet(Sg)){let s=r(i);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:F2(t,s))}if(t!==!0){let r,s;if(t===!1)s=i.changes.invertedDesc,r=ze.empty(e.doc.length);else{let o=i.changes.filter(t);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}i=We.create(e,r,i.selection&&i.selection.map(s),de.mapEffects(i.effects,s),i.annotations,i.scrollIntoView)}let n=e.facet(Eg);for(let r=n.length-1;r>=0;r--){let s=n[r](i);s instanceof We?i=s:Array.isArray(s)&&s.length==1&&s[0]instanceof We?i=s[0]:i=Og(e,Mn(s),!1)}return i}function j2(i){let e=i.startState,t=e.facet(Ag),n=i;for(let r=t.length-1;r>=0;r--){let s=t[r](i);s&&Object.keys(s).length&&(n=Cg(n,ta(e,s,i.changes.newLength),!0))}return n==i?i:We.create(e,i.changes,i.selection,n.effects,n.annotations,n.scrollIntoView)}const U2=[];function Mn(i){return i==null?U2:Array.isArray(i)?i:[i]}var Lt=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(Lt||(Lt={}));const z2=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ia;try{ia=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function W2(i){if(ia)return ia.test(i);for(let e=0;e<i.length;e++){let t=i[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||z2.test(t)))return!0}return!1}function G2(i){return e=>{if(!/\S/.test(e))return Lt.Space;if(W2(e))return Lt.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return Lt.Word;return Lt.Other}}class be{constructor(e,t,n,r,s,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)xr(this,l<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return xr(this,n),Xs(this,n)}update(...e){return Og(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:r}=t;for(let o of e.effects)o.is(wo.reconfigure)?(t&&(r=new Map,t.compartments.forEach((l,a)=>r.set(a,l)),t=null),r.set(o.value.compartment,o.value.extension)):o.is(de.reconfigure)?(t=null,n=o.value):o.is(de.appendConfig)&&(t=null,n=Mn(n).concat(o.value));let s;t?s=e.startState.values.slice():(t=Ks.resolve(n,r,this),s=new be(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new be(t,e.newDoc,e.newSelection,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:L.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),s=[n.range],o=Mn(n.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),c=this.changes(a.changes),h=c.map(r);for(let f=0;f<l;f++)s[f]=s[f].map(h);let u=r.mapDesc(c,!0);s.push(a.range.map(u)),r=r.compose(h),o=de.mapEffects(o,h).concat(de.mapEffects(Mn(a.effects),u))}return{changes:r,selection:L.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ze?e:ze.of(e,this.doc.length,this.facet(be.lineSeparator))}toText(e){return ve.of(e.split(this.facet(be.lineSeparator)||Jl))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(xr(this,t),Xs(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof kt&&this.config.address[r.id]!=null&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n){for(let s in n)if(Object.prototype.hasOwnProperty.call(e,s)){let o=n[s],l=e[s];r.push(o.init(a=>o.spec.fromJSON(l,a)))}}return be.create({doc:e.doc,selection:L.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Ks.resolve(e.extensions||[],new Map),n=e.doc instanceof ve?e.doc:ve.of((e.doc||"").split(t.staticFacet(be.lineSeparator)||Jl)),r=e.selection?e.selection instanceof L?e.selection:L.single(e.selection.anchor,e.selection.head):L.single(0);return yg(r,n.length),t.staticFacet(kg)||(r=r.asSingle()),new be(t,n,r,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(be.tabSize)}get lineBreak(){return this.facet(be.lineSeparator)||`
`}get readOnly(){return this.facet(Tg)}phrase(e,...t){for(let n of this.facet(be.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>t.length?n:t[s-1]})),e}languageDataAt(e,t,n=-1){let r=[];for(let s of this.facet(vg))for(let o of s(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return G2(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-n,l=e-n;for(;o>0;){let a=Ct(t,o,!1);if(s(t.slice(a,o))!=Lt.Word)break;o=a}for(;l<r;){let a=Ct(t,l);if(s(t.slice(l,a))!=Lt.Word)break;l=a}return o==l?null:L.range(o+n,l+n)}}be.allowMultipleSelections=kg;be.tabSize=X.define({combine:i=>i.length?i[0]:4});be.lineSeparator=xg;be.readOnly=Tg;be.phrases=X.define({compare(i,e){let t=Object.keys(i),n=Object.keys(e);return t.length==n.length&&t.every(r=>i[r]==e[r])}});be.languageData=vg;be.changeFilter=Sg;be.transactionFilter=Eg;be.transactionExtender=Ag;wo.reconfigure=de.define();function cn(i,e,t={}){let n={};for(let r of i)for(let s of Object.keys(r)){let o=r[s],l=n[s];if(l===void 0)n[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))n[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)n[r]===void 0&&(n[r]=e[r]);return n}class Qi{eq(e){return this==e}range(e,t=e){return na.create(e,t,this)}}Qi.prototype.startSide=Qi.prototype.endSide=0;Qi.prototype.point=!1;Qi.prototype.mapMode=Qe.TrackDel;let na=class Mg{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new Mg(e,t,n)}};function ra(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}class rc{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let s=n?this.to:this.from;for(let o=r,l=s.length;;){if(o==l)return o;let a=o+l>>1,c=s[a]-e||(n?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(e,t,n,r){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let n=[],r=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],h=this.from[a]+e,u=this.to[a]+e,f,d;if(h==u){let p=t.mapPos(h,c.startSide,c.mapMode);if(p==null||(f=d=p,c.startSide!=c.endSide&&(d=t.mapPos(h,c.endSide),d<f)))continue}else if(f=t.mapPos(h,c.startSide),d=t.mapPos(u,c.endSide),f>d||f==d&&c.startSide>0&&c.endSide<=0)continue;(d-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(l=Math.max(l,d-f)),n.push(c),r.push(f-o),s.push(d-o))}return{mapped:n.length?new rc(r,s,n,l):null,pos:o}}}class xe{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new xe(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(n&&(t=t.slice().sort(ra)),this.isEmpty)return t.length?xe.of(t):this;let l=new Dg(this,null,-1).goto(0),a=0,c=[],h=new en;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let u=t[a++];h.addInner(u.from,u.to,u.value)||c.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&h.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||s<l.from||o(l.from,l.to,l.value))&&(h.addInner(l.from,l.to,l.value)||c.push(na.create(l.from,l.to,l.value))),l.next());return h.finishInner(this.nextLayer.isEmpty&&!c.length?xe.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=e.touchesRange(l,l+a.length);if(c===!1)r=Math.max(r,a.maxPoint),t.push(a),n.push(e.mapPos(l));else if(c===!0){let{mapped:h,pos:u}=a.map(l,e);h&&(r=Math.max(r,h.maxPoint),t.push(h),n.push(u))}}let s=this.nextLayer.map(e);return t.length==0?s:new xe(n,t,s||xe.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return Rr.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Rr.from(e).goto(t)}static compare(e,t,n,r,s=-1){let o=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),a=iu(o,l,n),c=new sr(o,a,s),h=new sr(l,a,s);n.iterGaps((u,f,d)=>nu(c,u,h,f,d,r)),n.empty&&n.length==0&&nu(c,0,h,0,0,r)}static eq(e,t,n=0,r){r==null&&(r=1e9);let s=e.filter(h=>!h.isEmpty&&t.indexOf(h)<0),o=t.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=iu(s,o),a=new sr(s,l,0).goto(n),c=new sr(o,l,0).goto(n);for(;;){if(a.to!=c.to||!sa(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>r)return!0;a.next(),c.next()}}static spans(e,t,n,r,s=-1){let o=new sr(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let c=Math.min(o.to,n);if(o.point?(r.point(l,c,o.point,o.activeForPoint(o.to),a,o.pointRank),a=o.openEnd(c)+(o.to>c?1:0)):c>l&&(r.span(l,c,o.active,a),a=o.openEnd(c)),o.to>n)break;l=o.to,o.next()}return a}static of(e,t=!1){let n=new en;for(let r of e instanceof na?[e]:t?q2(e):e)n.add(r.from,r.to,r.value);return n.finish()}}xe.empty=new xe([],[],null,-1);function q2(i){if(i.length>1)for(let e=i[0],t=1;t<i.length;t++){let n=i[t];if(ra(e,n)>0)return i.slice().sort(ra);e=n}return i}xe.empty.nextLayer=xe.empty;class en{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new rc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new en)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(xe.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=xe.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function iu(i,e,t){let n=new Map;for(let s of i)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&n.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=n.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!t?.touchesRange(l,l+s.chunk[o].length)&&r.add(s.chunk[o])}return r}class Dg{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Rr{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new Dg(o,t,n,s));return r.length==1?r[0]:new Rr(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)nl(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)nl(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),nl(this.heap,0)}}}function nl(i,e){for(let t=i[e];;){let n=(e<<1)+1;if(n>=i.length)break;let r=i[n];if(n+1<i.length&&r.compare(i[n+1])>=0&&(r=i[n+1],n++),t.compare(r)<0)break;i[n]=t,i[e]=r,e=n}}class sr{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Rr.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){hs(this.active,e),hs(this.activeTo,e),hs(this.activeRank,e),this.minActive=ru(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;us(this.active,t,n),us(this.activeTo,t,r),us(this.activeRank,t,s),e&&us(e,t,this.cursor.from),this.minActive=ru(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null,r=0;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),n&&hs(n,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(n),this.cursor.from<e&&this.cursor.to>e&&r++,this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.from<e&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){let s=0;for(;s<n.length&&n[s]<e;)s++;this.openStart=s+r}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function nu(i,e,t,n,r,s){i.goto(e),t.goto(n);let o=n+r,l=n,a=n-e;for(;;){let c=i.to+a-t.to||i.endSide-t.endSide,h=c<0?i.to+a:t.to,u=Math.min(h,o);if(i.point||t.point?i.point&&t.point&&(i.point==t.point||i.point.eq(t.point))&&sa(i.activeForPoint(i.to+a),t.activeForPoint(t.to))||s.comparePoint(l,u,i.point,t.point):u>l&&!sa(i.active,t.active)&&s.compareRange(l,u,i.active,t.active),h>o)break;l=h,c<=0&&i.next(),c>=0&&t.next()}}function sa(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t]&&!i[t].eq(e[t]))return!1;return!0}function hs(i,e){for(let t=e,n=i.length-1;t<n;t++)i[t]=i[t+1];i.pop()}function us(i,e,t){for(let n=i.length-1;n>=e;n--)i[n+1]=i[n];i[e]=t}function ru(i,e){let t=-1,n=1e9;for(let r=0;r<e.length;r++)(e[r]-n||i[r].endSide-i[t].endSide)<0&&(t=r,n=e[r]);return t}function Yr(i,e,t=i.length){let n=0;for(let r=0;r<t;)i.charCodeAt(r)==9?(n+=e-n%e,r++):(n++,r=Ct(i,r));return n}function oa(i,e,t,n){for(let r=0,s=0;;){if(s>=e)return r;if(r==i.length)break;s+=i.charCodeAt(r)==9?t-s%t:1,r=Ct(i,r)}return n===!0?-1:i.length}const la="",su=typeof Symbol>"u"?"__"+la:Symbol.for(la),aa=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Li{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,c){let h=[],u=/^@(\w+)\b/.exec(o[0]),f=u&&u[1]=="keyframes";if(u&&l==null)return a.push(o[0]+";");for(let d in l){let p=l[d];if(/&/.test(d))s(d.split(/,\s*/).map(g=>o.map(m=>g.replace(/&/,m))).reduce((g,m)=>g.concat(m)),p,a);else if(p&&typeof p=="object"){if(!u)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(r(d),p,h,f)}else p!=null&&h.push(d.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(h.length||f)&&a.push((n&&!u&&!c?o.map(n):o).join(", ")+" {"+h.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ou[su]||1;return ou[su]=e+1,la+e.toString(36)}static mount(e,t,n){let r=e[aa],s=n&&n.nonce;r?s&&r.setNonce(s):r=new $2(e,s),r.mount(Array.isArray(t)?t:[t])}}let lu=new Map;class $2{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=lu.get(n);if(s)return e.adoptedStyleSheets=[s.sheet,...e.adoptedStyleSheets],e[aa]=s;this.sheet=new r.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],lu.set(n,this)}else{this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);let s=e.head||e;s.insertBefore(this.styleTag,s.firstChild)}this.modules=[],e[aa]=this}mount(e){let t=this.sheet,n=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],l=this.modules.indexOf(o);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,o),t)for(let a=0;a<o.rules.length;a++)t.insertRule(o.rules[a],n++)}else{for(;r<l;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!t){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Ri={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ir={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},K2=typeof navigator<"u"&&/Mac/.test(navigator.platform),X2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ze=0;Ze<10;Ze++)Ri[48+Ze]=Ri[96+Ze]=String(Ze);for(var Ze=1;Ze<=24;Ze++)Ri[Ze+111]="F"+Ze;for(var Ze=65;Ze<=90;Ze++)Ri[Ze]=String.fromCharCode(Ze+32),Ir[Ze]=String.fromCharCode(Ze);for(var rl in Ri)Ir.hasOwnProperty(rl)||(Ir[rl]=Ri[rl]);function J2(i){var e=K2&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||X2&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?Ir:Ri)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Js(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function Fn(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function Y2(i){let e=i.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Is(i,e){if(!e.anchorNode)return!1;try{return Fn(i,e.anchorNode)}catch{return!1}}function Nr(i){return i.nodeType==3?Vn(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function Ys(i,e,t,n){return t?au(i,e,t,n,-1)||au(i,e,t,n,1):!1}function Zs(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function au(i,e,t,n,r){for(;;){if(i==t&&e==n)return!0;if(e==(r<0?0:Br(i))){if(i.nodeName=="DIV")return!1;let s=i.parentNode;if(!s||s.nodeType!=1)return!1;e=Zs(i)+(r<0?0:1),i=s}else if(i.nodeType==1){if(i=i.childNodes[e+(r<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=r<0?Br(i):0}else return!1}}function Br(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}const Pg={left:0,right:0,top:0,bottom:0};function sc(i,e){let t=e?i.left:i.right;return{left:t,right:t,top:i.top,bottom:i.bottom}}function Z2(i){return{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function Q2(i,e,t,n,r,s,o,l){let a=i.ownerDocument,c=a.defaultView||window;for(let h=i;h;)if(h.nodeType==1){let u,f=h==a.body;if(f)u=Z2(c);else{if(h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let g=h.getBoundingClientRect();u={left:g.left,right:g.left+h.clientWidth,top:g.top,bottom:g.top+h.clientHeight}}let d=0,p=0;if(r=="nearest")e.top<u.top?(p=-(u.top-e.top+o),t>0&&e.bottom>u.bottom+p&&(p=e.bottom-u.bottom+p+o)):e.bottom>u.bottom&&(p=e.bottom-u.bottom+o,t<0&&e.top-p<u.top&&(p=-(u.top+p-e.top+o)));else{let g=e.bottom-e.top,m=u.bottom-u.top;p=(r=="center"&&g<=m?e.top+g/2-m/2:r=="start"||r=="center"&&t<0?e.top-o:e.bottom-m+o)-u.top}if(n=="nearest"?e.left<u.left?(d=-(u.left-e.left+s),t>0&&e.right>u.right+d&&(d=e.right-u.right+d+s)):e.right>u.right&&(d=e.right-u.right+s,t<0&&e.left<u.left+d&&(d=-(u.left+d-e.left+s))):d=(n=="center"?e.left+(e.right-e.left)/2-(u.right-u.left)/2:n=="start"==l?e.left-s:e.right-(u.right-u.left)+s)-u.left,d||p)if(f)c.scrollBy(d,p);else{let g=0,m=0;if(p){let _=h.scrollTop;h.scrollTop+=p,m=h.scrollTop-_}if(d){let _=h.scrollLeft;h.scrollLeft+=d,g=h.scrollLeft-_}e={left:e.left-g,top:e.top-m,right:e.right-g,bottom:e.bottom-m},g&&Math.abs(g-d)<1&&(n="nearest"),m&&Math.abs(m-p)<1&&(r="nearest")}if(f)break;h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}class ek{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let yn=null;function Lg(i){if(i.setActive)return i.setActive();if(yn)return i.focus(yn);let e=[];for(let t=i;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(i.focus(yn==null?{get preventScroll(){return yn={preventScroll:!0},!0}}:void 0),!yn){yn=!1;for(let t=0;t<e.length;){let n=e[t++],r=e[t++],s=e[t++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=s&&(n.scrollLeft=s)}}}let cu;function Vn(i,e,t=e){let n=cu||(cu=document.createRange());return n.setEnd(i,t),n.setStart(i,e),n}function Dn(i,e,t){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0},r=new KeyboardEvent("keydown",n);r.synthetic=!0,i.dispatchEvent(r);let s=new KeyboardEvent("keyup",n);return s.synthetic=!0,i.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function tk(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function Rg(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function ik(i,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(;;)if(n){if(t.nodeType!=1)return!1;let r=t.childNodes[n-1];r.contentEditable=="false"?n--:(t=r,n=Br(t))}else{if(t==i)return!0;n=Zs(t),t=t.parentNode}}class lt{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new lt(e.parentNode,Zs(e),t)}static after(e,t){return new lt(e.parentNode,Zs(e)+1,t)}}const oc=[];class Pe{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,n=null,r;for(let s of this.children){if(s.dirty){if(!s.dom&&(r=n?n.nextSibling:t.firstChild)){let o=Pe.get(r);(!o||!o.parent&&o.canReuseDOM(s))&&s.reuseDOM(r)}s.sync(e),s.dirty=0}if(r=n?n.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&r!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;r&&r!=s.dom;)r=hu(r);else t.insertBefore(s.dom,r);n=s.dom}for(r=n?n.nextSibling:t.firstChild,r&&e&&e.node==t&&(e.written=!0);r;)r=hu(r)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=Br(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Pe.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==n)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,s=-1,o=-1,l=-1;for(let a=0,c=n,h=n;a<this.children.length;a++){let u=this.children[a],f=c+u.length;if(c<e&&f>t)return u.domBoundsAround(e,t,c);if(f>=e&&r==-1&&(r=a,s=c),c>t&&u.dom.parentNode==this.dom){o=a,l=h;break}h=f,c=f+u.breakAfter}return{from:s,to:l<0?n+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=oc){this.markDirty();for(let r=e;r<t;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...n);for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Ig(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,n,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}Pe.prototype.breakAfter=0;function hu(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}class Ig{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Ng(i,e,t,n,r,s,o,l,a){let{children:c}=i,h=c.length?c[e]:null,u=s.length?s[s.length-1]:null,f=u?u.breakAfter:o;if(!(e==n&&h&&!o&&!f&&s.length<2&&h.merge(t,r,s.length?u:null,t==0,l,a))){if(n<c.length){let d=c[n];d&&r<d.length?(e==n&&(d=d.split(r),r=0),!f&&u&&d.merge(0,r,u,!0,0,a)?s[s.length-1]=d:(r&&d.merge(0,r,null,!1,0,a),s.push(d))):d?.breakAfter&&(u?u.breakAfter=1:o=1),n++}for(h&&(h.breakAfter=o,t>0&&(!o&&s.length&&h.merge(t,h.length,s[0],!1,l,0)?h.breakAfter=s.shift().breakAfter:(t<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(t,h.length,null,!1,l,0),e++));e<n&&s.length;)if(c[n-1].become(s[s.length-1]))n--,s.pop(),a=s.length?0:l;else if(c[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&n<c.length&&!c[e-1].breakAfter&&c[n].merge(0,0,c[e-1],!1,l,a)&&e--,(e<n||s.length)&&i.replaceChildren(e,n,s)}}function Bg(i,e,t,n,r,s){let o=i.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:c,off:h}=o.findPos(e,-1),u=e-t;for(let f of n)u+=f.length;i.length+=u,Ng(i,c,h,l,a,n,0,r,s)}let Tt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},ca=typeof document<"u"?document:{documentElement:{style:{}}};const ha=/Edge\/(\d+)/.exec(Tt.userAgent),Hg=/MSIE \d/.test(Tt.userAgent),ua=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Tt.userAgent),vo=!!(Hg||ua||ha),uu=!vo&&/gecko\/(\d+)/i.test(Tt.userAgent),sl=!vo&&/Chrome\/(\d+)/.exec(Tt.userAgent),fu="webkitFontSmoothing"in ca.documentElement.style,Fg=!vo&&/Apple Computer/.test(Tt.vendor),du=Fg&&(/Mobile\/\w+/.test(Tt.userAgent)||Tt.maxTouchPoints>2);var $={mac:du||/Mac/.test(Tt.platform),windows:/Win/.test(Tt.platform),linux:/Linux|X11/.test(Tt.platform),ie:vo,ie_version:Hg?ca.documentMode||6:ua?+ua[1]:ha?+ha[1]:0,gecko:uu,gecko_version:uu?+(/Firefox\/(\d+)/.exec(Tt.userAgent)||[0,0])[1]:0,chrome:!!sl,chrome_version:sl?+sl[1]:0,ios:du,android:/Android\b/.test(Tt.userAgent),webkit:fu,safari:Fg,webkit_version:fu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:ca.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const nk=256;class Ii extends Pe{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return n&&(!(n instanceof Ii)||this.length-(t-e)+n.length>nk)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Ii(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new lt(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return fa(this.dom,e,t)}}class mi extends Pe{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let r of t)r.setParent(this)}setAttrs(e){if(Rg(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,n,r,s,o){return n&&(!(n instanceof mi&&n.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(Bg(this,e,t,n?n.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,s=0;for(let l of this.children){let a=n+l.length;a>e&&t.push(n<e?l.split(e-n):l),r<0&&n>=e&&(r=s),n=a,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new mi(this.mark,t,o)}domAtPos(e){return Ug(this,e)}coordsAt(e,t){return Wg(this,e,t)}}function fa(i,e,t){let n=i.nodeValue.length;e>n&&(e=n);let r=e,s=e,o=0;e==0&&t<0||e==n&&t>=0?$.chrome||$.gecko||(e?(r--,o=1):s<n&&(s++,o=-1)):t<0?r--:s<n&&s++;let l=Vn(i,r,s).getClientRects();if(!l.length)return Pg;let a=l[(o?o<0:t>=0)?0:l.length-1];return $.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?sc(a,o<0):a||null}class Mi extends Pe{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new(e.customView||Mi)(e,t,n)}split(e){let t=Mi.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,s,o){return n&&(!(n instanceof Mi)||!this.widget.compare(n.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Mi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ve.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):ve.empty}domAtPos(e){return e==0?lt.before(this.dom):lt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.dom.getClientRects(),r=null;if(!n.length)return Pg;for(let s=e>0?n.length-1:0;r=n[s],!(e>0?s==0:s==n.length-1||r.top<r.bottom);s+=e>0?-1:1);return this.length?r:sc(r,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Vg extends Mi{domAtPos(e){let{topView:t,text:n}=this.widget;return t?da(e,0,t,n,(r,s)=>r.domAtPos(s),r=>new lt(n,Math.min(r,n.nodeValue.length))):new lt(n,Math.min(e,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:n,text:r}=this.widget;return n?jg(e,t,n,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:n,text:r}=this.widget;return n?da(e,t,n,r,(s,o,l)=>s.coordsAt(o,l),(s,o)=>fa(r,s,o)):fa(r,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function da(i,e,t,n,r,s){if(t instanceof mi){for(let o=t.dom.firstChild;o;o=o.nextSibling){let l=Pe.get(o);if(!l)return s(i,e);let a=Fn(o,n),c=l.length+(a?n.nodeValue.length:0);if(i<c||i==c&&l.getSide()<=0)return a?da(i,e,l,n,r,s):r(l,i,e);i-=c}return r(t,t.length,-1)}else return t.dom==n?s(i,e):r(t,i,e)}function jg(i,e,t,n){if(t instanceof mi)for(let r of t.children){let s=0,o=Fn(r.dom,n);if(Fn(r.dom,i))return s+(o?jg(i,e,r,n):r.localPosFromDOM(i,e));s+=o?n.nodeValue.length:r.length}else if(t.dom==n)return Math.min(e,n.nodeValue.length);return t.localPosFromDOM(i,e)}class jn extends Pe{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof jn&&e.side==this.side}split(){return new jn(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return lt.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),n=rk(this,this.side>0?-1:1);return n&&n.top<t.bottom&&n.bottom>t.top?{left:t.left,right:t.right,top:n.top,bottom:n.bottom}:t}get overrideDOMText(){return ve.empty}}Ii.prototype.children=Mi.prototype.children=jn.prototype.children=oc;function rk(i,e){let t=i.parent,n=t?t.children.indexOf(i):-1;for(;t&&n>=0;)if(e<0?n>0:n<t.children.length){let r=t.children[n+e];if(r instanceof Ii){let s=r.coordsAt(e<0?r.length:0,e);if(s)return s}n+=e}else if(t instanceof mi&&t.parent)n=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let r=t.dom.lastChild;if(r&&r.nodeName=="BR")return r.getClientRects()[0];break}}function Ug(i,e){let t=i.dom,{children:n}=i,r=0;for(let s=0;r<n.length;r++){let o=n[r],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let o=n[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=r;s<n.length;s++){let o=n[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new lt(t,0)}function zg(i,e,t){let n,{children:r}=i;t>0&&e instanceof mi&&r.length&&(n=r[r.length-1])instanceof mi&&n.mark.eq(e.mark)?zg(n,e.children[0],t-1):(r.push(e),e.setParent(i)),i.length+=e.length}function Wg(i,e,t){let n=null,r=-1,s=null,o=-1;function l(c,h){for(let u=0,f=0;u<c.children.length&&f<=h;u++){let d=c.children[u],p=f+d.length;p>=h&&(d.children.length?l(d,h-f):!s&&(p>h||f==p&&d.getSide()>0)?(s=d,o=h-f):(f<h||f==p&&d.getSide()<0)&&(n=d,r=h-f)),f=p}}l(i,e);let a=(t<0?n:s)||n||s;return a?a.coordsAt(Math.max(0,a==n?r:o),t):sk(i)}function sk(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let t=Nr(e);return t[t.length-1]||null}function pa(i,e){for(let t in i)t=="class"&&e.class?e.class+=" "+i.class:t=="style"&&e.style?e.style+=";"+i.style:e[t]=i[t];return e}function lc(i,e){if(i==e)return!0;if(!i||!e)return!1;let t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r of t)if(n.indexOf(r)==-1||i[r]!==e[r])return!1;return!0}function ma(i,e,t){let n=null;if(e)for(let r in e)t&&r in t||i.removeAttribute(n=r);if(t)for(let r in t)e&&e[r]==t[r]||i.setAttribute(n=r,t[r]);return!!n}class gi{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var Oe=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(Oe||(Oe={}));class ue extends Qi{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new ko(e)}static widget(e){let t=e.side||0,n=!!e.block;return t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,new tn(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,r;if(e.isBlockGap)n=-5e8,r=4e8;else{let{start:s,end:o}=Gg(e,t);n=(s?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new tn(e,n,r,t,e.widget||null,!0)}static line(e){return new Zr(e)}static set(e,t=!1){return xe.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ue.none=xe.empty;class ko extends ue{constructor(e){let{start:t,end:n}=Gg(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof ko&&this.tagName==e.tagName&&this.class==e.class&&lc(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ko.prototype.point=!1;class Zr extends ue{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Zr&&lc(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Zr.prototype.mapMode=Qe.TrackBefore;Zr.prototype.point=!0;class tn extends ue{constructor(e,t,n,r,s,o){super(t,n,s,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?Qe.TrackBefore:Qe.TrackAfter:Qe.TrackDel}get type(){return this.startSide<this.endSide?Oe.WidgetRange:this.startSide<=0?Oe.WidgetBefore:Oe.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof tn&&ok(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}tn.prototype.point=!0;function Gg(i,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=i;return t==null&&(t=i.inclusive),n==null&&(n=i.inclusive),{start:t??e,end:n??e}}function ok(i,e){return i==e||!!(i&&e&&i.compare(e))}function ga(i,e,t,n=0){let r=t.length-1;r>=0&&t[r]+n>=i?t[r]=Math.max(t[r],e):t.push(i,e)}class dt extends Pe{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,s,o){if(n){if(!(n instanceof dt))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),Bg(this,e,t,n?n.children:[],s,o),!0}split(e){let t=new dt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let s=n;s<this.children.length;s++)t.append(this.children[s],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){lc(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){zg(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=pa(t,this.attrs||{})),n&&(this.attrs=pa({class:n},this.attrs||{}))}domAtPos(e){return Ug(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(Rg(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(ma(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let n=this.dom.lastChild;for(;n&&Pe.get(n)instanceof mi;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((t=Pe.get(n))===null||t===void 0?void 0:t.isEditable)==!1&&(!$.ios||!this.children.some(r=>r instanceof Ii))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Ii)||/[^ -~]/.test(t.text))return null;let n=Nr(t.dom);if(n.length!=1)return null;e+=n[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return Wg(this,e,t)}become(e){return!1}get type(){return Oe.Text}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let s=e.children[n],o=r+s.length;if(o>=t){if(s instanceof dt)return s;if(o>t)break}r=o+s.breakAfter}return null}}class Yi extends Pe{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,s,o){return n&&(!(n instanceof Yi)||!this.widget.compare(n.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?lt.before(this.dom):lt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Yi(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return oc}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ve.empty}domBoundsAround(){return null}become(e){return e instanceof Yi&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ac{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Yi&&e.type==Oe.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new dt),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(fs(new jn(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,n)),this.getLine().append(fs(new Ii(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,s,o){if(this.disallowBlockEffectsFor[o]&&n instanceof tn){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(n instanceof tn)if(n.block){let{type:a}=n;a==Oe.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Yi(n.widget||new pu("div"),l,a))}else{let a=Mi.create(n.widget||new pu("span"),l,l?0:n.startSide),c=this.atCursorPos&&!a.isEditable&&s<=r.length&&(e<t||n.startSide>0),h=!a.isEditable&&(e<t||n.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(u.append(fs(new jn(1),r),s),s=r.length+Math.max(0,s-r.length)),u.append(fs(a,r),s),this.atCursorPos=h,this.pendingBuffer=h?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,n,r,s){let o=new ac(e,t,n,s);return o.openEnd=xe.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function fs(i,e){for(let t of e)i=new mi(t,[i],i.length);return i}class pu extends gi{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const qg=X.define(),$g=X.define(),Kg=X.define(),Xg=X.define(),_a=X.define(),Jg=X.define(),Yg=X.define({combine:i=>i.some(e=>e)}),Zg=X.define({combine:i=>i.some(e=>e)});class Qs{constructor(e,t="nearest",n="nearest",r=5,s=5){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new Qs(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const mu=de.define({map:(i,e)=>i.map(e)});function Kt(i,e,t){let n=i.facet(Xg);n.length?n[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const xo=X.define({combine:i=>i.length?i[0]:!0});let lk=0;const mr=X.define();class ct{constructor(e,t,n,r){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=r(this)}static define(e,t){const{eventHandlers:n,provide:r,decorations:s}=t||{};return new ct(lk++,e,n,o=>{let l=[mr.of(o)];return s&&l.push(Hr.of(a=>{let c=a.plugin(o);return c?s(c):ue.none})),r&&l.push(r(o)),l})}static fromClass(e,t){return ct.define(n=>new e(n),t)}}class ol{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Kt(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Kt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){Kt(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Qg=X.define(),e0=X.define(),Hr=X.define(),t0=X.define(),i0=X.define(),gr=X.define();class pi{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new pi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let r=0,s=0,o=0,l=0;;r++){let a=r==e.length?null:e[r],c=o-l,h=a?a.fromB:1e9;for(;s<t.length&&t[s]<h;){let u=t[s],f=t[s+1],d=Math.max(l,u),p=Math.min(h,f);if(d<=p&&new pi(d+c,p+c,d,p).addToSet(n),f>h)break;s+=2}if(!a)return n;new pi(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,l=a.toB}}}class eo{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=ze.empty(this.startState.doc.length);for(let o of n)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,l,a,c)=>r.push(new pi(o,l,a,c))),this.changedRanges=r;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,n){return new eo(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Be=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(Be||(Be={}));const ba=Be.LTR,ak=Be.RTL;function n0(i){let e=[];for(let t=0;t<i.length;t++)e.push(1<<+i[t]);return e}const ck=n0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),hk=n0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ya=Object.create(null),ei=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),t=i.charCodeAt(1);ya[e]=t,ya[t]=-e}function uk(i){return i<=247?ck[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?hk[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8203?256:64336<=i&&i<=65023?4:i==8204?256:1}const fk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Pn{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?ak:ba}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==n)return o;(s<0||(r!=0?r<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const Ne=[];function dk(i,e){let t=i.length,n=e==ba?1:2,r=e==ba?2:1;if(!i||n==1&&!fk.test(i))return r0(t);for(let o=0,l=n,a=n;o<t;o++){let c=uk(i.charCodeAt(o));c==512?c=l:c==8&&a==4&&(c=16),Ne[o]=c==4?2:c,c&7&&(a=c),l=c}for(let o=0,l=n,a=n;o<t;o++){let c=Ne[o];if(c==128)o<t-1&&l==Ne[o+1]&&l&24?c=Ne[o]=l:Ne[o]=256;else if(c==64){let h=o+1;for(;h<t&&Ne[h]==64;)h++;let u=o&&l==8||h<t&&Ne[h]==8?a==1?1:8:256;for(let f=o;f<h;f++)Ne[f]=u;o=h-1}else c==8&&a==1&&(Ne[o]=1);l=c,c&7&&(a=c)}for(let o=0,l=0,a=0,c,h,u;o<t;o++)if(h=ya[c=i.charCodeAt(o)])if(h<0){for(let f=l-3;f>=0;f-=3)if(ei[f+1]==-h){let d=ei[f+2],p=d&2?n:d&4?d&1?r:n:0;p&&(Ne[o]=Ne[ei[f]]=p),l=f;break}}else{if(ei.length==189)break;ei[l++]=o,ei[l++]=c,ei[l++]=a}else if((u=Ne[o])==2||u==1){let f=u==n;a=f?0:1;for(let d=l-3;d>=0;d-=3){let p=ei[d+2];if(p&2)break;if(f)ei[d+2]|=2;else{if(p&4)break;ei[d+2]|=4}}}for(let o=0;o<t;o++)if(Ne[o]==256){let l=o+1;for(;l<t&&Ne[l]==256;)l++;let a=(o?Ne[o-1]:n)==1,c=(l<t?Ne[l]:n)==1,h=a==c?a?1:2:n;for(let u=o;u<l;u++)Ne[u]=h;o=l-1}let s=[];if(n==1)for(let o=0;o<t;){let l=o,a=Ne[o++]!=1;for(;o<t&&a==(Ne[o]!=1);)o++;if(a)for(let c=o;c>l;){let h=c,u=Ne[--c]!=2;for(;c>l&&u==(Ne[c-1]!=2);)c--;s.push(new Pn(c,h,u?2:1))}else s.push(new Pn(l,o,0))}else for(let o=0;o<t;){let l=o,a=Ne[o++]==2;for(;o<t&&a==(Ne[o]==2);)o++;s.push(new Pn(l,o,a?1:2))}return s}function r0(i){return[new Pn(0,i,0)]}let s0="";function pk(i,e,t,n,r){var s;let o=n.head-i.from,l=-1;if(o==0){if(!r||!i.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),l=0)}else if(o==i.length){if(r)return null;let f=e[e.length-1];f.level!=t&&(o=f.side(!0,t),l=e.length-1)}l<0&&(l=Pn.find(e,o,(s=n.bidiLevel)!==null&&s!==void 0?s:-1,n.assoc));let a=e[l];o==a.side(r,t)&&(a=e[l+=r?1:-1],o=a.side(!r,t));let c=r==(a.dir==t),h=Ct(i.text,o,c);if(s0=i.text.slice(Math.min(o,h),Math.max(o,h)),h!=a.side(r,t))return L.cursor(h+i.from,c?-1:1,a.level);let u=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return!u&&a.level!=t?L.cursor(r?i.to:i.from,r?-1:1,t):u&&u.level<a.level?L.cursor(u.side(!r,t)+i.from,r?1:-1,u.level):L.cursor(h+i.from,r?-1:1,a.level)}const Di="";class o0{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(be.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Di}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r),this.readNode(r);let s=r.nextSibling;if(s==t)break;let o=Pe.get(r),l=Pe.get(s);(o&&l?o.breakAfter:(o?o.breakAfter:gu(r))||gu(s)&&(r.nodeName!="BR"||r.cmIgnore))&&this.lineBreak(),r=s}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(l=r.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(n,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);n=s+o}}readNode(e){if(e.cmIgnore)return;let t=Pe.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let r=n.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function gu(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}class _u{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class bu extends Pe{constructor(e){super(),this.view=e,this.compositionDeco=ue.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new dt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new pi(0,0,0,e.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:l})=>l<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=ue.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=gk(this.view,e.changes)),($.ie||$.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let n=this.decorations,r=this.updateDeco(),s=wk(n,r,e.changes);return t=pi.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=$.chrome||$.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||n.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Yi&&s.widget instanceof yu&&r.push(s.dom);n.updateGaps(r)}updateChildren(e,t){let n=this.childCursor(t);for(let r=e.length-1;;r--){let s=r>=0?e[r]:null;if(!s)break;let{fromA:o,toA:l,fromB:a,toB:c}=s,{content:h,breakAtStart:u,openStart:f,openEnd:d}=ac.build(this.view.state.doc,a,c,this.decorations,this.dynamicDecorationMap),{i:p,off:g}=n.findPos(l,1),{i:m,off:_}=n.findPos(o,-1);Ng(this,m,_,p,g,h,u,f,d)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection()))return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,s=this.domAtPos(r.anchor),o=r.empty?s:this.domAtPos(r.head);if($.gecko&&r.empty&&mk(s)){let a=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(a,s.node.childNodes[s.offset]||null)),s=o=new lt(a,0),n=!0}let l=this.view.observer.selectionRange;(n||!l.focusNode||!Ys(s.node,s.offset,l.anchorNode,l.anchorOffset)||!Ys(o.node,o.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{$.android&&$.chrome&&this.dom.contains(l.focusNode)&&vk(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let a=Js(this.view.root);if(a)if(r.empty){if($.gecko){let c=bk(s.node,s.offset);if(c&&c!=3){let h=a0(s.node,s.offset,c==1?1:-1);h&&(s=new lt(h,c==1?0:h.nodeValue.length))}}a.collapse(s.node,s.offset),r.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=r.bidiLevel)}else if(a.extend){a.collapse(s.node,s.offset);try{a.extend(o.node,o.offset)}catch{}}else{let c=document.createRange();r.anchor>r.head&&([s,o]=[o,s]),c.setEnd(o.node,o.offset),c.setStart(s.node,s.offset),a.removeAllRanges(),a.addRange(c)}}),this.view.observer.setSelectionRange(s,o)),this.impreciseAnchor=s.precise?null:new lt(l.anchorNode,l.anchorOffset),this.impreciseHead=o.precise?null:new lt(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,n=Js(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=dt.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!a||!c||a.bottom>c.top)return;let h=this.domAtPos(t.head+t.assoc);n.collapse(h.node,h.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&n.collapse(r,s)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||Is(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let n=Pe.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(n<r.length||r instanceof dt)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,r=this.children.length-1;;r--){let s=this.children[r],o=n-s.breakAfter-s.length;if(e>o||e==o&&s.type!=Oe.WidgetBefore&&s.type!=Oe.WidgetAfter&&(!r||t==2||this.children[r-1].breakAfter||this.children[r-1].type==Oe.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);n=o}}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Be.LTR;for(let c=0,h=0;h<this.children.length;h++){let u=this.children[h],f=c+u.length;if(f>r)break;if(c>=n){let d=u.dom.getBoundingClientRect();if(t.push(d.height),o){let p=u.dom.lastChild,g=p?Nr(p):[];if(g.length){let m=g[g.length-1],_=a?m.right-d.left:d.right-m.left;_>l&&(l=_,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Be.RTL:Be.LTR}measureTextSize(){for(let r of this.children)if(r instanceof dt){let s=r.measureTextSize();if(s)return s}let e=document.createElement("div"),t,n;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=Nr(e.firstChild)[0];t=e.getBoundingClientRect().height,n=r?r.width/27:7,e.remove()}),{lineHeight:t,charWidth:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Ig(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let s=r==t.viewports.length?null:t.viewports[r],o=s?s.from-1:this.length;if(o>n){let l=t.lineBlockAt(o).bottom-t.lineBlockAt(n).top;e.push(ue.replace({widget:new yu(l),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!s)break;n=s.to+1}return ue.set(e)}updateDeco(){let e=this.view.state.facet(Hr).map((t,n)=>(this.dynamicDecorationMap[n]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!n)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,r.left),top:Math.min(n.top,r.top),right:Math.max(n.right,r.right),bottom:Math.max(n.bottom,r.bottom)});let s=0,o=0,l=0,a=0;for(let h of this.view.state.facet(i0).map(u=>u(this.view)))if(h){let{left:u,right:f,top:d,bottom:p}=h;u!=null&&(s=Math.max(s,u)),f!=null&&(o=Math.max(o,f)),d!=null&&(l=Math.max(l,d)),p!=null&&(a=Math.max(a,p))}let c={left:n.left-s,top:n.top-l,right:n.right+o,bottom:n.bottom+a};Q2(this.view.scrollDOM,c,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Be.LTR)}}function mk(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}class yu extends gi{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function l0(i){let e=i.observer.selectionRange,t=e.focusNode&&a0(e.focusNode,e.focusOffset,0);if(!t)return null;let n=i.docView.nearest(t);if(!n)return null;if(n instanceof dt){let r=t;for(;r.parentNode!=n.dom;)r=r.parentNode;let s=r.previousSibling;for(;s&&!Pe.get(s);)s=s.previousSibling;let o=s?Pe.get(s).posAtEnd:n.posAtStart;return{from:o,to:o,node:r,text:t}}else{for(;;){let{parent:s}=n;if(!s)return null;if(s instanceof dt)break;n=s}let r=n.posAtStart;return{from:r,to:r+n.length,node:n.dom,text:t}}}function gk(i,e){let t=l0(i);if(!t)return ue.none;let{from:n,to:r,node:s,text:o}=t,l=e.mapPos(n,1),a=Math.max(l,e.mapPos(r,-1)),{state:c}=i,h=s.nodeType==3?s.nodeValue:new o0([],c).readRange(s.firstChild,null).text;if(a-l<h.length)if(c.doc.sliceString(l,Math.min(c.doc.length,l+h.length),Di)==h)a=l+h.length;else if(c.doc.sliceString(Math.max(0,a-h.length),a,Di)==h)l=a-h.length;else return ue.none;else if(c.doc.sliceString(l,a,Di)!=h)return ue.none;let u=Pe.get(s);return u instanceof Vg?u=u.widget.topView:u&&(u.parent=null),ue.set(ue.replace({widget:new _k(s,o,u),inclusive:!0}).range(l,a))}class _k extends gi{constructor(e,t,n){super(),this.top=e,this.text=t,this.topView=n}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Vg}}function a0(i,e,t){for(;;){if(i.nodeType==3)return i;if(i.nodeType==1&&e>0&&t<=0)i=i.childNodes[e-1],e=Br(i);else if(i.nodeType==1&&e<i.childNodes.length&&t>=0)i=i.childNodes[e],e=0;else return null}}function bk(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}class yk{constructor(){this.changes=[]}compareRange(e,t){ga(e,t,this.changes)}comparePoint(e,t){ga(e,t,this.changes)}}function wk(i,e,t){let n=new yk;return xe.compare(i,e,t,n),n.changes}function vk(i,e){for(let t=i;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function kk(i,e,t=1){let n=i.charCategorizer(e),r=i.doc.lineAt(e),s=e-r.from;if(r.length==0)return L.cursor(e);s==0?t=1:s==r.length&&(t=-1);let o=s,l=s;t<0?o=Ct(r.text,s,!1):l=Ct(r.text,s);let a=n(r.text.slice(o,l));for(;o>0;){let c=Ct(r.text,o,!1);if(n(r.text.slice(c,o))!=a)break;o=c}for(;l<r.length;){let c=Ct(r.text,l);if(n(r.text.slice(l,c))!=a)break;l=c}return L.range(o+r.from,l+r.from)}function xk(i,e){return e.left>i?e.left-i:Math.max(0,i-e.right)}function Sk(i,e){return e.top>i?e.top-i:Math.max(0,i-e.bottom)}function ll(i,e){return i.top<e.bottom-1&&i.bottom>e.top+1}function wu(i,e){return e<i.top?{top:e,left:i.left,right:i.right,bottom:i.bottom}:i}function vu(i,e){return e>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:e}:i}function wa(i,e,t){let n,r,s,o,l=!1,a,c,h,u;for(let p=i.firstChild;p;p=p.nextSibling){let g=Nr(p);for(let m=0;m<g.length;m++){let _=g[m];r&&ll(r,_)&&(_=wu(vu(_,r.bottom),r.top));let k=xk(e,_),y=Sk(t,_);if(k==0&&y==0)return p.nodeType==3?ku(p,e,t):wa(p,e,t);(!n||o>y||o==y&&s>k)&&(n=p,r=_,s=k,o=y,l=!k||(k>0?m<g.length-1:m>0)),k==0?t>_.bottom&&(!h||h.bottom<_.bottom)?(a=p,h=_):t<_.top&&(!u||u.top>_.top)&&(c=p,u=_):h&&ll(h,_)?h=vu(h,_.bottom):u&&ll(u,_)&&(u=wu(u,_.top))}}if(h&&h.bottom>=t?(n=a,r=h):u&&u.top<=t&&(n=c,r=u),!n)return{node:i,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(n.nodeType==3)return ku(n,f,t);if(l&&n.contentEditable!="false")return wa(n,f,t);let d=Array.prototype.indexOf.call(i.childNodes,n)+(e>=(r.left+r.right)/2?1:0);return{node:i,offset:d}}function ku(i,e,t){let n=i.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<n;l++){let a=Vn(i,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let h=a[c];if(h.top==h.bottom)continue;o||(o=e-h.left);let u=(h.top>t?h.top-t:t-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&u<s){let f=e>=(h.left+h.right)/2,d=f;if(($.chrome||$.gecko)&&Vn(i,l).getBoundingClientRect().left==h.right&&(d=!f),u<=0)return{node:i,offset:l+(d?1:0)};r=l+(d?1:0),s=u}}}return{node:i,offset:r>-1?r:o>0?i.nodeValue.length:0}}function c0(i,{x:e,y:t},n,r=-1){var s;let o=i.contentDOM.getBoundingClientRect(),l=o.top+i.viewState.paddingTop,a,{docHeight:c}=i.viewState,h=t-l;if(h<0)return 0;if(h>c)return i.state.doc.length;for(let _=i.defaultLineHeight/2,k=!1;a=i.elementAtHeight(h),a.type!=Oe.Text;)for(;h=r>0?a.bottom+_:a.top-_,!(h>=0&&h<=c);){if(k)return n?null:0;k=!0,r=-r}t=l+h;let u=a.from;if(u<i.viewport.from)return i.viewport.from==0?0:n?null:xu(i,o,a,e,t);if(u>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:n?null:xu(i,o,a,e,t);let f=i.dom.ownerDocument,d=i.root.elementFromPoint?i.root:f,p=d.elementFromPoint(e,t);p&&!i.contentDOM.contains(p)&&(p=null),p||(e=Math.max(o.left+1,Math.min(o.right-1,e)),p=d.elementFromPoint(e,t),p&&!i.contentDOM.contains(p)&&(p=null));let g,m=-1;if(p&&((s=i.docView.nearest(p))===null||s===void 0?void 0:s.isEditable)!=!1){if(f.caretPositionFromPoint){let _=f.caretPositionFromPoint(e,t);_&&({offsetNode:g,offset:m}=_)}else if(f.caretRangeFromPoint){let _=f.caretRangeFromPoint(e,t);_&&({startContainer:g,startOffset:m}=_,(!i.contentDOM.contains(g)||$.safari&&Ek(g,m,e)||$.chrome&&Ak(g,m,e))&&(g=void 0))}}if(!g||!i.docView.dom.contains(g)){let _=dt.find(i.docView,u);if(!_)return h>a.top+a.height/2?a.to:a.from;({node:g,offset:m}=wa(_.dom,e,t))}return i.docView.posFromDOM(g,m)}function xu(i,e,t,n,r){let s=Math.round((n-e.left)*i.defaultCharacterWidth);if(i.lineWrapping&&t.height>i.defaultLineHeight*1.5){let l=Math.floor((r-t.top)/i.defaultLineHeight);s+=l*i.viewState.heightOracle.lineLength}let o=i.state.sliceDoc(t.from,t.to);return t.from+oa(o,s,i.state.tabSize)}function Ek(i,e,t){let n;if(i.nodeType!=3||e!=(n=i.nodeValue.length))return!1;for(let r=i.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Vn(i,n-1,n).getBoundingClientRect().left>t}function Ak(i,e,t){if(e!=0)return!1;for(let r=i;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let n=i.nodeType==1?i.getBoundingClientRect():Vn(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function Tk(i,e,t,n){let r=i.state.doc.lineAt(e.head),s=!n||!i.lineWrapping?null:i.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let a=i.dom.getBoundingClientRect(),c=i.textDirectionAt(r.from),h=i.posAtCoords({x:t==(c==Be.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(h!=null)return L.cursor(h,t?-1:1)}let o=dt.find(i.docView,e.head),l=o?t?o.posAtEnd:o.posAtStart:t?r.to:r.from;return L.cursor(l,t?-1:1)}function Su(i,e,t,n){let r=i.state.doc.lineAt(e.head),s=i.bidiSpans(r),o=i.textDirectionAt(r.from);for(let l=e,a=null;;){let c=pk(r,s,o,l,t),h=s0;if(!c){if(r.number==(t?i.state.doc.lines:1))return l;h=`
`,r=i.state.doc.line(r.number+(t?1:-1)),s=i.bidiSpans(r),c=L.cursor(t?r.from:r.to)}if(a){if(!a(h))return l}else{if(!n)return c;a=n(h)}l=c}}function Ck(i,e,t){let n=i.state.charCategorizer(e),r=n(t);return s=>{let o=n(s);return r==Lt.Space&&(r=o),r==o}}function Ok(i,e,t,n){let r=e.head,s=t?1:-1;if(r==(t?i.state.doc.length:0))return L.cursor(r,e.assoc);let o=e.goalColumn,l,a=i.contentDOM.getBoundingClientRect(),c=i.coordsAtPos(r),h=i.documentTop;if(c)o==null&&(o=c.left-a.left),l=s<0?c.top:c.bottom;else{let d=i.viewState.lineBlockAt(r);o==null&&(o=Math.min(a.right-a.left,i.defaultCharacterWidth*(r-d.from))),l=(s<0?d.top:d.bottom)+h}let u=a.left+o,f=n??i.defaultLineHeight>>1;for(let d=0;;d+=10){let p=l+(f+d)*s,g=c0(i,{x:u,y:p},!1,s);if(p<a.top||p>a.bottom||(s<0?g<r:g>r))return L.cursor(g,e.assoc,void 0,o)}}function al(i,e,t){let n=i.state.facet(t0).map(r=>r(i));for(;;){let r=!1;for(let s of n)s.between(t.from-1,t.from+1,(o,l,a)=>{t.from>o&&t.from<l&&(t=e.head>t.from?L.cursor(o,1):L.cursor(l,-1),r=!0)});if(!r)return t}}class Mk{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let t in Ke){let n=Ke[t];e.contentDOM.addEventListener(t,r=>{!Eu(e,r)||this.ignoreDuringComposition(r)||t=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,r)?r.preventDefault():n(e,r))},va[t]),this.registeredEvents.push(t)}$.chrome&&$.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,$.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var n;let r;this.customHandlers=[];for(let s of t)if(r=(n=s.update(e).spec)===null||n===void 0?void 0:n.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{Eu(e,l)&&this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,t,n){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,n,t)||n.defaultPrevented)return!0}catch(o){Kt(t.state,o)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,t,e)}catch(s){Kt(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if($.android&&$.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return $.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((n=h0.find(r=>r.keyCode==t.keyCode))&&!t.ctrlKey||Dk.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=n||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Dn(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:$.safari&&!$.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const h0=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Dk="dthko",u0=[16,17,18,20,91,92,224,225];class Pk{constructor(e,t,n,r){this.view=e,this.style=n,this.mustSelect=r,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(be.allowMultipleSelections)&&Lk(e,t),this.dragMove=Rk(e,t),this.dragging=Ik(e,t)&&m0(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Lk(i,e){let t=i.state.facet(qg);return t.length?t[0](e):$.mac?e.metaKey:e.ctrlKey}function Rk(i,e){let t=i.state.facet($g);return t.length?t[0](e):$.mac?!e.altKey:!e.ctrlKey}function Ik(i,e){let{main:t}=i.state.selection;if(t.empty)return!1;let n=Js(i.root);if(!n||n.rangeCount==0)return!0;let r=n.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Eu(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=i.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=Pe.get(t))&&n.ignoreEvent(e))return!1;return!0}const Ke=Object.create(null),va=Object.create(null),f0=$.ie&&$.ie_version<15||$.ios&&$.webkit_version<604;function Nk(i){let e=i.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{i.focus(),t.remove(),d0(i,t.value)},50)}function d0(i,e){let{state:t}=i,n,r=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(ka!=null&&t.selection.ranges.every(a=>a.empty)&&ka==s.toString()){let a=-1;n=t.changeByRange(c=>{let h=t.doc.lineAt(c.from);if(h.from==a)return{range:c};a=h.from;let u=t.toText((o?s.line(r++).text:e)+t.lineBreak);return{changes:{from:h.from,insert:u},range:L.cursor(c.from+u.length)}})}else o?n=t.changeByRange(a=>{let c=s.line(r++);return{changes:{from:a.from,to:a.to,insert:c.text},range:L.cursor(a.from+c.length)}}):n=t.replaceSelection(s);i.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Ke.keydown=(i,e)=>{i.inputState.setSelectionOrigin("select"),e.keyCode==27?i.inputState.lastEscPress=Date.now():u0.indexOf(e.keyCode)<0&&(i.inputState.lastEscPress=0)};Ke.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};Ke.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};va.touchstart=va.touchmove={passive:!0};Ke.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let n of i.state.facet(Kg))if(t=n(i,e),t)break;if(!t&&e.button==0&&(t=Fk(i,e)),t){let n=i.root.activeElement!=i.contentDOM;n&&i.observer.ignore(()=>Lg(i.contentDOM)),i.inputState.startMouseSelection(new Pk(i,e,t,n))}};function Au(i,e,t,n){if(n==1)return L.cursor(e,t);if(n==2)return kk(i.state,e,t);{let r=dt.find(i.docView,e),s=i.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<i.state.doc.length&&l==s.to&&l++,L.range(o,l)}}let p0=(i,e)=>i>=e.top&&i<=e.bottom,Tu=(i,e,t)=>p0(e,t)&&i>=t.left&&i<=t.right;function Bk(i,e,t,n){let r=dt.find(i.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&Tu(t,n,o))return-1;let l=r.coordsAt(s,1);return l&&Tu(t,n,l)?1:o&&p0(n,o)?-1:1}function Cu(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:Bk(i,t,e.clientX,e.clientY)}}const Hk=$.ie&&$.ie_version<=11;let Ou=null,Mu=0,Du=0;function m0(i){if(!Hk)return i.detail;let e=Ou,t=Du;return Ou=i,Du=Date.now(),Mu=!e||t>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(Mu+1)%3:1}function Fk(i,e){let t=Cu(i,e),n=m0(e),r=i.state.selection,s=t,o=e;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),r=r.map(l.changes),o=null)},get(l,a,c){let h;o&&l.clientX==o.clientX&&l.clientY==o.clientY?h=s:(h=s=Cu(i,l),o=l);let u=Au(i,h.pos,h.bias,n);if(t.pos!=h.pos&&!a){let f=Au(i,t.pos,t.bias,n),d=Math.min(f.from,u.from),p=Math.max(f.to,u.to);u=d<u.from?L.range(d,p):L.range(p,d)}return a?r.replaceRange(r.main.extend(u.from,u.to)):c&&r.ranges.length>1&&r.ranges.some(f=>f.eq(u))?Vk(r,u):c?r.addRange(u):L.create([u])}}}function Vk(i,e){for(let t=0;;t++)if(i.ranges[t].eq(e))return L.create(i.ranges.slice(0,t).concat(i.ranges.slice(t+1)),i.mainIndex==t?0:i.mainIndex-(i.mainIndex>t?1:0))}Ke.dragstart=(i,e)=>{let{selection:{main:t}}=i.state,{mouseSelection:n}=i.inputState;n&&(n.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",i.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function Pu(i,e,t,n){if(!t)return;let r=i.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=i.inputState,o=n&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,l={from:r,insert:t},a=i.state.changes(o?[o,l]:l);i.focus(),i.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}Ke.drop=(i,e)=>{if(!e.dataTransfer)return;if(i.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let n=Array(t.length),r=0,s=()=>{++r==t.length&&Pu(i,e,n.filter(o=>o!=null).join(i.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(n[o]=l.result),s()},l.readAsText(t[o])}}else Pu(i,e,e.dataTransfer.getData("Text"),!0)};Ke.paste=(i,e)=>{if(i.state.readOnly)return e.preventDefault();i.observer.flush();let t=f0?null:e.clipboardData;t?(d0(i,t.getData("text/plain")),e.preventDefault()):Nk(i)};function jk(i,e){let t=i.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),i.focus()},50)}function Uk(i){let e=[],t=[],n=!1;for(let r of i.selection.ranges)r.empty||(e.push(i.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:s}of i.selection.ranges){let o=i.doc.lineAt(s);o.number>r&&(e.push(o.text),t.push({from:o.from,to:Math.min(i.doc.length,o.to+1)})),r=o.number}n=!0}return{text:e.join(i.lineBreak),ranges:t,linewise:n}}let ka=null;Ke.copy=Ke.cut=(i,e)=>{let{text:t,ranges:n,linewise:r}=Uk(i.state);if(!t&&!r)return;ka=r?t:null;let s=f0?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):jk(i,t),e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"})};function g0(i){setTimeout(()=>{i.hasFocus!=i.inputState.notifiedFocused&&i.update([])},10)}Ke.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),g0(i)};Ke.blur=i=>{i.observer.clearSelectionRange(),g0(i)};Ke.compositionstart=Ke.compositionupdate=i=>{i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0)};Ke.compositionend=i=>{i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionFirstChange=null,$.chrome&&$.android&&i.observer.flushSoon(),setTimeout(()=>{i.inputState.composing<0&&i.docView.compositionDeco.size&&i.update([])},50)};Ke.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};Ke.beforeinput=(i,e)=>{var t;let n;if($.chrome&&$.android&&(n=h0.find(r=>r.inputType==e.inputType))&&(i.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}};const Lu=["pre-wrap","normal","pre-line","break-spaces"];class zk{constructor(){this.doc=ve.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Lu.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,n,r,s){let o=Lu.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.lineLength=r,l){this.heightSamples={};for(let a=0;a<s.length;a++){let c=s[a];c<0?a++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class Wk{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Pi{constructor(e,t,n,r,s){this.from=e,this.length=t,this.top=n,this.height=r,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Pi(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var De=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(De||(De={}));const Ns=.001;class pt{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Ns&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return pt.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let s=this;for(let o=r.length-1;o>=0;o--){let{fromA:l,toA:a,fromB:c,toB:h}=r[o],u=s.lineAt(l,De.ByPosNoHeight,t,0,0),f=u.to>=a?u:s.lineAt(a,De.ByPosNoHeight,t,0,0);for(h+=f.to-a,a=f.to;o>0&&u.from<=r[o-1].toA;)l=r[o-1].fromA,c=r[o-1].fromB,o--,l<u.from&&(u=s.lineAt(l,De.ByPosNoHeight,t,0,0));c+=u.from-l,l=u.from;let d=cc.build(n,e,c,h);s=s.replace(l,a,d)}return s.updateHeight(n,0)}static empty(){return new At(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,r=0,s=0;for(;;)if(t==n)if(r>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),n+=1+l.break,r-=l.size}else if(s>r*2){let l=e[n];l.break?e.splice(n,1,l.left,null,l.right):e.splice(n,1,l.left,l.right),n+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[t++];l&&(r+=l.size)}else{let l=e[--n];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,n++),new Gk(pt.of(e.slice(0,t)),o,pt.of(e.slice(n)))}}pt.prototype.size=1;class _0 extends pt{constructor(e,t,n){super(e,t),this.type=n}blockAt(e,t,n,r){return new Pi(r,this.length,n,this.height,this.type)}lineAt(e,t,n,r,s){return this.blockAt(0,n,r,s)}forEachLine(e,t,n,r,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,n,r,s))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class At extends _0{constructor(e,t){super(e,t,Oe.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,n){let r=n[0];return n.length==1&&(r instanceof At||r instanceof Ye&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Ye?r=new At(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):pt.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ye extends pt{constructor(e){super(e,0)}lines(e,t){let n=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(e,t,n,r){let{firstLine:s,lastLine:o,lineHeight:l}=this.lines(t,r),a=Math.max(0,Math.min(o-s,Math.floor((e-n)/l))),{from:c,length:h}=t.line(s+a);return new Pi(c,h,n+l*a,l,Oe.Text)}lineAt(e,t,n,r,s){if(t==De.ByHeight)return this.blockAt(e,n,r,s);if(t==De.ByPosNoHeight){let{from:u,to:f}=n.lineAt(e);return new Pi(u,f-u,0,0,Oe.Text)}let{firstLine:o,lineHeight:l}=this.lines(n,s),{from:a,length:c,number:h}=n.lineAt(e);return new Pi(a,c,r+l*(h-o),l,Oe.Text)}forEachLine(e,t,n,r,s,o){let{firstLine:l,lineHeight:a}=this.lines(n,s);for(let c=Math.max(e,s),h=Math.min(s+this.length,t);c<=h;){let u=n.lineAt(c);c==e&&(r+=a*(u.number-l)),o(new Pi(u.from,u.length,r,a,Oe.Text)),r+=a,c=u.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let s=n[n.length-1];s instanceof Ye?n[n.length-1]=new Ye(s.length+r):n.push(null,new Ye(r-1))}if(e>0){let s=n[0];s instanceof Ye?n[0]=new Ye(e+s.length):n.unshift(new Ye(e-1),null)}return pt.of(n)}decomposeLeft(e,t){t.push(new Ye(e-1),null)}decomposeRight(e,t){t.push(null,new Ye(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let s=t+this.length;if(r&&r.from<=t+this.length&&r.more){let o=[],l=Math.max(t,r.from),a=-1,c=e.heightChanged;for(r.from>t&&o.push(new Ye(r.from-t-1).updateHeight(e,t));l<=s&&r.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let f=r.heights[r.index++];a==-1?a=f:Math.abs(f-a)>=Ns&&(a=-2);let d=new At(u,f);d.outdated=!1,o.push(d),l+=u+1}l<=s&&o.push(null,new Ye(s-l).updateHeight(e,l));let h=pt.of(o);return e.heightChanged=c||a<0||Math.abs(h.height-this.height)>=Ns||Math.abs(a-this.lines(e.doc,t).lineHeight)>=Ns,h}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Gk extends pt{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,r){let s=n+this.left.height;return e<s?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,s,r+this.left.length+this.break)}lineAt(e,t,n,r,s){let o=r+this.left.height,l=s+this.left.length+this.break,a=t==De.ByHeight?e<o:e<l,c=a?this.left.lineAt(e,t,n,r,s):this.right.lineAt(e,t,n,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let h=t==De.ByPosNoHeight?De.ByPosNoHeight:De.ByPos;return a?c.join(this.right.lineAt(l,h,n,o,l)):this.left.lineAt(l,h,n,r,s).join(c)}forEachLine(e,t,n,r,s,o){let l=r+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,s,o),t>=a&&this.right.forEachLine(e,t,n,l,a,o);else{let c=this.lineAt(a,De.ByPos,n,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,n,r,s,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,n,l,a,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of n)s.push(l);if(e>0&&Ru(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),Ru(s,l)}return pt.of(s)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?pt.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return r&&r.from<=t+s.length&&r.more?a=s=s.updateHeight(e,t,n,r):s.updateHeight(e,t,n),r&&r.from<=l+o.length&&r.more?a=o=o.updateHeight(e,l,n,r):o.updateHeight(e,l,n),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Ru(i,e){let t,n;i[e]==null&&(t=i[e-1])instanceof Ye&&(n=i[e+1])instanceof Ye&&i.splice(e-1,3,new Ye(t.length+1+n.length))}const qk=5;class cc{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof At?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new At(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;n.block?this.addBlock(new _0(s,r,n.type)):(s||r>=qk)&&this.addLineDeco(r,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new At(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Ye(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof At)return e;let t=new At(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==Oe.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Oe.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof At)&&!this.isCovered?this.nodes.push(new At(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let r of this.nodes)r instanceof At&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(e,t,n,r){let s=new cc(n,e);return xe.spans(t,n,r,s,0),s.finish(n)}}function $k(i,e,t){let n=new Kk;return xe.compare(i,e,t,n,0),n.changes}class Kk{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&ga(e,t,this.changes,5)}}function Xk(i,e){let t=i.getBoundingClientRect(),n=i.ownerDocument,r=n.defaultView||window,s=Math.max(0,t.left),o=Math.min(r.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(r.innerHeight,t.bottom);for(let c=i.parentNode;c&&c!=n.body;)if(c.nodeType==1){let h=c,u=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&u.overflow!="visible"){let f=h.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),l=Math.max(l,f.top),a=c==i.parentNode?f.bottom:Math.min(a,f.bottom)}c=u.position=="absolute"||u.position=="fixed"?h.offsetParent:h.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function Jk(i,e){let t=i.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class cl{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],s=t[n];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return ue.replace({widget:new Yk(this.size,e)}).range(this.from,this.to)}}class Yk extends gi{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Iu{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new zk,this.scaler=Nu,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Be.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(Hr).filter(t=>typeof t!="function"),this.heightMap=pt.empty().applyChanges(this.stateDeco,ve.empty,this.heightOracle.setDoc(e.doc),[new pi(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ue.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new ds(s,o))}}this.viewports=e.sort((n,r)=>n.from-r.from),this.scaler=this.heightMap.height<=7e6?Nu:new ex(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:_r(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Hr).filter(c=>typeof c!="function");let r=e.changedRanges,s=pi.extendWithRanges(r,$k(n,this.stateDeco,e?e.changes:ze.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let a=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Zg)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,s=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Be.RTL:Be.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,c=0,h=parseInt(n.paddingTop)||0,u=parseInt(n.paddingBottom)||0;(this.paddingTop!=h||this.paddingBottom!=u)&&(this.paddingTop=h,this.paddingBottom=u,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let f=(this.printing?Jk:Xk)(t,this.paddingTop),d=f.top-this.pixelViewport.top,p=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let m=t.clientWidth;if((this.contentDOMWidth!=m||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=m,this.editorHeight=e.scrollDOM.clientHeight,a|=8),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(o=!0),o||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:y,charWidth:w}=e.docView.measureTextSize();o=y>0&&r.refresh(s,y,w,m/w,k),o&&(e.docView.minWidth=0,a|=8)}d>0&&p>0?c=Math.max(d,p):d<0&&p<0&&(c=Math.min(d,p)),r.heightChanged=!1;for(let y of this.viewports){let w=y.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(y);this.heightMap=o?pt.empty().applyChanges(this.stateDeco,ve.empty,this.heightOracle,[new pi(0,0,0,e.state.doc.length)]):this.heightMap.updateHeight(r,0,o,new Wk(y.from,w))}r.heightChanged&&(a|=2)}let _=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(a&2||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.state.doc,{visibleTop:o,visibleBottom:l}=this,a=new ds(r.lineAt(o-n*1e3,De.ByHeight,s,0,0).from,r.lineAt(l+(1-n)*1e3,De.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<a.from||c>a.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=r.lineAt(c,De.ByPos,s,0,0),f;t.y=="center"?f=(u.top+u.bottom)/2-h/2:t.y=="start"||t.y=="nearest"&&c<a.from?f=u.top:f=u.bottom-h,a=new ds(r.lineAt(f-1e3/2,De.ByHeight,s,0,0).from,r.lineAt(f+h+1e3/2,De.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new ds(this.heightMap.lineAt(n,De.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,De.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,De.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,De.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(n,250)))&&r>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new cl(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Be.LTR&&!n)return[];let l=[],a=(c,h,u,f)=>{if(h-c<s)return;let d=this.state.selection.main,p=[d.from];d.empty||p.push(d.to);for(let m of p)if(m>c&&m<h){a(c,m-10,u,f),a(m+10,h,u,f);return}let g=Qk(e,m=>m.from>=u.from&&m.to<=u.to&&Math.abs(m.from-c)<s&&Math.abs(m.to-h)<s&&!p.some(_=>m.from<_&&m.to>_));if(!g){if(h<u.to&&t&&n&&t.visibleRanges.some(m=>m.from<=h&&m.to>=h)){let m=t.moveToLineBoundary(L.cursor(h),!1,!0).head;m>c&&(h=m)}g=new cl(c,h,this.gapSize(u,c,h,f))}l.push(g)};for(let c of this.viewportLines){if(c.length<o)continue;let h=Zk(c.from,c.to,this.stateDeco);if(h.total<o)continue;let u=this.scrollTarget?this.scrollTarget.range.head:null,f,d;if(n){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,m;if(u!=null){let _=ms(h,u),k=((this.visibleBottom-this.visibleTop)/2+p)/c.height;g=_-k,m=_+k}else g=(this.visibleTop-c.top-p)/c.height,m=(this.visibleBottom-c.top+p)/c.height;f=ps(h,g),d=ps(h,m)}else{let p=h.total*this.heightOracle.charWidth,g=r*this.heightOracle.charWidth,m,_;if(u!=null){let k=ms(h,u),y=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/p;m=k-y,_=k+y}else m=(this.pixelViewport.left-g)/p,_=(this.pixelViewport.right+g)/p;f=ps(h,m),d=ps(h,_)}f>c.from&&a(c.from,f,c,h),d<c.to&&a(d,c.to,c,h)}return l}gapSize(e,t,n,r){let s=ms(r,n)-ms(r,t);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){cl.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ue.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];xe.spans(e,this.viewport.from,this.viewport.to,{span(r,s){t.push({from:r,to:s})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=t[s].from||r.to!=t[s].to);return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||_r(this.heightMap.lineAt(e,De.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return _r(this.heightMap.lineAt(this.scaler.fromDOM(e),De.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return _r(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ds{constructor(e,t){this.from=e,this.to=t}}function Zk(i,e,t){let n=[],r=i,s=0;return xe.spans(t,i,e,{span(){},point(o,l){o>r&&(n.push({from:r,to:o}),s+=o-r),r=l}},20),r<e&&(n.push({from:r,to:e}),s+=e-r),{total:s,ranges:n}}function ps({total:i,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(i*t);for(let r=0;;r++){let{from:s,to:o}=e[r],l=o-s;if(n<=l)return s+n;n-=l}}function ms(i,e){let t=0;for(let{from:n,to:r}of i.ranges){if(e<=r){t+=e-n;break}t+=r-n}return t/i.total}function Qk(i,e){for(let t of i)if(e(t))return t}const Nu={toDOM(i){return i},fromDOM(i){return i},scale:1};class ex{constructor(e,t,n){let r=0,s=0,o=0;this.viewports=n.map(({from:l,to:a})=>{let c=t.lineAt(l,De.ByPos,e,0,0).top,h=t.lineAt(a,De.ByPos,e,0,0).bottom;return r+=h-c,{from:l,to:a,top:c,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return r+(e-n)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);n=s.bottom,r=s.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return n+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);n=s.bottom,r=s.domBottom}}}function _r(i,e){if(e.scale==1)return i;let t=e.toDOM(i.top),n=e.toDOM(i.bottom);return new Pi(i.from,i.length,t,n-t,Array.isArray(i.type)?i.type.map(r=>_r(r,e)):i.type)}const gs=X.define({combine:i=>i.join(" ")}),xa=X.define({combine:i=>i.indexOf(!0)>-1}),Sa=Li.newName(),b0=Li.newName(),y0=Li.newName(),w0={"&light":"."+b0,"&dark":"."+y0};function Ea(i,e,t){return new Li(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,r=>{if(r=="&")return i;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):i+" "+n}})}const tx=Ea("."+Sa,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},w0);class ix{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(t>-1&&!e.state.readOnly&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let l=s||o?[]:rx(e),a=new o0(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=sx(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!Fn(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Fn(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=L.single(c,a)}}}function v0(i,e){let t,{newSel:n}=e,r=i.state.selection.main;if(e.bounds){let{from:s,to:o}=e.bounds,l=r.from,a=null;(i.inputState.lastKeyCode===8&&i.inputState.lastKeyTime>Date.now()-100||$.android&&e.text.length<o-s)&&(l=r.to,a="end");let c=nx(i.state.doc.sliceString(s,o,Di),e.text,l-s,a);c&&($.chrome&&i.inputState.lastKeyCode==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Di+Di&&c.toB--,t={from:s+c.from,to:s+c.toA,insert:ve.of(e.text.slice(c.from,c.toB).split(Di))})}else n&&(!i.hasFocus||!i.state.facet(xo)||n.main.eq(r))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!r.empty&&n&&n.main.empty?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,r.to)}:t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,t.from).append(t.insert).append(i.state.doc.slice(t.to,r.to))}:($.mac||$.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())?(n&&t.insert.length==2&&(n=L.single(n.main.anchor-1,n.main.head-1)),t={from:r.from,to:r.to,insert:ve.of([" "])}):$.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&i.lineWrapping&&(n&&(n=L.single(n.main.anchor-1,n.main.head-1)),t={from:r.from,to:r.to,insert:ve.of([" "])}),t){let s=i.state;if($.ios&&i.inputState.flushIOSKey(i)||$.android&&(t.from==r.from&&t.to==r.to&&t.insert.length==1&&t.insert.lines==2&&Dn(i.contentDOM,"Enter",13)||t.from==r.from-1&&t.to==r.to&&t.insert.length==0&&Dn(i.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&t.insert.length==0&&Dn(i.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();if(i.state.facet(Jg).some(c=>c(i,t.from,t.to,o)))return!0;i.inputState.composing>=0&&i.inputState.composing++;let l;if(t.from>=r.from&&t.to<=r.to&&t.to-t.from>=(r.to-r.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&i.inputState.composing<0){let c=r.from<t.from?s.sliceDoc(r.from,t.from):"",h=r.to>t.to?s.sliceDoc(t.to,r.to):"";l=s.replaceSelection(i.state.toText(c+t.insert.sliceString(0,void 0,i.state.lineBreak)+h))}else{let c=s.changes(t),h=n&&!s.selection.main.eq(n.main)&&n.main.to<=c.newLength?n.main:void 0;if(s.selection.ranges.length>1&&i.inputState.composing>=0&&t.to<=r.to&&t.to>=r.to-10){let u=i.state.sliceDoc(t.from,t.to),f=l0(i)||i.state.doc.lineAt(r.head),d=r.to-t.to,p=r.to-r.from;l=s.changeByRange(g=>{if(g.from==r.from&&g.to==r.to)return{changes:c,range:h||g.map(c)};let m=g.to-d,_=m-u.length;if(g.to-g.from!=p||i.state.sliceDoc(_,m)!=u||f&&g.to>=f.from&&g.from<=f.to)return{range:g};let k=s.changes({from:_,to:m,insert:t.insert}),y=g.to-r.to;return{changes:k,range:h?L.range(Math.max(0,h.anchor+y),Math.max(0,h.head+y)):g.map(k)}})}else l={changes:c,selection:h&&s.selection.replaceRange(h)}}let a="input.type";return i.composing&&(a+=".compose",i.inputState.compositionFirstChange&&(a+=".start",i.inputState.compositionFirstChange=!1)),i.dispatch(l,{scrollIntoView:!0,userEvent:a}),!0}else if(n&&!n.main.eq(r)){let s=!1,o="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(s=!0),o=i.inputState.lastSelectionOrigin),i.dispatch({selection:n,scrollIntoView:s,userEvent:o}),!0}else return!1}function nx(i,e,t,n){let r=Math.min(i.length,e.length),s=0;for(;s<r&&i.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&i.length==e.length)return null;let o=i.length,l=e.length;for(;o>0&&l>0&&i.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(n=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}if(o<s&&i.length<e.length){let a=t<=s&&t>=o?s-t:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=t<=s&&t>=l?s-t:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function rx(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:r,focusOffset:s}=i.observer.selectionRange;return t&&(e.push(new _u(t,n)),(r!=t||s!=n)&&e.push(new _u(r,s))),e}function sx(i,e){if(i.length==0)return null;let t=i[0].pos,n=i.length==2?i[1].pos:t;return t>-1&&n>-1?L.single(t+e,n+e):null}const ox={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},hl=$.ie&&$.ie_version<=11;class lx{constructor(e){this.view=e,this.active=!1,this.selectionRange=new ek,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);($.ie&&$.ie_version<=11||$.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),hl&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(xo)?n.root.activeElement!=this.dom:!Is(n.dom,r))return;let s=r.anchorNode&&n.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}($.ie&&$.ie_version<=11||$.android&&$.chrome)&&!n.state.selection.main.empty&&r.focusNode&&Ys(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=$.safari&&e.root.nodeType==11&&Y2(this.dom.ownerDocument)==this.dom&&ax(this.view)||Js(e.root);if(!t||this.selectionRange.eq(t))return!1;let n=Is(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&ik(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ox),hl&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),hl&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),!this.flush()&&s.force&&Dn(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),t==-1?{from:t,to:n}=o:(t=Math.min(o.from,t),n=Math.max(o.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&Is(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new ix(this.view,e,t,n))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let n=this.view.state,r=v0(this.view,t);return this.view.state==n&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let n=Bu(t,e.previousSibling||e.target.previousSibling,-1),r=Bu(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resize)===null||n===void 0||n.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Bu(i,e,t){for(;e;){let n=Pe.get(e);if(n&&n.parent==i)return n;let r=e.parentNode;e=r!=i.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function ax(i){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(i.contentDOM.addEventListener("beforeinput",t,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let n=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,l=i.docView.domAtPos(i.state.selection.main.anchor);return Ys(l.node,l.offset,s,o)&&([n,r,s,o]=[s,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}}class Q{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||tk(e.parent)||document,this.viewState=new Iu(e.state||be.create(e)),this.plugins=this.state.facet(mr).map(t=>new ol(t));for(let t of this.plugins)t.update(this);this.observer=new lx(this),this.inputState=new Mk(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new bu(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof We?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,r,s=this.state;for(let c of e){if(c.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=c.state}if(this.destroyed){this.viewState.state=s;return}let o=this.observer.delayedAndroidKey,l=null;if(o?(this.observer.clearDelayedAndroidKey(),l=this.observer.readChange(),(l&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(l=null)):this.observer.clear(),s.facet(be.phrases)!=this.state.facet(be.phrases))return this.setState(s);r=eo.create(this,s,e);let a=this.viewState.scrollTarget;try{this.updateState=2;for(let c of e){if(a&&(a=a.map(c.changes)),c.scrollIntoView){let{main:h}=c.state.selection;a=new Qs(h.empty?h:L.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of c.effects)h.is(mu)&&(a=h.value)}this.viewState.update(r,a),this.bidiCache=to.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(gr)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(c=>c.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(gs)!=r.state.facet(gs)&&(this.viewState.mustMeasureContent=!0),(t||n||a||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let c of this.state.facet(_a))c(r);l&&!v0(this,l)&&o.force&&Dn(this.contentDOM,o.key,o.keyCode)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new Iu(e),this.plugins=e.facet(mr).map(n=>new ol(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView=new bu(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(mr),n=e.state.facet(mr);if(t!=n){let r=[];for(let s of n){let o=t.indexOf(s);if(o<0)r.push(new ol(s));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:n,scrollTop:r,clientHeight:s}=this.scrollDOM,o=r>n-s-4?n:r;try{for(let l=0;;l++){this.updateState=1;let a=this.viewport,c=this.viewState.lineBlockAtHeight(o),h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];h&4||([this.measureRequests,u]=[u,this.measureRequests]);let f=u.map(m=>{try{return m.read(this)}catch(_){return Kt(this.state,_),Hu}}),d=eo.create(this,this.state,[]),p=!1,g=!1;d.flags|=h,t?t.flags|=h:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),p=this.docView.update(d));for(let m=0;m<u.length;m++)if(f[m]!=Hu)try{let _=u[m];_.write&&_.write(f[m],this)}catch(_){Kt(this.state,_)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,g=!0;else{let m=this.viewState.lineBlockAt(c.from).top-c.top;(m>1||m<-1)&&(this.scrollDOM.scrollTop+=m,g=!0)}if(p&&this.docView.updateSelection(!0),this.viewport.from==a.from&&this.viewport.to==a.to&&!g&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(_a))l(t)}get themeClasses(){return Sa+" "+(this.state.facet(xa)?y0:b0)+" "+this.state.facet(gs)}updateAttrs(){let e=Fu(this,Qg,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(xo)?"true":"false",class:"cm-content",style:`${$.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Fu(this,e0,t);let n=this.observer.ignore(()=>{let r=ma(this.contentDOM,this.contentAttrs,t),s=ma(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let r of n.effects)if(r.is(Q.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(gr),Li.mount(this.root,this.styleModules.concat(tx).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return al(this,e,Su(this,e,t,n))}moveByGroup(e,t){return al(this,e,Su(this,e,t,n=>Ck(this,e.head,n)))}moveToLineBoundary(e,t,n=!0){return Tk(this,e,t,n)}moveVertically(e,t,n){return al(this,e,Ok(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),c0(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Pn.find(s,e-r.from,-1,t)];return sc(n,o.dir==Be.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Yg)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>cx)return r0(e.length);let t=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t)return r.order;let n=dk(e.text,t);return this.bidiCache.push(new to(e.from,e.to,t,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||$.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Lg(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return mu.of(new Qs(typeof e=="number"?L.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return ct.define(()=>({}),{eventHandlers:e})}static theme(e,t){let n=Li.newName(),r=[gs.of(n),gr.of(Ea(`.${n}`,e))];return t&&t.dark&&r.push(xa.of(!0)),r}static baseTheme(e){return Jr.lowest(gr.of(Ea("."+Sa,e,w0)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&Pe.get(n)||Pe.get(e);return((t=r?.rootView)===null||t===void 0?void 0:t.view)||null}}Q.styleModule=gr;Q.inputHandler=Jg;Q.perLineTextDirection=Yg;Q.exceptionSink=Xg;Q.updateListener=_a;Q.editable=xo;Q.mouseSelectionStyle=Kg;Q.dragMovesSelection=$g;Q.clickAddsSelectionRange=qg;Q.decorations=Hr;Q.atomicRanges=t0;Q.scrollMargins=i0;Q.darkTheme=xa;Q.contentAttributes=e0;Q.editorAttributes=Qg;Q.lineWrapping=Q.contentAttributes.of({class:"cm-lineWrapping"});Q.announce=de.define();const cx=4096,Hu={};class to{constructor(e,t,n,r){this.from=e,this.to=t,this.dir=n,this.order=r}static update(e,t){if(t.empty)return e;let n=[],r=e.length?e[e.length-1].dir:Be.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!t.touchesRange(o.from,o.to)&&n.push(new to(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return n}}function Fu(i,e,t){for(let n=i.state.facet(e),r=n.length-1;r>=0;r--){let s=n[r],o=typeof s=="function"?s(i):s;o&&pa(o,t)}return t}const hx=$.mac?"mac":$.windows?"win":$.linux?"linux":"key";function ux(i,e){const t=i.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let r,s,o,l;for(let a=0;a<t.length-1;++a){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),l&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function _s(i,e,t){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t!==!1&&e.shiftKey&&(i="Shift-"+i),i}const fx=Jr.default(Q.domEventHandlers({keydown(i,e){return gx(dx(e.state),i,e,"editor")}})),So=X.define({enables:fx}),Vu=new WeakMap;function dx(i){let e=i.facet(So),t=Vu.get(e);return t||Vu.set(e,t=mx(e.reduce((n,r)=>n.concat(r),[]))),t}let Ti=null;const px=4e3;function mx(i,e=hx){let t=Object.create(null),n=Object.create(null),r=(o,l)=>{let a=n[o];if(a==null)n[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,c)=>{var h,u;let f=t[o]||(t[o]=Object.create(null)),d=l.split(/ (?!$)/).map(m=>ux(m,e));for(let m=1;m<d.length;m++){let _=d.slice(0,m).join(" ");r(_,!0),f[_]||(f[_]={preventDefault:!0,run:[k=>{let y=Ti={view:k,prefix:_,scope:o};return setTimeout(()=>{Ti==y&&(Ti=null)},px),!0}]})}let p=d.join(" ");r(p,!1);let g=f[p]||(f[p]={preventDefault:!1,run:((u=(h=f._any)===null||h===void 0?void 0:h.run)===null||u===void 0?void 0:u.slice())||[]});a&&g.run.push(a),c&&(g.preventDefault=!0)};for(let o of i){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let h=t[c]||(t[c]=Object.create(null));h._any||(h._any={preventDefault:!1,run:[]});for(let u in h)h[u].run.push(o.any)}let a=o[e]||o.key;if(a)for(let c of l)s(c,a,o.run,o.preventDefault),o.shift&&s(c,"Shift-"+a,o.shift,o.preventDefault)}return t}function gx(i,e,t,n){let r=J2(e),s=ot(r,0),o=Pt(s)==r.length&&r!=" ",l="",a=!1;Ti&&Ti.view==t&&Ti.scope==n&&(l=Ti.prefix+" ",(a=u0.indexOf(e.keyCode)<0)&&(Ti=null));let c=new Set,h=p=>{if(p){for(let g of p.run)if(!c.has(g)&&(c.add(g),g(t,e)))return!0;p.preventDefault&&(a=!0)}return!1},u=i[n],f,d;if(u){if(h(u[l+_s(r,e,!o)]))return!0;if(o&&(e.shiftKey||e.altKey||e.metaKey||s>127)&&(f=Ri[e.keyCode])&&f!=r){if(h(u[l+_s(f,e,!0)]))return!0;if(e.shiftKey&&(d=Ir[e.keyCode])!=r&&d!=f&&h(u[l+_s(d,e,!1)]))return!0}else if(o&&e.shiftKey&&h(u[l+_s(r,e,!0)]))return!0;if(h(u._any))return!0}return a}const k0=!$.ios,br=X.define({combine(i){return cn(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function _x(i={}){return[br.of(i),bx,yx,Zg.of(!0)]}class x0{constructor(e,t,n,r,s){this.left=e,this.top=t,this.width=n,this.height=r,this.className=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const bx=ct.fromClass(class{constructor(i){this.view=i,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=i.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=i.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),i.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(br).cursorBlinkRate+"ms"}update(i){let e=i.startState.facet(br)!=i.state.facet(br);(e||i.selectionSet||i.geometryChanged||i.viewportChanged)&&this.view.requestMeasure(this.measureReq),i.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:i}=this.view,e=i.facet(br),t=i.selection.ranges.map(r=>r.empty?[]:wx(this.view,r)).reduce((r,s)=>r.concat(s)),n=[];for(let r of i.selection.ranges){let s=r==i.selection.main;if(r.empty?!s||k0:e.drawRangeCursor){let o=vx(this.view,r,s);o&&n.push(o)}}return{rangePieces:t,cursors:n}}drawSel({rangePieces:i,cursors:e}){if(i.length!=this.rangePieces.length||i.some((t,n)=>!t.eq(this.rangePieces[n]))){this.selectionLayer.textContent="";for(let t of i)this.selectionLayer.appendChild(t.draw());this.rangePieces=i}if(e.length!=this.cursors.length||e.some((t,n)=>!t.eq(this.cursors[n]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const n of e)this.cursorLayer.appendChild(n.draw())}else e.forEach((n,r)=>n.adjust(t[r]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),S0={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};k0&&(S0[".cm-line"].caretColor="transparent !important");const yx=Jr.highest(Q.theme(S0));function E0(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==Be.LTR?e.left:e.right-i.scrollDOM.clientWidth)-i.scrollDOM.scrollLeft,top:e.top-i.scrollDOM.scrollTop}}function ju(i,e,t){let n=L.cursor(e);return{from:Math.max(t.from,i.moveToLineBoundary(n,!1,!0).from),to:Math.min(t.to,i.moveToLineBoundary(n,!0,!0).from),type:Oe.Text}}function Uu(i,e){let t=i.lineBlockAt(e);if(Array.isArray(t.type)){for(let n of t.type)if(n.to>e||n.to==e&&(n.to==t.to||n.type==Oe.Text))return n}return t}function wx(i,e){if(e.to<=i.viewport.from||e.from>=i.viewport.to)return[];let t=Math.max(e.from,i.viewport.from),n=Math.min(e.to,i.viewport.to),r=i.textDirection==Be.LTR,s=i.contentDOM,o=s.getBoundingClientRect(),l=E0(i),a=window.getComputedStyle(s.firstChild),c=o.left+parseInt(a.paddingLeft)+Math.min(0,parseInt(a.textIndent)),h=o.right-parseInt(a.paddingRight),u=Uu(i,t),f=Uu(i,n),d=u.type==Oe.Text?u:null,p=f.type==Oe.Text?f:null;if(i.lineWrapping&&(d&&(d=ju(i,t,d)),p&&(p=ju(i,n,p))),d&&p&&d.from==p.from)return m(_(e.from,e.to,d));{let y=d?_(e.from,null,d):k(u,!1),w=p?_(null,e.to,p):k(f,!0),A=[];return(d||u).to<(p||f).from-1?A.push(g(c,y.bottom,h,w.top)):y.bottom<w.top&&i.elementAtHeight((y.bottom+w.top)/2).type==Oe.Text&&(y.bottom=w.top=(y.bottom+w.top)/2),m(y).concat(A).concat(m(w))}function g(y,w,A,M){return new x0(y-l.left,w-l.top-.01,A-y,M-w+.01,"cm-selectionBackground")}function m({top:y,bottom:w,horizontal:A}){let M=[];for(let R=0;R<A.length;R+=2)M.push(g(A[R],y,A[R+1],w));return M}function _(y,w,A){let M=1e9,R=-1e9,P=[];function x(D,B,ee,oe,G){let he=i.coordsAtPos(D,D==A.to?-2:2),H=i.coordsAtPos(ee,ee==A.from?2:-2);M=Math.min(he.top,H.top,M),R=Math.max(he.bottom,H.bottom,R),G==Be.LTR?P.push(r&&B?c:he.left,r&&oe?h:H.right):P.push(!r&&oe?c:H.left,!r&&B?h:he.right)}let E=y??A.from,T=w??A.to;for(let D of i.visibleRanges)if(D.to>E&&D.from<T)for(let B=Math.max(D.from,E),ee=Math.min(D.to,T);;){let oe=i.state.doc.lineAt(B);for(let G of i.bidiSpans(oe)){let he=G.from+oe.from,H=G.to+oe.from;if(he>=ee)break;H>B&&x(Math.max(he,B),y==null&&he<=E,Math.min(H,ee),w==null&&H>=T,G.dir)}if(B=oe.to+1,B>=ee)break}return P.length==0&&x(E,y==null,T,w==null,i.textDirection),{top:M,bottom:R,horizontal:P}}function k(y,w){let A=o.top+(w?y.top:y.bottom);return{top:A,bottom:A,horizontal:[]}}}function vx(i,e,t){let n=i.coordsAtPos(e.head,e.assoc||1);if(!n)return null;let r=E0(i);return new x0(n.left-r.left,n.top-r.top,-1,n.bottom-n.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}function zu(i,e,t,n,r){e.lastIndex=0;for(let s=i.iterRange(t,n),o=t,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(o+l.index,l)}function kx(i,e){let t=i.visibleRanges;if(t.length==1&&t[0].from==i.viewport.from&&t[0].to==i.viewport.to)return t;let n=[];for(let{from:r,to:s}of t)r=Math.max(i.state.doc.lineAt(r).from,r-e),s=Math.min(i.state.doc.lineAt(s).to,s+e),n.length&&n[n.length-1].to>=r?n[n.length-1].to=s:n.push({from:r,to:s});return n}class xx{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(l,a,c,h)=>r(h,c,c+l[0].length,l,a);else if(typeof n=="function")this.addMatch=(l,a,c,h)=>{let u=n(l,a,c);u&&h(c,c+l[0].length,u)};else if(n)this.addMatch=(l,a,c,h)=>h(c,c+l[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new en,n=t.add.bind(t);for(let{from:r,to:s}of kx(e,this.maxLength))zu(e.state.doc,this.regexp,r,s,(o,l)=>this.addMatch(l,e,o,n));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(n=Math.min(l,n),r=Math.max(a,r))}),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let s of e.visibleRanges){let o=Math.max(s.from,n),l=Math.min(s.to,r);if(l>o){let a=e.state.doc.lineAt(o),c=a.to<l?e.state.doc.lineAt(l):a,h=Math.max(s.from,a.from),u=Math.min(s.to,c.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){h=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){u=l;break}}let f=[],d,p=(g,m,_)=>f.push(_.range(g,m));if(a==c)for(this.regexp.lastIndex=h-a.from;(d=this.regexp.exec(a.text))&&d.index<u-a.from;)this.addMatch(d,e,d.index+a.from,p);else zu(e.state.doc,this.regexp,h,u,(g,m)=>this.addMatch(m,e,g,p));t=t.update({filterFrom:h,filterTo:u,filter:(g,m)=>g<h||m>u,add:f})}}return t}}const Aa=/x/.unicode!=null?"gu":"g",Sx=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Aa),Ex={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ul=null;function Ax(){var i;if(ul==null&&typeof document<"u"&&document.body){let e=document.body.style;ul=((i=e.tabSize)!==null&&i!==void 0?i:e.MozTabSize)!=null}return ul||!1}const Bs=X.define({combine(i){let e=cn(i,{render:null,specialChars:Sx,addSpecialChars:null});return(e.replaceTabs=!Ax())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Aa)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Aa)),e}});function Tx(i={}){return[Bs.of(i),Cx()]}let Wu=null;function Cx(){return Wu||(Wu=ct.fromClass(class{constructor(i){this.view=i,this.decorations=ue.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(Bs)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new xx({regexp:i.specialChars,decoration:(e,t,n)=>{let{doc:r}=t.state,s=ot(e[0],0);if(s==9){let o=r.lineAt(n),l=t.state.tabSize,a=Yr(o.text,l,n-o.from);return ue.replace({widget:new Px((l-a%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=ue.replace({widget:new Dx(i,s)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let e=i.state.facet(Bs);i.startState.facet(Bs)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const Ox="";function Mx(i){return i>=32?Ox:i==10?"":String.fromCharCode(9216+i)}class Dx extends gi{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=Mx(this.code),n=e.state.phrase("Control character")+" "+(Ex[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let s=document.createElement("span");return s.textContent=t,s.title=n,s.setAttribute("aria-label",n),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Px extends gi{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}class Lx extends gi{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}ignoreEvent(){return!1}}function Rx(i){return ct.fromClass(class{constructor(e){this.view=e,this.placeholder=ue.set([ue.widget({widget:new Lx(i),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?ue.none:this.placeholder}},{decorations:e=>e.decorations})}const Ta=2e3;function Ix(i,e,t){let n=Math.min(e.line,t.line),r=Math.max(e.line,t.line),s=[];if(e.off>Ta||t.off>Ta||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=n;a<=r;a++){let c=i.doc.line(a);c.length<=l&&s.push(L.range(c.from+o,c.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=n;a<=r;a++){let c=i.doc.line(a),h=oa(c.text,o,i.tabSize,!0);if(h<0)s.push(L.cursor(c.to));else{let u=oa(c.text,l,i.tabSize);s.push(L.range(c.from+h,c.from+u))}}}return s}function Nx(i,e){let t=i.coordsAtPos(i.viewport.from);return t?Math.round(Math.abs((t.left-e)/i.defaultCharacterWidth)):-1}function Gu(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1),n=i.state.doc.lineAt(t),r=t-n.from,s=r>Ta?-1:r==n.length?Nx(i,e.clientX):Yr(n.text,i.state.tabSize,t-n.from);return{line:n.number,col:s,off:r}}function Bx(i,e){let t=Gu(i,e),n=i.state.selection;return t?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(t.line).from),o=r.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},n=n.map(r.changes)}},get(r,s,o){let l=Gu(i,r);if(!l)return n;let a=Ix(i.state,t,l);return a.length?o?L.create(a.concat(n.ranges)):L.create(a):n}}:null}function Hx(i){let e=t=>t.altKey&&t.button==0;return Q.mouseSelectionStyle.of((t,n)=>e(n)?Bx(t,n):null)}const Fx={Alt:[18,i=>i.altKey],Control:[17,i=>i.ctrlKey],Shift:[16,i=>i.shiftKey],Meta:[91,i=>i.metaKey]},Vx={style:"cursor: crosshair"};function jx(i={}){let[e,t]=Fx[i.key||"Alt"],n=ct.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventHandlers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[n,Q.contentAttributes.of(r=>{var s;return!((s=r.plugin(n))===null||s===void 0)&&s.isDown?Vx:null})]}const fl="-10000px";class A0{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(n)}update(e){var t;let n=e.state.facet(this.facet),r=n.filter(o=>o);if(n===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<r.length;o++){let l=r[o],a=-1;if(l){for(let c=0;c<this.tooltips.length;c++){let h=this.tooltips[c];h&&h.create==l.create&&(a=c)}if(a<0)s[o]=this.createTooltipView(l);else{let c=s[o]=this.tooltipViews[a];c.update&&c.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(t=o.destroy)===null||t===void 0||t.call(o));return this.input=n,this.tooltips=r,this.tooltipViews=s,!0}}function Ux(i){let{win:e}=i;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const dl=X.define({combine:i=>{var e,t,n;return{position:$.ios?"absolute":((e=i.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=i.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=i.find(r=>r.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||Ux}}}),T0=ct.fromClass(class{constructor(i){this.view=i,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=i.state.facet(dl);this.position=e.position,this.parent=e.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new A0(i,hc,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(i);e&&this.observeIntersection();let t=e||i.geometryChanged,n=i.state.facet(dl);if(n.position!=this.position){this.position=n.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(i){let e=i.create(this.view);if(e.dom.classList.add("cm-tooltip"),i.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=fl,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var i,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(i=t.destroy)===null||i===void 0||i.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=this.view.dom.getBoundingClientRect();return{editor:i,parent:this.parent?this.container.getBoundingClientRect():i,pos:this.manager.tooltips.map((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(dl).tooltipSpace(this.view)}}writeMeasure(i){let{editor:e,space:t}=i,n=[];for(let r=0;r<this.manager.tooltips.length;r++){let s=this.manager.tooltips[r],o=this.manager.tooltipViews[r],{dom:l}=o,a=i.pos[r],c=i.size[r];if(!a||a.bottom<=Math.max(e.top,t.top)||a.top>=Math.min(e.bottom,t.bottom)||a.right<Math.max(e.left,t.left)-.1||a.left>Math.min(e.right,t.right)+.1){l.style.top=fl;continue}let h=s.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,u=h?7:0,f=c.right-c.left,d=c.bottom-c.top,p=o.offset||Wx,g=this.view.textDirection==Be.LTR,m=c.width>t.right-t.left?g?t.left:t.right-c.width:g?Math.min(a.left-(h?14:0)+p.x,t.right-f):Math.max(t.left,a.left-f+(h?14:0)-p.x),_=!!s.above;!s.strictSide&&(_?a.top-(c.bottom-c.top)-p.y<t.top:a.bottom+(c.bottom-c.top)+p.y>t.bottom)&&_==t.bottom-a.bottom>a.top-t.top&&(_=!_);let k=_?a.top-d-u-p.y:a.bottom+u+p.y,y=m+f;if(o.overlap!==!0)for(let w of n)w.left<y&&w.right>m&&w.top<k+d&&w.bottom>k&&(k=_?w.top-d-2-u:w.bottom+u+2);this.position=="absolute"?(l.style.top=k-i.parent.top+"px",l.style.left=m-i.parent.left+"px"):(l.style.top=k+"px",l.style.left=m+"px"),h&&(h.style.left=`${a.left+(g?p.x:-p.x)-(m+14-7)}px`),o.overlap!==!0&&n.push({left:m,top:k,right:y,bottom:k+d}),l.classList.toggle("cm-tooltip-above",_),l.classList.toggle("cm-tooltip-below",!_),o.positioned&&o.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=fl}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),zx=Q.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Wx={x:0,y:0},hc=X.define({enables:[T0,zx]}),io=X.define();class uc{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new A0(e,io,t=>this.createHostedView(t))}static create(e){return new uc(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const Gx=hc.compute([io],i=>{let e=i.facet(io).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:uc.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class qx{constructor(e,t,n,r,s){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let n=this.view.coordsAtPos(t);if(n==null||e.y<n.top||e.y>n.bottom||e.x<n.left-this.view.defaultCharacterWidth||e.x>n.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(l=>l.from<=t&&l.to>=t),s=r&&r.dir==Be.RTL?-1:1,o=this.source(this.view,t,e.x<n.left?-s:s);if(o?.then){let l=this.pending={pos:t};o.then(a=>{this.pending==l&&(this.pending=null,a&&this.view.dispatch({effects:this.setHover.of(a)}))},a=>Kt(this.view.state,a,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!$x(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,s=(t=n?.end)!==null&&t!==void 0?t:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!Kx(this.view,r,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function $x(i){for(let e=i;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function Kx(i,e,t,n,r,s){let o=document.createRange(),l=i.domAtPos(e),a=i.domAtPos(t);o.setEnd(a.node,a.offset),o.setStart(l.node,l.offset);let c=o.getClientRects();o.detach();for(let h=0;h<c.length;h++){let u=c[h];if(Math.max(u.top-r,r-u.bottom,u.left-n,n-u.right)<=s)return!0}return!1}function Xx(i,e={}){let t=de.define(),n=kt.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,Qe.TrackDel);if(o==null)return null;let l=Object.assign(Object.create(null),r);l.pos=o,r.end!=null&&(l.end=s.changes.mapPos(r.end)),r=l}for(let o of s.effects)o.is(t)&&(r=o.value),o.is(Yx)&&(r=null);return r},provide:r=>io.from(r)});return[n,ct.define(r=>new qx(r,i,n,t,e.hoverTime||300)),Gx]}function Jx(i,e){let t=i.plugin(T0);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const Yx=de.define(),qu=X.define({combine(i){let e,t;for(let n of i)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Zx(i,e){let t=i.plugin(C0),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const C0=ct.fromClass(class{constructor(i){this.input=i.state.facet(Ca),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(i));let e=i.state.facet(qu);this.top=new bs(i,!0,e.topContainer),this.bottom=new bs(i,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(i){let e=i.state.facet(qu);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new bs(i.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new bs(i.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=i.state.facet(Ca);if(t!=this.input){let n=t.filter(a=>a),r=[],s=[],o=[],l=[];for(let a of n){let c=this.specs.indexOf(a),h;c<0?(h=a(i.view),l.push(h)):(h=this.panels[c],h.update&&h.update(i)),r.push(h),(h.top?s:o).push(h)}this.specs=n,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let n of this.panels)n.update&&n.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>Q.scrollMargins.of(e=>{let t=e.plugin(i);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class bs{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=$u(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=$u(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function $u(i){let e=i.nextSibling;return i.remove(),e}const Ca=X.define({enables:C0});class Ni extends Qi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ni.prototype.elementClass="";Ni.prototype.toDOM=void 0;Ni.prototype.mapMode=Qe.TrackBefore;Ni.prototype.startSide=Ni.prototype.endSide=-1;Ni.prototype.point=!0;const pl=X.define(),Qx={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>xe.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Sr=X.define();function eS(i){return[O0(),Sr.of(Object.assign(Object.assign({},Qx),i))]}const Ku=X.define({combine:i=>i.some(e=>e)});function O0(i){return[tS]}const tS=ct.fromClass(class{constructor(i){this.view=i,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=i.state.facet(Sr).map(e=>new Ju(i,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!i.state.facet(Ku),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}update(i){if(this.updateGutters(i)){let e=this.prevViewport,t=i.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}i.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Ku)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=i.view.viewport}syncGutters(i){let e=this.dom.nextSibling;i&&this.dom.remove();let t=xe.iter(this.view.state.facet(pl),this.view.viewport.from),n=[],r=this.gutters.map(s=>new iS(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks){let o;if(Array.isArray(s.type)){for(let l of s.type)if(l.type==Oe.Text){o=l;break}}else o=s.type==Oe.Text?s:void 0;if(o){n.length&&(n=[]),M0(t,n,s.from);for(let l of r)l.line(this.view,o,n)}}for(let s of r)s.finish();i&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(i){let e=i.startState.facet(Sr),t=i.state.facet(Sr),n=i.docChanged||i.heightChanged||i.viewportChanged||!xe.eq(i.startState.facet(pl),i.state.facet(pl),i.view.viewport.from,i.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(i)&&(n=!0);else{n=!0;let r=[];for(let s of t){let o=e.indexOf(s);o<0?r.push(new Ju(this.view,s)):(this.gutters[o].update(i),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return n}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove()}},{provide:i=>Q.scrollMargins.of(e=>{let t=e.plugin(i);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Be.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function Xu(i){return Array.isArray(i)?i:[i]}function M0(i,e,t){for(;i.value&&i.from<=t;)i.from==t&&e.push(i.value),i.next()}class iS{constructor(e,t,n){this.gutter=e,this.height=n,this.localMarkers=[],this.i=0,this.cursor=xe.iter(e.markers,t.from)}line(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),M0(this.cursor,this.localMarkers,t.from);let r=n.length?this.localMarkers.concat(n):this.localMarkers,s=this.gutter.config.lineMarker(e,t,r);s&&r.unshift(s);let o=this.gutter;if(r.length==0&&!o.config.renderEmptyElements)return;let l=t.top-this.height;if(this.i==o.elements.length){let a=new D0(e,t.height,l,r);o.elements.push(a),o.dom.appendChild(a.dom)}else o.elements[this.i].update(e,t.height,l,r);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Ju{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,r=>{let s=e.lineBlockAtHeight(r.clientY-e.documentTop);t.domEventHandlers[n](e,s,r)&&r.preventDefault()});this.markers=Xu(t.markers(e)),t.initialSpacer&&(this.spacer=new D0(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Xu(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let n=e.view.viewport;return!xe.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class D0{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),nS(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<t.length?t[s++]:null,c=!1;if(a){let h=a.elementClass;h&&(n+=" "+h);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(a)){l=u,c=!0;break}}else l=this.markers.length;for(;o<l;){let h=this.markers[o++];if(h.toDOM){h.destroy(r);let u=r.nextSibling;r.remove(),r=u}}if(!a)break;a.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),c&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function nS(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].compare(e[t]))return!1;return!0}const rS=X.define(),xn=X.define({combine(i){return cn(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let r in t){let s=n[r],o=t[r];n[r]=s?(l,a,c)=>s(l,a,c)||o(l,a,c):o}return n}})}});class ml extends Ni{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function gl(i,e){return i.state.facet(xn).formatNumber(e,i.state)}const sS=Sr.compute([xn],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(rS)},lineMarker(e,t,n){return n.some(r=>r.toDOM)?null:new ml(gl(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(xn)!=e.state.facet(xn),initialSpacer(e){return new ml(gl(e,Yu(e.state.doc.lines)))},updateSpacer(e,t){let n=gl(t.view,Yu(t.view.state.doc.lines));return n==e.number?e:new ml(n)},domEventHandlers:i.facet(xn).domEventHandlers}));function oS(i={}){return[xn.of(i),O0(),sS]}function Yu(i){let e=9;for(;e<i;)e=e*10+9;return e}const lS=1024;let aS=0;class Rt{constructor(e,t){this.from=e,this.to=t}}class pe{constructor(e={}){this.id=aS++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=gt.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}pe.closedBy=new pe({deserialize:i=>i.split(" ")});pe.openedBy=new pe({deserialize:i=>i.split(" ")});pe.group=new pe({deserialize:i=>i.split(" ")});pe.contextHash=new pe({perNode:!0});pe.lookAhead=new pe({perNode:!0});pe.mounted=new pe({perNode:!0});class cS{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}}const hS=Object.create(null);class gt{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):hS,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new gt(e.name||"",t,e.id,n);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(pe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return n=>{for(let r=n.prop(pe.group),s=-1;s<(r?r.length:0);s++){let o=t[s<0?n.name:r[s]];if(o)return o}}}}gt.none=new gt("",Object.create(null),0,8);class fc{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let s of e){let o=s(n);o&&(r||(r=Object.assign({},n.props)),r[o[0].id]=o[1])}t.push(r?new gt(n.name,r,n.id,n.flags):n)}return new fc(t)}}const ys=new WeakMap,Zu=new WeakMap;var He;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(He||(He={}));class Me{constructor(e,t,n,r,s){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(pe.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let r=n.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Fr(this.topNode,e)}cursorAt(e,t=0,n=0){let r=ys.get(this)||this.topNode,s=new Fr(r);return s.moveTo(e,t),ys.set(this,s._tree),s}get topNode(){return new Bt(this,0,0,null)}resolve(e,t=0){let n=Un(ys.get(this)||this.topNode,e,t,!1);return ys.set(this,n),n}resolveInner(e,t=0){let n=Un(Zu.get(this)||this.topNode,e,t,!0);return Zu.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|He.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=r&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&n&&!o.type.isAnonymous&&n(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:mc(gt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,r)=>new Me(this.type,t,n,r,this.propValues),e.makeTree||((t,n,r)=>new Me(gt.none,t,n,r)))}static build(e){return fS(e)}}Me.empty=new Me(gt.none,[],[],0);class dc{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new dc(this.buffer,this.index)}}class hn{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return gt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,n==e)return s;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,n,r,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(P0(s,r,o[a+1],o[a+2])&&(l=a,n>0));a=o[a+3]);return l}slice(e,t,n){let r=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){s[a++]=r[l++],s[a++]=r[l++]-n;let c=s[a++]=r[l++]-n;s[a++]=r[l++]-e,o=Math.max(o,c)}return new hn(s,o,this.set)}}function P0(i,e,t,n){switch(i){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function L0(i,e){let t=i.childBefore(e);for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(i=t,t=n.prevSibling):t=n}return i}function Un(i,e,t,n){for(var r;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let o=!n&&i instanceof Bt&&i.index<0?null:i.parent;if(!o)return i;i=o}let s=n?0:He.IgnoreOverlays;if(n)for(let o=i,l=o.parent;l;o=l,l=o.parent)o instanceof Bt&&o.index<0&&((r=l.enter(e,t,s))===null||r===void 0?void 0:r.from)!=o.from&&(i=l);for(;;){let o=i.enter(e,t,s);if(!o)return i;i=o}}class Bt{constructor(e,t,n,r){this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=t>0?l.length:-1;e!=c;e+=t){let h=l[e],u=a[e]+o.from;if(P0(r,n,u,u+h.length)){if(h instanceof hn){if(s&He.ExcludeBuffers)continue;let f=h.findChild(0,h.buffer.length,t,n-u,r);if(f>-1)return new hi(new uS(o,h,e,u),null,f)}else if(s&He.IncludeAnonymous||!h.type.isAnonymous||pc(h)){let f;if(!(s&He.IgnoreMounts)&&h.props&&(f=h.prop(pe.mounted))&&!f.overlay)return new Bt(f.tree,u,e,o);let d=new Bt(h,u,e,o);return s&He.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?h.children.length-1:0,t,n,r)}}}if(s&He.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&He.IgnoreOverlays)&&(r=this._tree.prop(pe.mounted))&&r.overlay){let s=e-this.from;for(let{from:o,to:l}of r.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new Bt(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Fr(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Un(this,e,t,!1)}resolveInner(e,t=0){return Un(this,e,t,!0)}enterUnfinishedNodesBefore(e){return L0(this,e)}getChild(e,t=null,n=null){let r=no(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return no(this,e,t,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return ro(this,e)}}function no(i,e,t,n){let r=i.cursor(),s=[];if(!r.firstChild())return s;if(t!=null){for(;!r.type.is(t);)if(!r.nextSibling())return s}for(;;){if(n!=null&&r.type.is(n))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return n==null?s:[]}}function ro(i,e,t=e.length-1){for(let n=i.parent;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class uS{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class hi{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return s<0?null:new hi(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&He.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new hi(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new hi(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new hi(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Fr(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,s=n.buffer[this.index+3];if(s>r){let o=n.buffer[this.index+1];e.push(n.slice(r,s,o)),t.push(0)}return new Me(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Un(this,e,t,!1)}resolveInner(e,t=0){return Un(this,e,t,!0)}enterUnfinishedNodesBefore(e){return L0(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let r=no(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return no(this,e,t,n)}get node(){return this}matchContext(e){return ro(this,e)}}class Fr{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Bt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return e?e instanceof Bt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&He.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&He.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&He.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let s=t+e,o=e<0?-1:n._tree.children.length;s!=o;s+=e){let l=n._tree.children[s];if(this.mode&He.IncludeAnonymous||l instanceof hn||!l.type.isAnonymous||pc(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=s+1;break e}r=this.stack[--s]}for(let r=n;r<this.stack.length;r++)t=new hi(this.buffer,t,this.stack[r]);return this.bufferNode=new hi(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return ro(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return ro(this.node,e,r);let o=n[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function pc(i){return i.children.some(e=>e instanceof hn||!e.type.isAnonymous||pc(e))}function fS(i){var e;let{buffer:t,nodeSet:n,maxBufferLength:r=lS,reused:s=[],minRepeatType:o=n.types.length}=i,l=Array.isArray(t)?new dc(t,t.length):t,a=n.types,c=0,h=0;function u(w,A,M,R,P){let{id:x,start:E,end:T,size:D}=l,B=h;for(;D<0;)if(l.next(),D==-1){let H=s[x];M.push(H),R.push(E-w);return}else if(D==-3){c=x;return}else if(D==-4){h=x;return}else throw new RangeError(`Unrecognized record size: ${D}`);let ee=a[x],oe,G,he=E-w;if(T-E<=r&&(G=g(l.pos-A,P))){let H=new Uint16Array(G.size-G.skip),S=l.pos-G.size,ie=H.length;for(;l.pos>S;)ie=m(G.start,H,ie);oe=new hn(H,T-G.start,n),he=G.start-w}else{let H=l.pos-D;l.next();let S=[],ie=[],N=x>=o?x:-1,Re=0,Z=T;for(;l.pos>H;)N>=0&&l.id==N&&l.size>=0?(l.end<=Z-r&&(d(S,ie,E,Re,l.end,Z,N,B),Re=S.length,Z=l.end),l.next()):u(E,H,S,ie,N);if(N>=0&&Re>0&&Re<S.length&&d(S,ie,E,Re,E,Z,N,B),S.reverse(),ie.reverse(),N>-1&&Re>0){let Ae=f(ee);oe=mc(ee,S,ie,0,S.length,0,T-E,Ae,Ae)}else oe=p(ee,S,ie,T-E,B-T)}M.push(oe),R.push(he)}function f(w){return(A,M,R)=>{let P=0,x=A.length-1,E,T;if(x>=0&&(E=A[x])instanceof Me){if(!x&&E.type==w&&E.length==R)return E;(T=E.prop(pe.lookAhead))&&(P=M[x]+E.length+T)}return p(w,A,M,R,P)}}function d(w,A,M,R,P,x,E,T){let D=[],B=[];for(;w.length>R;)D.push(w.pop()),B.push(A.pop()+M-P);w.push(p(n.types[E],D,B,x-P,T-x)),A.push(P-M)}function p(w,A,M,R,P=0,x){if(c){let E=[pe.contextHash,c];x=x?[E].concat(x):[E]}if(P>25){let E=[pe.lookAhead,P];x=x?[E].concat(x):[E]}return new Me(w,A,M,R,x)}function g(w,A){let M=l.fork(),R=0,P=0,x=0,E=M.end-r,T={size:0,start:0,skip:0};e:for(let D=M.pos-w;M.pos>D;){let B=M.size;if(M.id==A&&B>=0){T.size=R,T.start=P,T.skip=x,x+=4,R+=4,M.next();continue}let ee=M.pos-B;if(B<0||ee<D||M.start<E)break;let oe=M.id>=o?4:0,G=M.start;for(M.next();M.pos>ee;){if(M.size<0)if(M.size==-3)oe+=4;else break e;else M.id>=o&&(oe+=4);M.next()}P=G,R+=B,x+=oe}return(A<0||R==w)&&(T.size=R,T.start=P,T.skip=x),T.size>4?T:void 0}function m(w,A,M){let{id:R,start:P,end:x,size:E}=l;if(l.next(),E>=0&&R<o){let T=M;if(E>4){let D=l.pos-(E-4);for(;l.pos>D;)M=m(w,A,M)}A[--M]=T,A[--M]=x-w,A[--M]=P-w,A[--M]=R}else E==-3?c=R:E==-4&&(h=R);return M}let _=[],k=[];for(;l.pos>0;)u(i.start||0,i.bufferStart||0,_,k,-1);let y=(e=i.length)!==null&&e!==void 0?e:_.length?k[0]+_[0].length:0;return new Me(a[i.topID],_.reverse(),k.reverse(),y)}const Qu=new WeakMap;function Hs(i,e){if(!i.isAnonymous||e instanceof hn||e.type!=i)return 1;let t=Qu.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=i||!(n instanceof Me)){t=1;break}t+=Hs(i,n)}Qu.set(e,t)}return t}function mc(i,e,t,n,r,s,o,l,a){let c=0;for(let p=n;p<r;p++)c+=Hs(i,e[p]);let h=Math.ceil(c*1.5/8),u=[],f=[];function d(p,g,m,_,k){for(let y=m;y<_;){let w=y,A=g[y],M=Hs(i,p[y]);for(y++;y<_;y++){let R=Hs(i,p[y]);if(M+R>=h)break;M+=R}if(y==w+1){if(M>h){let R=p[w];d(R.children,R.positions,0,R.children.length,g[w]+k);continue}u.push(p[w])}else{let R=g[y-1]+p[y-1].length-A;u.push(mc(i,p,g,w,y,A,R,null,a))}f.push(A+k-s)}}return d(e,t,n,r,0),(l||a)(u,f,o)}class gM{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof hi?this.setBuffer(e.context.buffer,e.index,t):e instanceof Bt&&this.map.set(e.tree,t)}get(e){return e instanceof hi?this.getBuffer(e.context.buffer,e.index):e instanceof Bt?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class wi{constructor(e,t,n,r,s=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let r=[new wi(0,e.length,e,0,!1,n)];for(let s of t)s.to>e.length&&r.push(s);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let h=l<t.length?t[l]:null,u=h?h.fromA:1e9;if(u-a>=n)for(;o&&o.from<u;){let f=o;if(a>=f.from||u<=f.to||c){let d=Math.max(f.from,a)-c,p=Math.min(f.to,u)-c;f=d>=p?null:new wi(d,p,f.tree,f.offset+c,l>0,!!h)}if(f&&r.push(f),o.to>u)break;o=s<e.length?e[s++]:null}if(!h)break;a=h.toA,c=h.toA-h.toB}return r}}class R0{startParse(e,t,n){return typeof e=="string"&&(e=new dS(e)),n=n?n.length?n.map(r=>new Rt(r.from,r.to)):[new Rt(0,0)]:[new Rt(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let s=r.advance();if(s)return s}}}class dS{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function _M(i){return(e,t,n,r)=>new mS(e,i,t,n,r)}class ef{constructor(e,t,n,r,s){this.parser=e,this.parse=t,this.overlay=n,this.target=r,this.ranges=s}}class pS{constructor(e,t,n,r,s,o,l){this.parser=e,this.predicate=t,this.mounts=n,this.index=r,this.start=s,this.target=o,this.prev=l,this.depth=0,this.ranges=[]}}const Oa=new pe({perNode:!0});class mS{constructor(e,t,n,r,s){this.nest=t,this.input=n,this.fragments=r,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let n=this.baseParse.advance();if(!n)return null;if(this.baseParse=null,this.baseTree=n,this.startInner(),this.stoppedAt!=null)for(let r of this.inner)r.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let n=this.baseTree;return this.stoppedAt!=null&&(n=new Me(n.type,n.children,n.positions,n.length,n.propValues.concat([[Oa,this.stoppedAt]]))),n}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let n=Object.assign(Object.create(null),e.target.props);n[pe.mounted.id]=new cS(t,e.overlay,e.parser),e.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new bS(this.fragments),t=null,n=null,r=new Fr(new Bt(this.baseTree,this.ranges[0].from,0,null),He.IncludeAnonymous|He.IgnoreMounts);e:for(let s,o;this.stoppedAt==null||r.from<this.stoppedAt;){let l=!0,a;if(e.hasNode(r)){if(t){let c=t.mounts.find(h=>h.frag.from<=r.from&&h.frag.to>=r.to&&h.mount.overlay);if(c)for(let h of c.mount.overlay){let u=h.from+c.pos,f=h.to+c.pos;u>=r.from&&f<=r.to&&!t.ranges.some(d=>d.from<f&&d.to>u)&&t.ranges.push({from:u,to:f})}}l=!1}else if(n&&(o=gS(n.ranges,r.from,r.to)))l=o!=2;else if(!r.type.isAnonymous&&r.from<r.to&&(s=this.nest(r,this.input))){r.tree||_S(r);let c=e.findMounts(r.from,s.parser);if(typeof s.overlay=="function")t=new pS(s.parser,s.overlay,c,this.inner.length,r.from,r.tree,t);else{let h=rf(this.ranges,s.overlay||[new Rt(r.from,r.to)]);h.length&&this.inner.push(new ef(s.parser,s.parser.startParse(this.input,sf(c,h),h),s.overlay?s.overlay.map(u=>new Rt(u.from-r.from,u.to-r.from)):null,r.tree,h)),s.overlay?h.length&&(n={ranges:h,depth:0,prev:n}):l=!1}}else t&&(a=t.predicate(r))&&(a===!0&&(a=new Rt(r.from,r.to)),a.from<a.to&&t.ranges.push(a));if(l&&r.firstChild())t&&t.depth++,n&&n.depth++;else for(;!r.nextSibling();){if(!r.parent())break e;if(t&&!--t.depth){let c=rf(this.ranges,t.ranges);c.length&&this.inner.splice(t.index,0,new ef(t.parser,t.parser.startParse(this.input,sf(t.mounts,c),c),t.ranges.map(h=>new Rt(h.from-t.start,h.to-t.start)),t.target,c)),t=t.prev}n&&!--n.depth&&(n=n.prev)}}}}function gS(i,e,t){for(let n of i){if(n.from>=t)break;if(n.to>e)return n.from<=e&&n.to>=t?2:1}return 0}function tf(i,e,t,n,r,s){if(e<t){let o=i.buffer[e+1];n.push(i.slice(e,t,o)),r.push(o-s)}}function _S(i){let{node:e}=i,t=0;do i.parent(),t++;while(!i.tree);let n=0,r=i.tree,s=0;for(;s=r.positions[n]+i.from,!(s<=e.from&&s+r.children[n].length>=e.to);n++);let o=r.children[n],l=o.buffer;function a(c,h,u,f,d){let p=c;for(;l[p+2]+s<=e.from;)p=l[p+3];let g=[],m=[];tf(o,c,p,g,m,f);let _=l[p+1],k=l[p+2],y=_+s==e.from&&k+s==e.to&&l[p]==e.type.id;return g.push(y?e.toTree():a(p+4,l[p+3],o.set.types[l[p]],_,k-_)),m.push(_-f),tf(o,l[p+3],h,g,m,f),new Me(u,g,m,d)}r.children[n]=a(0,l.length,gt.none,0,o.length);for(let c=0;c<=t;c++)i.childAfter(e.from)}class nf{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(He.IncludeAnonymous|He.IgnoreMounts)}moveTo(e){let{cursor:t}=this,n=e-this.offset;for(;!this.done&&t.from<n;)t.to>=e&&t.enter(n,1,He.IgnoreOverlays|He.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof Me)t=t.children[0];else break}return!1}}class bS{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let n=this.curFrag=e[0];this.curTo=(t=n.tree.prop(Oa))!==null&&t!==void 0?t:n.to,this.inner=new nf(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(Oa))!==null&&e!==void 0?e:t.to,this.inner=new nf(t.tree,-t.offset)}}findMounts(e,t){var n;let r=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(n=s.tree)===null||n===void 0?void 0:n.prop(pe.mounted);if(o&&o.parser==t)for(let l=this.fragI;l<this.fragments.length;l++){let a=this.fragments[l];if(a.from>=s.to)break;a.tree==this.curFrag.tree&&r.push({frag:a,pos:s.from-a.offset,mount:o})}}}return r}}function rf(i,e){let t=null,n=e;for(let r=1,s=0;r<i.length;r++){let o=i[r-1].to,l=i[r].from;for(;s<n.length;s++){let a=n[s];if(a.from>=l)break;a.to<=o||(t||(n=t=e.slice()),a.from<o?(t[s]=new Rt(a.from,o),a.to>l&&t.splice(s+1,0,new Rt(l,a.to))):a.to>l?t[s--]=new Rt(l,a.to):t.splice(s--,1))}}return n}function yS(i,e,t,n){let r=0,s=0,o=!1,l=!1,a=-1e9,c=[];for(;;){let h=r==i.length?1e9:o?i[r].to:i[r].from,u=s==e.length?1e9:l?e[s].to:e[s].from;if(o!=l){let f=Math.max(a,t),d=Math.min(h,u,n);f<d&&c.push(new Rt(f,d))}if(a=Math.min(h,u),a==1e9)break;h==a&&(o?(o=!1,r++):o=!0),u==a&&(l?(l=!1,s++):l=!0)}return c}function sf(i,e){let t=[];for(let{pos:n,mount:r,frag:s}of i){let o=n+(r.overlay?r.overlay[0].from:0),l=o+r.tree.length,a=Math.max(s.from,o),c=Math.min(s.to,l);if(r.overlay){let h=r.overlay.map(f=>new Rt(f.from+n,f.to+n)),u=yS(e,h,a,c);for(let f=0,d=a;;f++){let p=f==u.length,g=p?c:u[f].from;if(g>d&&t.push(new wi(d,g,r.tree,-o,s.from>=d||s.openStart,s.to<=g||s.openEnd)),p)break;d=u[f].to}}else t.push(new wi(a,c,r.tree,-o,s.from>=o||s.openStart,s.to<=l||s.openEnd))}return t}let wS=0;class oi{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=wS++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new oi([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new so;return t=>t.modified.indexOf(e)>-1?t:so.get(t.base||t,t.modified.concat(e).sort((n,r)=>n.id-r.id))}}let vS=0;class so{constructor(){this.instances=[],this.id=vS++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(l=>l.base==e&&kS(t,l.modified));if(n)return n;let r=[],s=new oi(r,e,t);for(let l of t)l.instances.push(s);let o=xS(t);for(let l of e.set)if(!l.modified.length)for(let a of o)r.push(so.get(l,a));return s}}function kS(i,e){return i.length==e.length&&i.every((t,n)=>t==e[n])}function xS(i){let e=[[]];for(let t=0;t<i.length;t++)for(let n=0,r=e.length;n<r;n++)e.push(e[n].concat(i[t]));return e.sort((t,n)=>n.length-t.length)}function SS(i){let e=Object.create(null);for(let t in i){let n=i[t];Array.isArray(n)||(n=[n]);for(let r of t.split(" "))if(r){let s=[],o=2,l=r;for(let u=0;;){if(l=="..."&&u>0&&u+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),u+=f[0].length,u==r.length)break;let d=r[u++];if(u==r.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+r);l=r.slice(u)}let a=s.length-1,c=s[a];if(!c)throw new RangeError("Invalid path: "+r);let h=new oo(n,o,a>0?s.slice(0,a):null);e[c]=h.sort(e[c])}}return I0.add(e)}const I0=new pe;class oo{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}oo.empty=new oo([],2,null);function N0(i,e){let t=Object.create(null);for(let s of i)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:n,all:r=null}=e||{};return{style:s=>{let o=r;for(let l of s)for(let a of l.set){let c=t[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:n}}function ES(i,e){let t=null;for(let n of i){let r=n.style(e);r&&(t=t?t+" "+r:r)}return t}function AS(i,e,t,n=0,r=i.length){let s=new TS(n,Array.isArray(e)?e:[e],t);s.highlightRange(i.cursor(),n,r,"",s.highlighters),s.flush(r)}class TS{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,s){let{type:o,from:l,to:a}=e;if(l>=n||a<=t)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=r,h=CS(e)||oo.empty,u=ES(s,h.tags);if(u&&(c&&(c+=" "),c+=u,h.mode==1&&(r+=(r?" ":"")+u)),this.startSpan(e.from,c),h.opaque)return;let f=e.tree&&e.tree.prop(pe.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+l,1),p=this.highlighters.filter(m=>!m.scope||m.scope(f.tree.type)),g=e.firstChild();for(let m=0,_=l;;m++){let k=m<f.overlay.length?f.overlay[m]:null,y=k?k.from+l:a,w=Math.max(t,_),A=Math.min(n,y);if(w<A&&g)for(;e.from<A&&(this.highlightRange(e,w,A,r,s),this.startSpan(Math.min(A,e.to),c),!(e.to>=y||!e.nextSibling())););if(!k||y>n)break;_=k.to+l,_>t&&(this.highlightRange(d.cursor(),Math.max(t,k.from+l),Math.min(n,_),r,p),this.startSpan(_,c))}g&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,s),this.startSpan(Math.min(n,e.to),c)}while(e.nextSibling());e.parent()}}}function CS(i){let e=i.type.prop(I0);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}const U=oi.define,ws=U(),Ei=U(),of=U(Ei),lf=U(Ei),Ai=U(),vs=U(Ai),_l=U(Ai),ni=U(),zi=U(ni),ti=U(),ii=U(),Ma=U(),or=U(Ma),ks=U(),b={comment:ws,lineComment:U(ws),blockComment:U(ws),docComment:U(ws),name:Ei,variableName:U(Ei),typeName:of,tagName:U(of),propertyName:lf,attributeName:U(lf),className:U(Ei),labelName:U(Ei),namespace:U(Ei),macroName:U(Ei),literal:Ai,string:vs,docString:U(vs),character:U(vs),attributeValue:U(vs),number:_l,integer:U(_l),float:U(_l),bool:U(Ai),regexp:U(Ai),escape:U(Ai),color:U(Ai),url:U(Ai),keyword:ti,self:U(ti),null:U(ti),atom:U(ti),unit:U(ti),modifier:U(ti),operatorKeyword:U(ti),controlKeyword:U(ti),definitionKeyword:U(ti),moduleKeyword:U(ti),operator:ii,derefOperator:U(ii),arithmeticOperator:U(ii),logicOperator:U(ii),bitwiseOperator:U(ii),compareOperator:U(ii),updateOperator:U(ii),definitionOperator:U(ii),typeOperator:U(ii),controlOperator:U(ii),punctuation:Ma,separator:U(Ma),bracket:or,angleBracket:U(or),squareBracket:U(or),paren:U(or),brace:U(or),content:ni,heading:zi,heading1:U(zi),heading2:U(zi),heading3:U(zi),heading4:U(zi),heading5:U(zi),heading6:U(zi),contentSeparator:U(ni),list:U(ni),quote:U(ni),emphasis:U(ni),strong:U(ni),link:U(ni),monospace:U(ni),strikethrough:U(ni),inserted:U(),deleted:U(),changed:U(),invalid:U(),meta:ks,documentMeta:U(ks),annotation:U(ks),processingInstruction:U(ks),definition:oi.defineModifier(),constant:oi.defineModifier(),function:oi.defineModifier(),standard:oi.defineModifier(),local:oi.defineModifier(),special:oi.defineModifier()};N0([{tag:b.link,class:"tok-link"},{tag:b.heading,class:"tok-heading"},{tag:b.emphasis,class:"tok-emphasis"},{tag:b.strong,class:"tok-strong"},{tag:b.keyword,class:"tok-keyword"},{tag:b.atom,class:"tok-atom"},{tag:b.bool,class:"tok-bool"},{tag:b.url,class:"tok-url"},{tag:b.labelName,class:"tok-labelName"},{tag:b.inserted,class:"tok-inserted"},{tag:b.deleted,class:"tok-deleted"},{tag:b.literal,class:"tok-literal"},{tag:b.string,class:"tok-string"},{tag:b.number,class:"tok-number"},{tag:[b.regexp,b.escape,b.special(b.string)],class:"tok-string2"},{tag:b.variableName,class:"tok-variableName"},{tag:b.local(b.variableName),class:"tok-variableName tok-local"},{tag:b.definition(b.variableName),class:"tok-variableName tok-definition"},{tag:b.special(b.variableName),class:"tok-variableName2"},{tag:b.definition(b.propertyName),class:"tok-propertyName tok-definition"},{tag:b.typeName,class:"tok-typeName"},{tag:b.namespace,class:"tok-namespace"},{tag:b.className,class:"tok-className"},{tag:b.macroName,class:"tok-macroName"},{tag:b.propertyName,class:"tok-propertyName"},{tag:b.operator,class:"tok-operator"},{tag:b.comment,class:"tok-comment"},{tag:b.meta,class:"tok-meta"},{tag:b.invalid,class:"tok-invalid"},{tag:b.punctuation,class:"tok-punctuation"}]);var bl;const Ki=new pe;function B0(i){return X.define({combine:i?e=>e.concat(i):void 0})}const OS=new pe;class It{constructor(e,t,n=[],r=""){this.data=e,this.name=r,be.prototype.hasOwnProperty("tree")||Object.defineProperty(be.prototype,"tree",{get(){return it(this)}}),this.parser=t,this.extension=[Bi.of(this),be.languageData.of((s,o,l)=>{let a=af(s,o,l),c=a.type.prop(Ki);if(!c)return[];let h=s.facet(c),u=a.type.prop(OS);if(u){let f=a.resolve(o-a.from,l);for(let d of u)if(d.test(f,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(h)}}return h})].concat(n)}isActiveAt(e,t,n=-1){return af(e,t,n).type.prop(Ki)==this.data}findRegions(e){let t=e.facet(Bi);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(s,o)=>{if(s.prop(Ki)==this.data){n.push({from:o,to:o+s.length});return}let l=s.prop(pe.mounted);if(l){if(l.tree.prop(Ki)==this.data){if(l.overlay)for(let a of l.overlay)n.push({from:a.from+o,to:a.to+o});else n.push({from:o,to:o+s.length});return}else if(l.overlay){let a=n.length;if(r(l.tree,l.overlay[0].from+o),n.length>a)return}}for(let a=0;a<s.children.length;a++){let c=s.children[a];c instanceof Me&&r(c,s.positions[a]+o)}};return r(it(e),0),n}get allowsNesting(){return!0}}It.setState=de.define();function af(i,e,t){let n=i.facet(Bi),r=it(i).topNode;if(!n||n.allowsNesting)for(let s=r;s;s=s.enter(e,t,He.ExcludeBuffers))s.type.isTop&&(r=s);return r}class Da extends It{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=B0(e.languageData);return new Da(t,e.parser.configure({props:[Ki.add(n=>n.isTop?t:void 0)]}),e.name)}configure(e,t){return new Da(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function it(i){let e=i.field(It.state,!1);return e?e.tree:Me.empty}class MS{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let lr=null;class zn{constructor(e,t,n=[],r,s,o,l,a){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new zn(e,t,[],Me.empty,0,n,[],null)}startParse(){return this.parser.startParse(new MS(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Me.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(wi.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(wi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=lr;lr=this;try{return e()}finally{lr=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=cf(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,h,u,f)=>a.push({fromA:c,toA:h,fromB:u,toB:f})),n=wi.applyChanges(n,a),r=Me.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let h=e.mapPos(c.from,1),u=e.mapPos(c.to,-1);h<u&&l.push({from:h,to:u})}}}return new zn(this.parser,t,n,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:s}=this.skipped[n];r<e.to&&s>e.from&&(this.fragments=cf(this.fragments,r,s),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends R0{createParse(t,n,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let a=lr;if(a){for(let c of r)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Me(gt.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return lr}}function cf(i,e,t){return wi.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}class Wn{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new Wn(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=zn.create(e.facet(Bi).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new Wn(n)}}It.state=kt.define({create:Wn.init,update(i,e){for(let t of e.effects)if(t.is(It.setState))return t.value;return e.startState.facet(Bi)!=e.state.facet(Bi)?Wn.init(e.state):i.apply(e)}});let H0=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(H0=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const yl=typeof navigator<"u"&&(!((bl=navigator.scheduling)===null||bl===void 0)&&bl.isInputPending)?()=>navigator.scheduling.isInputPending():null,DS=ct.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(It.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(It.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=H0(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,s=n.field(It.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!yl?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&n.doc.length>r+1e3,a=s.context.work(()=>yl&&yl()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:It.setState.of(new Wn(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Kt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Bi=X.define({combine(i){return i.length?i[0]:null},enables:i=>[It.state,DS,Q.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]});class yM{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class F0{constructor(e,t,n,r,s,o=void 0){this.name=e,this.alias=t,this.extensions=n,this.filename=r,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:n}=e;if(!t){if(!n)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(n)}return new F0(e.name,(e.alias||[]).concat(e.name).map(r=>r.toLowerCase()),e.extensions||[],e.filename,t,n)}static matchFilename(e,t){for(let r of e)if(r.filename&&r.filename.test(t))return r;let n=/\.([^.]+)$/.exec(t);if(n){for(let r of e)if(r.extensions.indexOf(n[1])>-1)return r}return null}static matchLanguageName(e,t,n=!0){t=t.toLowerCase();for(let r of e)if(r.alias.some(s=>s==t))return r;if(n)for(let r of e)for(let s of r.alias){let o=t.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(t[o-1])&&!/\w/.test(t[o+s.length])))return r}return null}}const V0=X.define(),Eo=X.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function nn(i){let e=i.facet(Eo);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function Vr(i,e){let t="",n=i.tabSize,r=i.facet(Eo)[0];if(r=="	"){for(;e>=n;)t+="	",e-=n;r=" "}for(let s=0;s<e;s++)t+=r;return t}function gc(i,e){i instanceof be&&(i=new Ao(i));for(let n of i.state.facet(V0)){let r=n(i,e);if(r!==void 0)return r}let t=it(i.state);return t?LS(i,t,e):null}class Ao{constructor(e,t={}){this.state=e,this.options=t,this.unit=nn(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=n.from&&r<=n.to?s&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),s=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(n,n.search(/\S|$/))),s}countColumn(e,t=e.length){return Yr(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const PS=new pe;function LS(i,e,t){return j0(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,i)}function RS(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function IS(i){let e=i.type.prop(PS);if(e)return e;let t=i.firstChild,n;if(t&&(n=t.type.prop(pe.closedBy))){let r=i.lastChild,s=r&&n.indexOf(r.name)>-1;return o=>U0(o,!0,1,void 0,s&&!RS(o)?r.from:void 0)}return i.parent==null?NS:null}function j0(i,e,t){for(;i;i=i.parent){let n=IS(i);if(n)return n(_c.create(t,e,i))}return null}function NS(){return 0}class _c extends Ao{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}static create(e,t,n){return new _c(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(BS(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?j0(e,this.pos,this.base):0}}function BS(i,e){for(let t=e;t;t=t.parent)if(i==t)return!0;return!1}function HS(i){let e=i.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let r=i.options.simulateBreak,s=i.state.doc.lineAt(t.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==n)return null;if(!a.type.isSkipped)return a.from<o?t:null;l=a.to}}function wM({closing:i,align:e=!0,units:t=1}){return n=>U0(n,e,t,i)}function U0(i,e,t,n,r){let s=i.textAfter,o=s.match(/^\s*/)[0].length,l=n&&s.slice(o,o+n.length)==n||r==i.pos+o,a=e?HS(i):null;return a?l?i.column(a.from):i.column(a.to):i.baseIndent+(l?0:i.unit*t)}const vM=i=>i.baseIndent;function kM({except:i,units:e=1}={}){return t=>{let n=i&&i.test(t.textAfter);return t.baseIndent+(n?0:e*t.unit)}}const FS=200;function VS(){return be.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let e=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!e.length)return i;let t=i.newDoc,{head:n}=i.newSelection.main,r=t.lineAt(n);if(n>r.from+FS)return i;let s=t.sliceString(r.from,n);if(!e.some(c=>c.test(s)))return i;let{state:o}=i,l=-1,a=[];for(let{head:c}of o.selection.ranges){let h=o.doc.lineAt(c);if(h.from==l)continue;l=h.from;let u=gc(o,h.from);if(u==null)continue;let f=/^\s*/.exec(h.text)[0],d=Vr(o,u);f!=d&&a.push({from:h.from,to:h.from+f.length,insert:d})}return a.length?[i,{changes:a,sequential:!0}]:i})}const jS=X.define(),US=new pe;function xM(i){let e=i.firstChild,t=i.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?i.to:t.from}:null}function zS(i,e,t){let n=it(i);if(n.length<t)return null;let r=n.resolveInner(t,1),s=null;for(let o=r;o;o=o.parent){if(o.to<=t||o.from>t)continue;if(s&&o.from<e)break;let l=o.type.prop(US);if(l&&(o.to<n.length-50||n.length==i.doc.length||!WS(o))){let a=l(o,i);a&&a.from<=t&&a.from>=e&&a.to>t&&(s=a)}}return s}function WS(i){let e=i.lastChild;return e&&e.to==i.to&&e.type.isError}function lo(i,e,t){for(let n of i.facet(jS)){let r=n(i,e,t);if(r)return r}return zS(i,e,t)}function z0(i,e){let t=e.mapPos(i.from,1),n=e.mapPos(i.to,-1);return t>=n?void 0:{from:t,to:n}}const To=de.define({map:z0}),Qr=de.define({map:z0});function W0(i){let e=[];for(let{head:t}of i.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(i.lineBlockAt(t));return e}const rn=kt.define({create(){return ue.none},update(i,e){i=i.map(e.changes);for(let t of e.effects)t.is(To)&&!GS(i,t.value.from,t.value.to)?i=i.update({add:[hf.range(t.value.from,t.value.to)]}):t.is(Qr)&&(i=i.update({filter:(n,r)=>t.value.from!=n||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:n}=e.selection.main;i.between(n,n,(r,s)=>{r<n&&s>n&&(t=!0)}),t&&(i=i.update({filterFrom:n,filterTo:n,filter:(r,s)=>s<=n||r>=n}))}return i},provide:i=>Q.decorations.from(i),toJSON(i,e){let t=[];return i.between(0,e.doc.length,(n,r)=>{t.push(n,r)}),t},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<i.length;){let n=i[t++],r=i[t++];if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(hf.range(n,r))}return ue.set(e,!0)}});function ao(i,e,t){var n;let r=null;return(n=i.field(rn,!1))===null||n===void 0||n.between(e,t,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function GS(i,e,t){let n=!1;return i.between(e,e,(r,s)=>{r==e&&s==t&&(n=!0)}),n}function G0(i,e){return i.field(rn,!1)?e:e.concat(de.appendConfig.of($0()))}const qS=i=>{for(let e of W0(i)){let t=lo(i.state,e.from,e.to);if(t)return i.dispatch({effects:G0(i.state,[To.of(t),q0(i,t)])}),!0}return!1},$S=i=>{if(!i.state.field(rn,!1))return!1;let e=[];for(let t of W0(i)){let n=ao(i.state,t.from,t.to);n&&e.push(Qr.of(n),q0(i,n,!1))}return e.length&&i.dispatch({effects:e}),e.length>0};function q0(i,e,t=!0){let n=i.state.doc.lineAt(e.from).number,r=i.state.doc.lineAt(e.to).number;return Q.announce.of(`${i.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${i.state.phrase("to")} ${r}.`)}const KS=i=>{let{state:e}=i,t=[];for(let n=0;n<e.doc.length;){let r=i.lineBlockAt(n),s=lo(e,r.from,r.to);s&&t.push(To.of(s)),n=(s?i.lineBlockAt(s.to):r).to+1}return t.length&&i.dispatch({effects:G0(i.state,t)}),!!t.length},XS=i=>{let e=i.state.field(rn,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,i.state.doc.length,(n,r)=>{t.push(Qr.of({from:n,to:r}))}),i.dispatch({effects:t}),!0},JS=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:qS},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:$S},{key:"Ctrl-Alt-[",run:KS},{key:"Ctrl-Alt-]",run:XS}],YS={placeholderDOM:null,placeholderText:""},ZS=X.define({combine(i){return cn(i,YS)}});function $0(i){return[rn,tE]}const hf=ue.replace({widget:new class extends gi{toDOM(i){let{state:e}=i,t=e.facet(ZS),n=s=>{let o=i.lineBlockAt(i.posAtDOM(s.target)),l=ao(i.state,o.from,o.to);l&&i.dispatch({effects:Qr.of(l)}),s.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(i,n);let r=document.createElement("span");return r.textContent=t.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}}}),QS={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class wl extends Ni{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function eE(i={}){let e=Object.assign(Object.assign({},QS),i),t=new wl(e,!0),n=new wl(e,!1),r=ct.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Bi)!=o.state.facet(Bi)||o.startState.field(rn,!1)!=o.state.field(rn,!1)||it(o.startState)!=it(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new en;for(let a of o.viewportLineBlocks){let c=ao(o.state,a.from,a.to)?n:lo(o.state,a.from,a.to)?t:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:s}=e;return[r,eS({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(r))===null||l===void 0?void 0:l.markers)||xe.empty},initialSpacer(){return new wl(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let c=ao(o.state,l.from,l.to);if(c)return o.dispatch({effects:Qr.of(c)}),!0;let h=lo(o.state,l.from,l.to);return h?(o.dispatch({effects:To.of(h)}),!0):!1}})}),$0()]}const tE=Q.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Xn{constructor(e,t){this.specs=e;let n;function r(l){let a=Li.newName();return(n||(n=Object.create(null)))["."+a]=l,a}const s=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof It?l=>l.prop(Ki)==o.data:o?l=>l==o:void 0,this.style=N0(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=n?new Li(n):null,this.themeType=t.themeType}static define(e,t){return new Xn(e,t||{})}}const Pa=X.define(),K0=X.define({combine(i){return i.length?[i[0]]:null}});function vl(i){let e=i.facet(Pa);return e.length?e:i.facet(K0)}function bc(i,e){let t=[nE],n;return i instanceof Xn&&(i.module&&t.push(Q.styleModule.of(i.module)),n=i.themeType),e?.fallback?t.push(K0.of(i)):n?t.push(Pa.computeN([Q.darkTheme],r=>r.facet(Q.darkTheme)==(n=="dark")?[i]:[])):t.push(Pa.of(i)),t}class iE{constructor(e){this.markCache=Object.create(null),this.tree=it(e.state),this.decorations=this.buildDeco(e,vl(e.state))}update(e){let t=it(e.state),n=vl(e.state),r=n!=vl(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return ue.none;let n=new en;for(let{from:r,to:s}of e.visibleRanges)AS(this.tree,t,(o,l,a)=>{n.add(o,l,this.markCache[a]||(this.markCache[a]=ue.mark({class:a})))},r,s);return n.finish()}}const nE=Jr.high(ct.fromClass(iE,{decorations:i=>i.decorations})),rE=Xn.define([{tag:b.meta,color:"#404740"},{tag:b.link,textDecoration:"underline"},{tag:b.heading,textDecoration:"underline",fontWeight:"bold"},{tag:b.emphasis,fontStyle:"italic"},{tag:b.strong,fontWeight:"bold"},{tag:b.strikethrough,textDecoration:"line-through"},{tag:b.keyword,color:"#708"},{tag:[b.atom,b.bool,b.url,b.contentSeparator,b.labelName],color:"#219"},{tag:[b.literal,b.inserted],color:"#164"},{tag:[b.string,b.deleted],color:"#a11"},{tag:[b.regexp,b.escape,b.special(b.string)],color:"#e40"},{tag:b.definition(b.variableName),color:"#00f"},{tag:b.local(b.variableName),color:"#30a"},{tag:[b.typeName,b.namespace],color:"#085"},{tag:b.className,color:"#167"},{tag:[b.special(b.variableName),b.macroName],color:"#256"},{tag:b.definition(b.propertyName),color:"#00c"},{tag:b.comment,color:"#940"},{tag:b.invalid,color:"#f00"}]),sE=1e4,oE="()[]{}",lE=new pe;function La(i,e,t){let n=i.prop(e<0?pe.openedBy:pe.closedBy);if(n)return n;if(i.name.length==1){let r=t.indexOf(i.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function Ra(i){let e=i.type.prop(lE);return e?e(i.node):i}function Sn(i,e,t,n={}){let r=n.maxScanDistance||sE,s=n.brackets||oE,o=it(i),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let c=La(a.type,t,s);if(c&&a.from<a.to){let h=Ra(a);if(h&&(t>0?e>=h.from&&e<h.to:e>h.from&&e<=h.to))return aE(i,e,t,a,h,c,s)}}return cE(i,e,t,o,l.type,r,s)}function aE(i,e,t,n,r,s,o){let l=n.parent,a={from:r.from,to:r.to},c=0,h=l?.cursor();if(h&&(t<0?h.childBefore(n.from):h.childAfter(n.to)))do if(t<0?h.to<=n.from:h.from>=n.to){if(c==0&&s.indexOf(h.type.name)>-1&&h.from<h.to){let u=Ra(h);return{start:a,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(La(h.type,t,o))c++;else if(La(h.type,-t,o)){if(c==0){let u=Ra(h);return{start:a,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}c--}}while(t<0?h.prevSibling():h.nextSibling());return{start:a,matched:!1}}function cE(i,e,t,n,r,s,o){let l=t<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},h=i.doc.iterRange(e,t>0?i.doc.length:0),u=0;for(let f=0;!h.next().done&&f<=s;){let d=h.value;t<0&&(f+=d.length);let p=e+f*t;for(let g=t>0?0:d.length-1,m=t>0?d.length:-1;g!=m;g+=t){let _=o.indexOf(d[g]);if(!(_<0||n.resolveInner(p+g,1).type!=r))if(_%2==0==t>0)u++;else{if(u==1)return{start:c,end:{from:p+g,to:p+g+1},matched:_>>1==a>>1};u--}}t>0&&(f+=d.length)}return h.done?{start:c,matched:!1}:null}function uf(i,e,t,n=0,r=0){e==null&&(e=i.search(/[^\s\u00a0]/),e==-1&&(e=i.length));let s=r;for(let o=n;o<e;o++)i.charCodeAt(o)==9?s+=t-s%t:s++;return s}class X0{constructor(e,t,n,r){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),n;if(typeof e=="string"?n=t==e:n=t&&(e instanceof RegExp?e.test(t):e(t)),n)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=uf(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:uf(this.string,null,this.tabSize)}match(e,t,n){if(typeof e=="string"){let r=o=>n?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function hE(i){return{name:i.name||"",token:i.token,blankLine:i.blankLine||(()=>{}),startState:i.startState||(()=>!0),copyState:i.copyState||uE,indent:i.indent||(()=>null),languageData:i.languageData||{},tokenTable:i.tokenTable||wc}}function uE(i){if(typeof i!="object")return i;let e={};for(let t in i){let n=i[t];e[t]=n instanceof Array?n.slice():n}return e}const ff=new WeakMap;class ri extends It{constructor(e){let t=B0(e.languageData),n=hE(e),r,s=new class extends R0{createParse(o,l,a){return new dE(r,o,l,a)}};super(t,s,[V0.of((o,l)=>this.getIndent(o,l))],e.name),this.topNode=gE(t),r=this,this.streamParser=n,this.stateAfter=new pe({perNode:!0}),this.tokenTable=e.tokenTable?new Q0(n.tokenTable):mE}static define(e){return new ri(e)}getIndent(e,t){let n=it(e.state),r=n.resolve(t);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=ff.get(e.state),s!=null&&s<t-1e4&&(s=void 0));let l=yc(this,n,0,r.from,s??t),a,c;if(l?(c=l.state,a=l.pos+1):(c=this.streamParser.startState(e.unit),a=0),t-a>1e4)return null;for(;a<t;){let u=e.state.doc.lineAt(a),f=Math.min(t,u.to);if(u.length){let d=o?o(u.from):-1,p=new X0(u.text,e.state.tabSize,e.unit,d<0?void 0:d);for(;p.pos<f-u.from;)Y0(this.streamParser.token,p,c)}else this.streamParser.blankLine(c,e.unit);if(f==t)break;a=u.to+1}let h=e.lineAt(t);return o&&s==null&&ff.set(e.state,h.from),this.streamParser.indent(c,/^\s*(.*)/.exec(h.text)[1],e)}get allowsNesting(){return!1}}function yc(i,e,t,n,r){let s=t>=n&&t+e.length<=r&&e.prop(i.stateAfter);if(s)return{state:i.streamParser.copyState(s),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=t+e.positions[o],c=l instanceof Me&&a<r&&yc(i,l,a,n,r);if(c)return c}return null}function J0(i,e,t,n,r){if(r&&t<=0&&n>=e.length)return e;!r&&e.type==i.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],l=e.children[s],a;if(o<n&&l instanceof Me){if(!(a=J0(i,l,t-o,n-o,r)))break;return r?new Me(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),o+a.length):a}}return null}function fE(i,e,t,n){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),l=s<=t&&o>t&&yc(i,r.tree,0-r.offset,t,o),a;if(l&&(a=J0(i,r.tree,t+r.offset,l.pos+r.offset,!1)))return{state:l.state,tree:a}}return{state:i.streamParser.startState(n?nn(n):4),tree:Me.empty}}class dE{constructor(e,t,n,r){this.lang=e,this.input=t,this.fragments=n,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=zn.get(),o=r[0].from,{state:l,tree:a}=fE(e,n,o,s?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let c=0;c<a.children.length;c++)this.chunks.push(a.children[c]),this.chunkPos.push(a.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(nn(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=zn.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+2048);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let n=t.indexOf(`
`);n>-1&&(t=t.slice(0,n))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),n=e+t.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=n||(t=t.slice(0,s-(n-t.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,l=this.lineAfter(o);t+=l,n=o+l.length}return{line:t,end:n}}skipGapsTo(e,t,n){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+t;if(n>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;t+=o-r}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,n,r,s){if(this.ranges.length>1){s=this.skipGapsTo(t,s,1),t+=s;let o=this.chunk.length;s=this.skipGapsTo(n,s,-1),n+=s,r+=this.chunk.length-o}return this.chunk.push(e,t,n,r),s}parseLine(e){let{line:t,end:n}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new X0(t,e?e.state.tabSize:4,e?nn(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=Y0(s.token,o,this.state);if(l&&(r=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Me.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:pE,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Me(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Me(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Y0(i,e,t){e.start=e.pos;for(let n=0;n<10;n++){let r=i(e,t);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const wc=Object.create(null),jr=[gt.none],pE=new fc(jr),df=[],Z0=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Z0[i]=e_(wc,e);class Q0{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Z0)}resolve(e){return e?this.table[e]||(this.table[e]=e_(this.extra,e)):0}}const mE=new Q0(wc);function kl(i,e){df.indexOf(i)>-1||(df.push(i),console.warn(e))}function e_(i,e){let t=null;for(let s of e.split(".")){let o=i[s]||b[s];o?typeof o=="function"?t?t=o(t):kl(s,`Modifier ${s} used at start of tag`):t?kl(s,`Tag ${s} used as modifier`):t=o:kl(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let n=e.replace(/ /g,"_"),r=gt.define({id:jr.length,name:n,props:[SS({[n]:t})]});return jr.push(r),r.id}function gE(i){let e=gt.define({id:jr.length,name:"Document",props:[Ki.add(()=>i)]});return jr.push(e),e}const _E=i=>{let e=kc(i.state);return e.line?bE(i):e.block?wE(i):!1};function vc(i,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=i(e,t);return r?(n(t.update(r)),!0):!1}}const bE=vc(xE,0),yE=vc(t_,0),wE=vc((i,e)=>t_(i,e,kE(e)),0);function kc(i,e=i.selection.main.head){let t=i.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const ar=50;function vE(i,{open:e,close:t},n,r){let s=i.sliceDoc(n-ar,n),o=i.sliceDoc(r,r+ar),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,c=s.length-l;if(s.slice(c-e.length,c)==e&&o.slice(a,a+t.length)==t)return{open:{pos:n-l,margin:l&&1},close:{pos:r+a,margin:a&&1}};let h,u;r-n<=2*ar?h=u=i.sliceDoc(n,r):(h=i.sliceDoc(n,n+ar),u=i.sliceDoc(r-ar,r));let f=/^\s*/.exec(h)[0].length,d=/\s*$/.exec(u)[0].length,p=u.length-d-t.length;return h.slice(f,f+e.length)==e&&u.slice(p,p+t.length)==t?{open:{pos:n+f+e.length,margin:/\s/.test(h.charAt(f+e.length))?1:0},close:{pos:r-d-t.length,margin:/\s/.test(u.charAt(p-1))?1:0}}:null}function kE(i){let e=[];for(let t of i.selection.ranges){let n=i.doc.lineAt(t.from),r=t.to<=n.to?n:i.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>n.from?e[s].to=r.to:e.push({from:n.from,to:r.to})}return e}function t_(i,e,t=e.selection.ranges){let n=t.map(s=>kc(e,s.from).block);if(!n.every(s=>s))return null;let r=t.map((s,o)=>vE(e,n[o],s.from,s.to));if(i!=2&&!r.every(s=>s))return{changes:e.changes(t.map((s,o)=>r[o]?[]:[{from:s.from,insert:n[o].open+" "},{from:s.to,insert:" "+n[o].close}]))};if(i!=1&&r.some(s=>s)){let s=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let a=n[o],{open:c,close:h}=l;s.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:h.pos-h.margin,to:h.pos+a.close.length})}return{changes:s}}return null}function xE(i,e,t=e.selection.ranges){let n=[],r=-1;for(let{from:s,to:o}of t){let l=n.length,a=1e9;for(let c=s;c<=o;){let h=e.doc.lineAt(c);if(h.from>r&&(s==o||o>h.from)){r=h.from;let u=kc(e,c).line;if(!u)continue;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,p=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<a&&(a=f),n.push({line:h,comment:p,token:u,indent:f,empty:d,single:!1})}c=h.to+1}if(a<1e9)for(let c=l;c<n.length;c++)n[c].indent<n[c].line.text.length&&(n[c].indent=a);n.length==l+1&&(n[l].single=!0)}if(i!=2&&n.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:c,empty:h,single:u}of n)(u||!h)&&s.push({from:l.from+c,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(i!=1&&n.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of n)if(l>=0){let c=o.from+l,h=c+a.length;o.text[h-o.from]==" "&&h++,s.push({from:c,to:h})}return{changes:s}}return null}const Ia=an.define(),SE=an.define(),EE=X.define(),i_=X.define({combine(i){return cn(i,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function AE(i){let e=0;return i.iterChangedRanges((t,n)=>e=n),e}const n_=kt.define({create(){return ui.empty},update(i,e){let t=e.state.facet(i_),n=e.annotation(Ia);if(n){let a=e.docChanged?L.single(AE(e.changes)):void 0,c=yt.fromTransaction(e,a),h=n.side,u=h==0?i.undone:i.done;return c?u=co(u,u.length,t.minDepth,c):u=o_(u,e.startState.selection),new ui(h==0?n.rest:u,h==0?u:n.rest)}let r=e.annotation(SE);if((r=="full"||r=="before")&&(i=i.isolate()),e.annotation(We.addToHistory)===!1)return e.changes.empty?i:i.addMapping(e.changes.desc);let s=yt.fromTransaction(e),o=e.annotation(We.time),l=e.annotation(We.userEvent);return s?i=i.addChanges(s,o,l,t.newGroupDelay,t.minDepth):e.selection&&(i=i.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(r=="full"||r=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(e=>e.toJSON()),undone:i.undone.map(e=>e.toJSON())}},fromJSON(i){return new ui(i.done.map(yt.fromJSON),i.undone.map(yt.fromJSON))}});function TE(i={}){return[n_,i_.of(i),Q.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?r_:e.inputType=="historyRedo"?Na:null;return n?(e.preventDefault(),n(t)):!1}})]}function Co(i,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let r=t.field(n_,!1);if(!r)return!1;let s=r.pop(i,t,e);return s?(n(s),!0):!1}}const r_=Co(0,!1),Na=Co(1,!1),CE=Co(0,!0),OE=Co(1,!0);class yt{constructor(e,t,n,r,s){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new yt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new yt(e.changes&&ze.fromJSON(e.changes),[],e.mapped&&di.fromJSON(e.mapped),e.startSelection&&L.fromJSON(e.startSelection),e.selectionsAfter.map(L.fromJSON))}static fromTransaction(e,t){let n=Nt;for(let r of e.startState.facet(EE)){let s=r(e);s.length&&(n=n.concat(s))}return!n.length&&e.changes.empty?null:new yt(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Nt)}static selection(e){return new yt(void 0,Nt,void 0,void 0,e)}}function co(i,e,t,n){let r=e+1>t+20?e-t-1:0,s=i.slice(r,e);return s.push(n),s}function ME(i,e){let t=[],n=!1;return i.iterChangedRanges((r,s)=>t.push(r,s)),e.iterChangedRanges((r,s,o,l)=>{for(let a=0;a<t.length;){let c=t[a++],h=t[a++];l>=c&&o<=h&&(n=!0)}}),n}function DE(i,e){return i.ranges.length==e.ranges.length&&i.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function s_(i,e){return i.length?e.length?i.concat(e):i:e}const Nt=[],PE=200;function o_(i,e){if(i.length){let t=i[i.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-PE));return n.length&&n[n.length-1].eq(e)?i:(n.push(e),co(i,i.length-1,1e9,t.setSelAfter(n)))}else return[yt.selection([e])]}function LE(i){let e=i[i.length-1],t=i.slice();return t[i.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function xl(i,e){if(!i.length)return i;let t=i.length,n=Nt;for(;t;){let r=RE(i[t-1],e,n);if(r.changes&&!r.changes.empty||r.effects.length){let s=i.slice(0,t);return s[t-1]=r,s}else e=r.mapped,t--,n=r.selectionsAfter}return n.length?[yt.selection(n)]:Nt}function RE(i,e,t){let n=s_(i.selectionsAfter.length?i.selectionsAfter.map(l=>l.map(e)):Nt,t);if(!i.changes)return yt.selection(n);let r=i.changes.map(e),s=e.mapDesc(i.changes,!0),o=i.mapped?i.mapped.composeDesc(s):s;return new yt(r,de.mapEffects(i.effects,e),o,i.startSelection.map(s),n)}const IE=/^(input\.type|delete)($|\.)/;class ui{constructor(e,t,n=0,r=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new ui(this.done,this.undone):this}addChanges(e,t,n,r,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!n||IE.test(n))&&(!l.selectionsAfter.length&&t-this.prevTime<r&&ME(l.changes,e.changes)||n=="input.type.compose")?o=co(o,o.length-1,s,new yt(e.changes.compose(l.changes),s_(e.effects,l.effects),l.mapped,l.startSelection,Nt)):o=co(o,o.length,s,e),new ui(o,Nt,t,n)}addSelection(e,t,n,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Nt;return s.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&DE(s[s.length-1],e)?this:new ui(o_(this.done,e),this.undone,t,n)}addMapping(e){return new ui(xl(this.done,e),xl(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(n&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Ia.of({side:e,rest:LE(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?Nt:r.slice(0,r.length-1);return s.mapped&&(o=xl(o,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Ia.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ui.empty=new ui(Nt,Nt);const NE=[{key:"Mod-z",run:r_,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Na,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Na,preventDefault:!0},{key:"Mod-u",run:CE,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:OE,preventDefault:!0}];function Jn(i,e){return L.create(i.ranges.map(e),i.mainIndex)}function _i(i,e){return i.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Zt({state:i,dispatch:e},t){let n=Jn(i.selection,t);return n.eq(i.selection)?!1:(e(_i(i,n)),!0)}function Oo(i,e){return L.cursor(e?i.to:i.from)}function l_(i,e){return Zt(i,t=>t.empty?i.moveByChar(t,e):Oo(t,e))}function ht(i){return i.textDirectionAt(i.state.selection.main.head)==Be.LTR}const a_=i=>l_(i,!ht(i)),c_=i=>l_(i,ht(i));function h_(i,e){return Zt(i,t=>t.empty?i.moveByGroup(t,e):Oo(t,e))}const BE=i=>h_(i,!ht(i)),HE=i=>h_(i,ht(i));function FE(i,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(i.sliceDoc(e.from,e.to)))||e.firstChild}function Mo(i,e,t){let n=it(i).resolveInner(e.head),r=t?pe.closedBy:pe.openedBy;for(let a=e.head;;){let c=t?n.childAfter(a):n.childBefore(a);if(!c)break;FE(i,c,r)?n=c:a=t?c.to:c.from}let s=n.type.prop(r),o,l;return s&&(o=t?Sn(i,n.from,1):Sn(i,n.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?n.to:n.from,L.cursor(l,t?-1:1)}const VE=i=>Zt(i,e=>Mo(i.state,e,!ht(i))),jE=i=>Zt(i,e=>Mo(i.state,e,ht(i)));function u_(i,e){return Zt(i,t=>{if(!t.empty)return Oo(t,e);let n=i.moveVertically(t,e);return n.head!=t.head?n:i.moveToLineBoundary(t,e)})}const f_=i=>u_(i,!1),d_=i=>u_(i,!0);function p_(i){return Math.max(i.defaultLineHeight,Math.min(i.dom.clientHeight,innerHeight)-5)}function m_(i,e){let{state:t}=i,n=Jn(t.selection,l=>l.empty?i.moveVertically(l,e,p_(i)):Oo(l,e));if(n.eq(t.selection))return!1;let r=i.coordsAtPos(t.selection.main.head),s=i.scrollDOM.getBoundingClientRect(),o;return r&&r.top>s.top&&r.bottom<s.bottom&&r.top-s.top<=i.scrollDOM.scrollHeight-i.scrollDOM.scrollTop-i.scrollDOM.clientHeight&&(o=Q.scrollIntoView(n.main.head,{y:"start",yMargin:r.top-s.top})),i.dispatch(_i(t,n),{effects:o}),!0}const pf=i=>m_(i,!1),Ba=i=>m_(i,!0);function Fi(i,e,t){let n=i.lineBlockAt(e.head),r=i.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?n.to:n.from)&&(r=i.moveToLineBoundary(e,t,!1)),!t&&r.head==n.from&&n.length){let s=/^\s*/.exec(i.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;s&&e.head!=n.from+s&&(r=L.cursor(n.from+s))}return r}const UE=i=>Zt(i,e=>Fi(i,e,!0)),zE=i=>Zt(i,e=>Fi(i,e,!1)),WE=i=>Zt(i,e=>Fi(i,e,!ht(i))),GE=i=>Zt(i,e=>Fi(i,e,ht(i))),qE=i=>Zt(i,e=>L.cursor(i.lineBlockAt(e.head).from,1)),$E=i=>Zt(i,e=>L.cursor(i.lineBlockAt(e.head).to,-1));function KE(i,e,t){let n=!1,r=Jn(i.selection,s=>{let o=Sn(i,s.head,-1)||Sn(i,s.head,1)||s.head>0&&Sn(i,s.head-1,1)||s.head<i.doc.length&&Sn(i,s.head+1,-1);if(!o||!o.end)return s;n=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return L.cursor(l)});return n?(e(_i(i,r)),!0):!1}const XE=({state:i,dispatch:e})=>KE(i,e);function jt(i,e){let t=Jn(i.state.selection,n=>{let r=e(n);return L.range(n.anchor,r.head,r.goalColumn)});return t.eq(i.state.selection)?!1:(i.dispatch(_i(i.state,t)),!0)}function g_(i,e){return jt(i,t=>i.moveByChar(t,e))}const __=i=>g_(i,!ht(i)),b_=i=>g_(i,ht(i));function y_(i,e){return jt(i,t=>i.moveByGroup(t,e))}const JE=i=>y_(i,!ht(i)),YE=i=>y_(i,ht(i)),ZE=i=>jt(i,e=>Mo(i.state,e,!ht(i))),QE=i=>jt(i,e=>Mo(i.state,e,ht(i)));function w_(i,e){return jt(i,t=>i.moveVertically(t,e))}const v_=i=>w_(i,!1),k_=i=>w_(i,!0);function x_(i,e){return jt(i,t=>i.moveVertically(t,e,p_(i)))}const mf=i=>x_(i,!1),gf=i=>x_(i,!0),eA=i=>jt(i,e=>Fi(i,e,!0)),tA=i=>jt(i,e=>Fi(i,e,!1)),iA=i=>jt(i,e=>Fi(i,e,!ht(i))),nA=i=>jt(i,e=>Fi(i,e,ht(i))),rA=i=>jt(i,e=>L.cursor(i.lineBlockAt(e.head).from)),sA=i=>jt(i,e=>L.cursor(i.lineBlockAt(e.head).to)),_f=({state:i,dispatch:e})=>(e(_i(i,{anchor:0})),!0),bf=({state:i,dispatch:e})=>(e(_i(i,{anchor:i.doc.length})),!0),yf=({state:i,dispatch:e})=>(e(_i(i,{anchor:i.selection.main.anchor,head:0})),!0),wf=({state:i,dispatch:e})=>(e(_i(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),oA=({state:i,dispatch:e})=>(e(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),lA=({state:i,dispatch:e})=>{let t=Po(i).map(({from:n,to:r})=>L.range(n,Math.min(r+1,i.doc.length)));return e(i.update({selection:L.create(t),userEvent:"select"})),!0},aA=({state:i,dispatch:e})=>{let t=Jn(i.selection,n=>{var r;let s=it(i).resolveInner(n.head,1);for(;!(s.from<n.from&&s.to>=n.to||s.to>n.to&&s.from<=n.from||!(!((r=s.parent)===null||r===void 0)&&r.parent));)s=s.parent;return L.range(s.to,s.from)});return e(_i(i,t)),!0},cA=({state:i,dispatch:e})=>{let t=i.selection,n=null;return t.ranges.length>1?n=L.create([t.main]):t.main.empty||(n=L.create([L.cursor(t.main.head)])),n?(e(_i(i,n)),!0):!1};function Do(i,e){if(i.state.readOnly)return!1;let t="delete.selection",{state:n}=i,r=n.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(o);a<o?(t="delete.backward",a=xs(i,a,!1)):a>o&&(t="delete.forward",a=xs(i,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=xs(i,o,!1),l=xs(i,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:L.cursor(o)}});return r.changes.empty?!1:(i.dispatch(n.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Q.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function xs(i,e,t){if(i instanceof Q)for(let n of i.state.facet(Q.atomicRanges).map(r=>r(i)))n.between(e,e,(r,s)=>{r<e&&s>e&&(e=t?s:r)});return e}const S_=(i,e)=>Do(i,t=>{let{state:n}=i,r=n.doc.lineAt(t),s,o;if(!e&&t>r.from&&t<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,t-r.from))){if(s[s.length-1]=="	")return t-1;let l=Yr(s,n.tabSize),a=l%nn(n)||nn(n);for(let c=0;c<a&&s[s.length-1-c]==" ";c++)t--;o=t}else o=Ct(r.text,t-r.from,e,e)+r.from,o==t&&r.number!=(e?n.doc.lines:1)&&(o+=e?1:-1);return o}),Ha=i=>S_(i,!1),E_=i=>S_(i,!0),A_=(i,e)=>Do(i,t=>{let n=t,{state:r}=i,s=r.doc.lineAt(n),o=r.charCategorizer(n);for(let l=null;;){if(n==(e?s.to:s.from)){n==t&&s.number!=(e?r.doc.lines:1)&&(n+=e?1:-1);break}let a=Ct(s.text,n-s.from,e)+s.from,c=s.text.slice(Math.min(n,a)-s.from,Math.max(n,a)-s.from),h=o(c);if(l!=null&&h!=l)break;(c!=" "||n!=t)&&(l=h),n=a}return n}),T_=i=>A_(i,!1),hA=i=>A_(i,!0),C_=i=>Do(i,e=>{let t=i.lineBlockAt(e).to;return e<t?t:Math.min(i.state.doc.length,e+1)}),uA=i=>Do(i,e=>{let t=i.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)}),fA=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:ve.of(["",""])},range:L.cursor(n.from)}));return e(i.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},dA=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>{if(!n.empty||n.from==0||n.from==i.doc.length)return{range:n};let r=n.from,s=i.doc.lineAt(r),o=r==s.from?r-1:Ct(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:Ct(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:i.doc.slice(r,l).append(i.doc.slice(o,r))},range:L.cursor(l)}});return t.changes.empty?!1:(e(i.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Po(i){let e=[],t=-1;for(let n of i.selection.ranges){let r=i.doc.lineAt(n.from),s=i.doc.lineAt(n.to);if(!n.empty&&n.to==s.from&&(s=i.doc.lineAt(n.to-1)),t>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(n)}else e.push({from:r.from,to:s.to,ranges:[n]});t=s.number+1}return e}function O_(i,e,t){if(i.readOnly)return!1;let n=[],r=[];for(let s of Po(i)){if(t?s.to==i.doc.length:s.from==0)continue;let o=i.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){n.push({from:s.to,to:o.to},{from:s.from,insert:o.text+i.lineBreak});for(let a of s.ranges)r.push(L.range(Math.min(i.doc.length,a.anchor+l),Math.min(i.doc.length,a.head+l)))}else{n.push({from:o.from,to:s.from},{from:s.to,insert:i.lineBreak+o.text});for(let a of s.ranges)r.push(L.range(a.anchor-l,a.head-l))}}return n.length?(e(i.update({changes:n,scrollIntoView:!0,selection:L.create(r,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const pA=({state:i,dispatch:e})=>O_(i,e,!1),mA=({state:i,dispatch:e})=>O_(i,e,!0);function M_(i,e,t){if(i.readOnly)return!1;let n=[];for(let r of Po(i))t?n.push({from:r.from,insert:i.doc.slice(r.from,r.to)+i.lineBreak}):n.push({from:r.to,insert:i.lineBreak+i.doc.slice(r.from,r.to)});return e(i.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const gA=({state:i,dispatch:e})=>M_(i,e,!1),_A=({state:i,dispatch:e})=>M_(i,e,!0),bA=i=>{if(i.state.readOnly)return!1;let{state:e}=i,t=e.changes(Po(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),n=Jn(e.selection,r=>i.moveVertically(r,!0)).map(t);return i.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function yA(i,e){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=it(i).resolveInner(e),n=t.childBefore(e),r=t.childAfter(e),s;return n&&r&&n.to<=e&&r.from>=e&&(s=n.type.prop(pe.closedBy))&&s.indexOf(r.name)>-1&&i.doc.lineAt(n.to).from==i.doc.lineAt(r.from).from?{from:n.to,to:r.from}:null}const wA=D_(!1),vA=D_(!0);function D_(i){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>{let{from:s,to:o}=r,l=e.doc.lineAt(s),a=!i&&s==o&&yA(e,s);i&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new Ao(e,{simulateBreak:s,simulateDoubleBreak:!!a}),h=gc(c,s);for(h==null&&(h=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let u=["",Vr(e,h)];return a&&u.push(Vr(e,c.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:ve.of(u)},range:L.cursor(s+1+u[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function xc(i,e){let t=-1;return i.changeByRange(n=>{let r=[];for(let o=n.from;o<=n.to;){let l=i.doc.lineAt(o);l.number>t&&(n.empty||n.to>l.from)&&(e(l,r,n),t=l.number),o=l.to+1}let s=i.changes(r);return{changes:r,range:L.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}})}const kA=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=Object.create(null),n=new Ao(i,{overrideIndentation:s=>{let o=t[s];return o??-1}}),r=xc(i,(s,o,l)=>{let a=gc(n,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let c=/^\s*/.exec(s.text)[0],h=Vr(i,a);(c!=h||l.from<s.from+c.length)&&(t[s.from]=a,o.push({from:s.from,to:s.from+c.length,insert:h}))});return r.changes.empty||e(i.update(r,{userEvent:"indent"})),!0},P_=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(xc(i,(t,n)=>{n.push({from:t.from,insert:i.facet(Eo)})}),{userEvent:"input.indent"})),!0),L_=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(xc(i,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let s=Yr(r,i.tabSize),o=0,l=Vr(i,Math.max(0,s-nn(i)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),xA=[{key:"Ctrl-b",run:a_,shift:__,preventDefault:!0},{key:"Ctrl-f",run:c_,shift:b_},{key:"Ctrl-p",run:f_,shift:v_},{key:"Ctrl-n",run:d_,shift:k_},{key:"Ctrl-a",run:qE,shift:rA},{key:"Ctrl-e",run:$E,shift:sA},{key:"Ctrl-d",run:E_},{key:"Ctrl-h",run:Ha},{key:"Ctrl-k",run:C_},{key:"Ctrl-Alt-h",run:T_},{key:"Ctrl-o",run:fA},{key:"Ctrl-t",run:dA},{key:"Ctrl-v",run:Ba}],SA=[{key:"ArrowLeft",run:a_,shift:__,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:BE,shift:JE,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:WE,shift:iA,preventDefault:!0},{key:"ArrowRight",run:c_,shift:b_,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:HE,shift:YE,preventDefault:!0},{mac:"Cmd-ArrowRight",run:GE,shift:nA,preventDefault:!0},{key:"ArrowUp",run:f_,shift:v_,preventDefault:!0},{mac:"Cmd-ArrowUp",run:_f,shift:yf},{mac:"Ctrl-ArrowUp",run:pf,shift:mf},{key:"ArrowDown",run:d_,shift:k_,preventDefault:!0},{mac:"Cmd-ArrowDown",run:bf,shift:wf},{mac:"Ctrl-ArrowDown",run:Ba,shift:gf},{key:"PageUp",run:pf,shift:mf},{key:"PageDown",run:Ba,shift:gf},{key:"Home",run:zE,shift:tA,preventDefault:!0},{key:"Mod-Home",run:_f,shift:yf},{key:"End",run:UE,shift:eA,preventDefault:!0},{key:"Mod-End",run:bf,shift:wf},{key:"Enter",run:wA},{key:"Mod-a",run:oA},{key:"Backspace",run:Ha,shift:Ha},{key:"Delete",run:E_},{key:"Mod-Backspace",mac:"Alt-Backspace",run:T_},{key:"Mod-Delete",mac:"Alt-Delete",run:hA},{mac:"Mod-Backspace",run:uA},{mac:"Mod-Delete",run:C_}].concat(xA.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),EA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:VE,shift:ZE},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:jE,shift:QE},{key:"Alt-ArrowUp",run:pA},{key:"Shift-Alt-ArrowUp",run:gA},{key:"Alt-ArrowDown",run:mA},{key:"Shift-Alt-ArrowDown",run:_A},{key:"Escape",run:cA},{key:"Mod-Enter",run:vA},{key:"Alt-l",mac:"Ctrl-l",run:lA},{key:"Mod-i",run:aA,preventDefault:!0},{key:"Mod-[",run:L_},{key:"Mod-]",run:P_},{key:"Mod-Alt-\\",run:kA},{key:"Shift-Mod-k",run:bA},{key:"Shift-Mod-\\",run:XE},{key:"Mod-/",run:_E},{key:"Alt-A",run:yE}].concat(SA),AA={key:"Tab",run:P_,shift:L_},TA="#2E3235",si="#DDDDDD",Er="#B9D2FF",Ss="#b0b0b0",CA="#e0e0e0",R_="#808080",Sl="#000000",OA="#A54543",I_="#fc6d24",Wi="#fda331",El="#8abeb7",vf="#b5bd68",cr="#6fb3d2",hr="#cc99cc",MA="#6987AF",kf=I_,xf="#292d30",Es=Er+"30",DA=TA,Al=si,PA="#202325",Sf=si,LA=Q.theme({"&":{color:si,backgroundColor:DA},".cm-content":{caretColor:Sf},".cm-cursor, .cm-dropCursor":{borderLeftColor:Sf},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:PA},".cm-panels":{backgroundColor:xf,color:Ss},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:Er,outline:`1px solid ${Ss}`,color:Sl},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:CA,color:Sl},".cm-activeLine":{backgroundColor:Es},".cm-selectionMatch":{backgroundColor:Es},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${Ss}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Er,color:Sl},".cm-gutters":{borderRight:"1px solid #ffffff10",color:R_,backgroundColor:xf},".cm-activeLineGutter":{backgroundColor:Es},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:Er},".cm-tooltip":{border:"none",backgroundColor:Al},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Al,borderBottomColor:Al},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Es,color:Ss}}},{dark:!0}),RA=Xn.define([{tag:b.keyword,color:Wi},{tag:[b.name,b.deleted,b.character,b.propertyName,b.macroName],color:vf},{tag:[b.variableName],color:cr},{tag:[b.function(b.variableName)],color:Wi},{tag:[b.labelName],color:I_},{tag:[b.color,b.constant(b.name),b.standard(b.name)],color:Wi},{tag:[b.definition(b.name),b.separator],color:hr},{tag:[b.brace],color:hr},{tag:[b.annotation],color:kf},{tag:[b.number,b.changed,b.annotation,b.modifier,b.self,b.namespace],color:Wi},{tag:[b.typeName,b.className],color:cr},{tag:[b.operator,b.operatorKeyword],color:hr},{tag:[b.tagName],color:Wi},{tag:[b.squareBracket],color:hr},{tag:[b.angleBracket],color:hr},{tag:[b.attributeName],color:cr},{tag:[b.regexp],color:Wi},{tag:[b.quote],color:si},{tag:[b.string],color:vf},{tag:b.link,color:MA,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[b.url,b.escape,b.special(b.string)],color:El},{tag:[b.meta],color:OA},{tag:[b.comment],color:R_,fontStyle:"italic"},{tag:b.monospace,color:si},{tag:b.strong,fontWeight:"bold",color:Wi},{tag:b.emphasis,fontStyle:"italic",color:cr},{tag:b.strikethrough,textDecoration:"line-through"},{tag:b.heading,fontWeight:"bold",color:si},{tag:b.special(b.heading1),fontWeight:"bold",color:si},{tag:b.heading1,fontWeight:"bold",color:si},{tag:[b.heading2,b.heading3,b.heading4],fontWeight:"bold",color:si},{tag:[b.heading5,b.heading6],color:si},{tag:[b.atom,b.bool,b.special(b.variableName)],color:El},{tag:[b.processingInstruction,b.inserted],color:El},{tag:[b.contentSeparator],color:cr},{tag:b.invalid,color:Er,borderBottom:`1px dotted ${kf}`}]),IA=[LA,bc(RA)],Ef="#2e3440",Sc="#3b4252",Af="#434c5e",As="#4c566a",Tf="#e5e9f0",Fa="#eceff4",Tl="#8fbcbb",Cf="#88c0d0",NA="#81a1c1",$t="#5e81ac",BA="#bf616a",wn="#d08770",Cl="#ebcb8b",Of="#a3be8c",HA="#b48ead",Mf="#d30102",Ec=Fa,Ol=Ec,FA="#ffffff",Ml=Sc,VA=Ec,Df=Sc,jA=Q.theme({"&":{color:Ef,backgroundColor:FA},".cm-content":{caretColor:Df},".cm-cursor, .cm-dropCursor":{borderLeftColor:Df},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:VA},".cm-panels":{backgroundColor:Ec,color:As},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${As}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:Tf},".cm-activeLine":{backgroundColor:Ol},".cm-selectionMatch":{backgroundColor:Tf},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${As}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Fa},".cm-gutters":{backgroundColor:Fa,color:Ef,border:"none"},".cm-activeLineGutter":{backgroundColor:Ol},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Ml},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Ml,borderBottomColor:Ml},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Ol,color:As}}},{dark:!1}),UA=Xn.define([{tag:b.keyword,color:$t},{tag:[b.name,b.deleted,b.character,b.propertyName,b.macroName],color:wn},{tag:[b.variableName],color:wn},{tag:[b.function(b.variableName)],color:$t},{tag:[b.labelName],color:NA},{tag:[b.color,b.constant(b.name),b.standard(b.name)],color:$t},{tag:[b.definition(b.name),b.separator],color:Of},{tag:[b.brace],color:Tl},{tag:[b.annotation],color:Mf},{tag:[b.number,b.changed,b.annotation,b.modifier,b.self,b.namespace],color:Cf},{tag:[b.typeName,b.className],color:Cl},{tag:[b.operator,b.operatorKeyword],color:Of},{tag:[b.tagName],color:HA},{tag:[b.squareBracket],color:BA},{tag:[b.angleBracket],color:wn},{tag:[b.attributeName],color:Cl},{tag:[b.regexp],color:$t},{tag:[b.quote],color:Sc},{tag:[b.string],color:wn},{tag:b.link,color:Tl,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[b.url,b.escape,b.special(b.string)],color:wn},{tag:[b.meta],color:Cf},{tag:[b.comment],color:Af,fontStyle:"italic"},{tag:b.strong,fontWeight:"bold",color:$t},{tag:b.emphasis,fontStyle:"italic",color:$t},{tag:b.strikethrough,textDecoration:"line-through"},{tag:b.heading,fontWeight:"bold",color:$t},{tag:b.special(b.heading1),fontWeight:"bold",color:$t},{tag:b.heading1,fontWeight:"bold",color:$t},{tag:[b.heading2,b.heading3,b.heading4],fontWeight:"bold",color:$t},{tag:[b.heading5,b.heading6],color:$t},{tag:[b.atom,b.bool,b.special(b.variableName)],color:wn},{tag:[b.processingInstruction,b.inserted],color:Tl},{tag:[b.contentSeparator],color:Cl},{tag:b.invalid,color:Af,borderBottom:`1px dotted ${Mf}`}]),zA=[jA,bc(UA)];function Pf(i){let e=Object.keys(i).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function WA(i){let e=Object.create(null),t=Object.create(null);for(let{label:r}of i){e[r[0]]=!0;for(let s=1;s<r.length;s++)t[r[s]]=!0}let n=Pf(e)+Pf(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function GA(i){let e=i.map(r=>typeof r=="string"?{label:r}:r),[t,n]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:WA(e);return r=>{let s=r.matchBefore(n);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:t}:null}}function SM(i,e){return t=>{for(let n=it(t.state).resolveInner(t.pos,-1);n;n=n.parent)if(i.indexOf(n.name)>-1)return null;return e(t)}}class Lf{constructor(e,t,n){this.completion=e,this.source=t,this.match=n}}function Va(i){return i.selection.main.head}function qA(i,e,t,n){return Object.assign(Object.assign({},i.changeByRange(r=>{if(r==i.selection.main)return{changes:{from:t,to:n,insert:e},range:L.cursor(t+e.length)};let s=n-t;return!r.empty||s&&i.sliceDoc(r.from-s,r.from)!=i.sliceDoc(t,n)?{range:r}:{changes:{from:r.from-s,to:r.from,insert:e},range:L.cursor(r.from-s+e.length)}})),{userEvent:"input.complete"})}function N_(i,e){const t=e.completion.apply||e.completion.label;let n=e.source;typeof t=="string"?i.dispatch(qA(i.state,t,n.from,n.to)):t(i,e.completion,n.from,n.to)}const Rf=new WeakMap;function $A(i){if(!Array.isArray(i))return i;let e=Rf.get(i);return e||Rf.set(i,e=GA(i)),e}class KA{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=ot(e,t),r=Pt(n);this.chars.push(n);let s=e.slice(t,t+r),o=s.toUpperCase();this.folded.push(ot(o==s?s.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:s,byWord:o}=this;if(t.length==1){let k=ot(e,0);return k==t[0]?[0,0,Pt(k)]:k==n[0]?[-200,0,Pt(k)]:null}let l=e.indexOf(this.pattern);if(l==0)return[0,0,this.pattern.length];let a=t.length,c=0;if(l<0){for(let k=0,y=Math.min(e.length,200);k<y&&c<a;){let w=ot(e,k);(w==t[c]||w==n[c])&&(r[c++]=k),k+=Pt(w)}if(c<a)return null}let h=0,u=0,f=!1,d=0,p=-1,g=-1,m=/[a-z]/.test(e),_=!0;for(let k=0,y=Math.min(e.length,200),w=0;k<y&&u<a;){let A=ot(e,k);l<0&&(h<a&&A==t[h]&&(s[h++]=k),d<a&&(A==t[d]||A==n[d]?(d==0&&(p=k),g=k+1,d++):d=0));let M,R=A<255?A>=48&&A<=57||A>=97&&A<=122?2:A>=65&&A<=90?1:0:(M=_g(A))!=M.toLowerCase()?1:M!=M.toUpperCase()?2:0;(!k||R==1&&m||w==0&&R!=0)&&(t[u]==A||n[u]==A&&(f=!0)?o[u++]=k:o.length&&(_=!1)),w=R,k+=Pt(A)}return u==a&&o[0]==0&&_?this.result(-100+(f?-200:0),o,e):d==a&&p==0?[-200-e.length,0,g]:l>-1?[-700-e.length,l,l+this.pattern.length]:d==a?[-900-e.length,p,g]:u==a?this.result(-100+(f?-200:0)+-700+(_?0:-1100),o,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,n){let r=[e-n.length],s=1;for(let o of t){let l=o+(this.astral?Pt(ot(n,o)):1);s>1&&r[s-1]==o?r[s-1]=l:(r[s++]=o,r[s++]=l)}return r}}const sn=X.define({combine(i){return cn(i,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>n=>XA(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})}});function XA(i,e){return i?e?i+" "+e:i:e}function JA(i){let e=i.addToOptions.slice();return i.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,r){let s=document.createElement("span");s.className="cm-completionLabel";let{label:o}=t,l=0;for(let a=1;a<r.length;){let c=r[a++],h=r[a++];c>l&&s.appendChild(document.createTextNode(o.slice(l,c)));let u=s.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(o.slice(c,h))),u.className="cm-completionMatchedText",l=h}return l<o.length&&s.appendChild(document.createTextNode(o.slice(l))),s},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function If(i,e,t){if(i<=t)return{from:0,to:i};if(e<0&&(e=0),e<=i>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let n=Math.floor((i-e)/t);return{from:i-(n+1)*t,to:i-n*t}}class YA{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this};let n=e.state.field(t),{options:r,selected:s}=n.open,o=e.state.facet(sn);this.optionContent=JA(o),this.optionClass=o.optionClass,this.range=If(r.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",l=>{for(let a=l.target,c;a&&a!=this.dom;a=a.parentNode)if(a.nodeName=="LI"&&(c=/-(\d+)$/.exec(a.id))&&+c[1]<r.length){N_(e,r[+c[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=If(t.options.length,t.selected,this.view.state.facet(sn).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(n);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o)}).catch(o=>Kt(this.view.state,o,"completion info")):this.addInfoPane(s)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&QA(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.ownerDocument.defaultView||window,n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),s=e.getBoundingClientRect();if(s.top>Math.min(t.innerHeight,n.bottom)-10||s.bottom<Math.max(0,n.top)+10)return null;let o=this.view.textDirection==Be.RTL,l=o,a=!1,c,h="",u="",f=n.left,d=t.innerWidth-n.right;if(l&&f<Math.min(r.width,d)?l=!1:!l&&d<Math.min(r.width,f)&&(l=!0),r.width<=(l?f:d))h=Math.max(0,Math.min(s.top,t.innerHeight-r.height))-n.top+"px",c=Math.min(400,l?f:d)+"px";else{a=!0,c=Math.min(400,(o?n.right:t.innerWidth-n.left)-30)+"px";let p=t.innerHeight-n.bottom;p>=r.height||p>n.top?h=s.bottom-n.top+"px":u=n.bottom-s.top+"px"}return{top:h,bottom:u,maxWidth:c,class:a?o?"left-narrow":"right-narrow":l?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let s=n.from;s<n.to;s++){let{completion:o,match:l}=e[s];const a=r.appendChild(document.createElement("li"));a.id=t+"-"+s,a.setAttribute("role","option");let c=this.optionClass(o);c&&(a.className=c);for(let h of this.optionContent){let u=h(o,this.view.state,l);u&&a.appendChild(u)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function ZA(i){return e=>new YA(e,i)}function QA(i,e){let t=i.getBoundingClientRect(),n=e.getBoundingClientRect();n.top<t.top?i.scrollTop-=t.top-n.top:n.bottom>t.bottom&&(i.scrollTop+=n.bottom-t.bottom)}function Nf(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function eT(i,e){let t=[],n=0;for(let l of i)if(l.hasResult())if(l.result.filter===!1){let a=l.result.getMatch;for(let c of l.result.options){let h=[1e9-n++];if(a)for(let u of a(c))h.push(u);t.push(new Lf(c,l,h))}}else{let a=new KA(e.sliceDoc(l.from,l.to)),c;for(let h of l.result.options)(c=a.match(h.label))&&(h.boost!=null&&(c[0]+=h.boost),t.push(new Lf(h,l,c)))}let r=[],s=null,o=e.facet(sn).compareCompletions;for(let l of t.sort((a,c)=>c.match[0]-a.match[0]||o(a.completion,c.completion)))!s||s.label!=l.completion.label||s.detail!=l.completion.detail||s.type!=null&&l.completion.type!=null&&s.type!=l.completion.type||s.apply!=l.completion.apply?r.push(l):Nf(l.completion)>Nf(s)&&(r[r.length-1]=l),s=l.completion;return r}class Ar{constructor(e,t,n,r,s){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ar(this.options,Bf(t,e),this.tooltip,this.timestamp,e)}static build(e,t,n,r,s){let o=eT(e,t);if(!o.length)return null;let l=t.facet(sn).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let a=r.options[r.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==a){l=c;break}}return new Ar(o,Bf(n,l),{pos:e.reduce((a,c)=>c.hasResult()?Math.min(a,c.from):a,1e8),create:ZA(es),above:s.aboveCursor},r?r.timestamp:Date.now(),l)}map(e){return new Ar(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class ho{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new ho(nT,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(sn),s=(n.override||t.languageDataAt("autocomplete",Va(t)).map($A)).map(l=>(this.active.find(c=>c.source==l)||new yi(l,this.active.some(c=>c.state!=0)?1:0)).update(e,n));s.length==this.active.length&&s.every((l,a)=>l==this.active[a])&&(s=this.active);let o=e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!tT(s,this.active)?Ar.build(s,t,this.id,this.open,n):this.open&&e.docChanged?this.open.map(e.changes):this.open;!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new yi(l.source,0):l));for(let l of e.effects)l.is(F_)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new ho(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:iT}}function tT(i,e){if(i==e)return!0;for(let t=0,n=0;;){for(;t<i.length&&!i[t].hasResult;)t++;for(;n<e.length&&!e[n].hasResult;)n++;let r=t==i.length,s=n==e.length;if(r||s)return r==s;if(i[t++].result!=e[n++].result)return!1}}const iT={"aria-autocomplete":"list"};function Bf(i,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return e>-1&&(t["aria-activedescendant"]=i+"-"+e),t}const nT=[];function rT(i){return i.isUserEvent("input.type")?"input":i.isUserEvent("delete.backward")?"delete":null}class yi{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=rT(e),r=this;n?r=r.handleUserEvent(e,n,t):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new yi(r.source,0));for(let s of e.effects)if(s.is(B_))r=new yi(r.source,1,s.value?Va(e.state):-1);else if(s.is(H_))r=new yi(r.source,0);else if(s.is(sT))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,t,n){return t=="delete"||!n.activateOnTyping?this.map(e.changes):new yi(this.source,1)}handleChange(e){return e.changes.touchesRange(Va(e.startState))?new yi(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new yi(this.source,this.state,e.mapPos(this.explicitPos))}}const B_=de.define(),H_=de.define(),sT=de.define({map(i,e){return i.map(t=>t.map(e))}}),F_=de.define(),es=kt.define({create(){return ho.start()},update(i,e){return i.update(e)},provide:i=>[hc.from(i,e=>e.tooltip),Q.contentAttributes.from(i,e=>e.attrs)]});function Ts(i,e="option"){return t=>{let n=t.state.field(es,!1);if(!n||!n.open||Date.now()-n.open.timestamp<t.state.facet(sn).interactionDelay)return!1;let r=1,s;e=="page"&&(s=Jx(t,n.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,l=n.open.selected>-1?n.open.selected+r*(i?1:-1):i?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:F_.of(l)}),!0}}const oT=i=>{let e=i.state.field(es,!1);return i.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<i.state.facet(sn).interactionDelay?!1:(N_(i,e.open.options[e.open.selected]),!0)},lT=i=>i.state.field(es,!1)?(i.dispatch({effects:B_.of(!0)}),!0):!1,aT=i=>{let e=i.state.field(es,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(i.dispatch({effects:H_.of(null)}),!0)},cT=Q.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class hT{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class Ac{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,Qe.TrackDel),n=e.mapPos(this.to,1,Qe.TrackDel);return t==null||n==null?null:new Ac(this.field,t,n)}}class Tc{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let a of this.lines){if(n.length){let c=o,h=/^\t*/.exec(a)[0].length;for(let u=0;u<h;u++)c+=e.facet(Eo);r.push(t+c.length-h),a=c+a.slice(h)}n.push(a),t+=a.length+1}let l=this.fieldPositions.map(a=>new Ac(a.field,r[a.line]+a.from,r[a.line]+a.to));return{text:n,ranges:l}}static parse(e){let t=[],n=[],r=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let l=s[1]?+s[1]:null,a=s[2]||s[3]||"",c=-1;for(let h=0;h<t.length;h++)(l!=null?t[h].seq==l:a&&t[h].name==a)&&(c=h);if(c<0){let h=0;for(;h<t.length&&(l==null||t[h].seq!=null&&t[h].seq<l);)h++;t.splice(h,0,{seq:l,name:a}),c=h;for(let u of r)u.field>=c&&u.field++}r.push(new hT(c,n.length,s.index,s.index+a.length)),o=o.slice(0,s.index)+a+o.slice(s.index+s[0].length)}for(let l;l=/([$#])\\{/.exec(o);){o=o.slice(0,l.index)+l[1]+"{"+o.slice(l.index+l[0].length);for(let a of r)a.line==n.length&&a.from>l.index&&(a.from--,a.to--)}n.push(o)}return new Tc(n,r)}}let uT=ue.widget({widget:new class extends gi{toDOM(){let i=document.createElement("span");return i.className="cm-snippetFieldPosition",i}ignoreEvent(){return!1}}}),fT=ue.mark({class:"cm-snippetField"});class Yn{constructor(e,t){this.ranges=e,this.active=t,this.deco=ue.set(e.map(n=>(n.from==n.to?uT:fT).range(n.from,n.to)))}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new Yn(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(n=>n.field==this.active&&n.from<=t.from&&n.to>=t.to))}}const ts=de.define({map(i,e){return i&&i.map(e)}}),dT=de.define(),Ur=kt.define({create(){return null},update(i,e){for(let t of e.effects){if(t.is(ts))return t.value;if(t.is(dT)&&i)return new Yn(i.ranges,t.value)}return i&&e.docChanged&&(i=i.map(e.changes)),i&&e.selection&&!i.selectionInsideField(e.selection)&&(i=null),i},provide:i=>Q.decorations.from(i,e=>e?e.deco:ue.none)});function Cc(i,e){return L.create(i.filter(t=>t.field==e).map(t=>L.range(t.from,t.to)))}function pT(i){let e=Tc.parse(i);return(t,n,r,s)=>{let{text:o,ranges:l}=e.instantiate(t.state,r),a={changes:{from:r,to:s,insert:ve.of(o)},scrollIntoView:!0};if(l.length&&(a.selection=Cc(l,0)),l.length>1){let c=new Yn(l,0),h=a.effects=[ts.of(c)];t.state.field(Ur,!1)===void 0&&h.push(de.appendConfig.of([Ur,yT,wT,cT]))}t.dispatch(t.state.update(a))}}function V_(i){return({state:e,dispatch:t})=>{let n=e.field(Ur,!1);if(!n||i<0&&n.active==0)return!1;let r=n.active+i,s=i>0&&!n.ranges.some(o=>o.field==r+i);return t(e.update({selection:Cc(n.ranges,r),effects:ts.of(s?null:new Yn(n.ranges,r))})),!0}}const mT=({state:i,dispatch:e})=>i.field(Ur,!1)?(e(i.update({effects:ts.of(null)})),!0):!1,gT=V_(1),_T=V_(-1),bT=[{key:"Tab",run:gT,shift:_T},{key:"Escape",run:mT}],Hf=X.define({combine(i){return i.length?i[0]:bT}}),yT=Jr.highest(So.compute([Hf],i=>i.facet(Hf)));function EM(i,e){return Object.assign(Object.assign({},e),{apply:pT(i)})}const wT=Q.domEventHandlers({mousedown(i,e){let t=e.state.field(Ur,!1),n;if(!t||(n=e.posAtCoords({x:i.clientX,y:i.clientY}))==null)return!1;let r=t.ranges.find(s=>s.from<=n&&s.to>=n);return!r||r.field==t.active?!1:(e.dispatch({selection:Cc(t.ranges,r.field),effects:ts.of(t.ranges.some(s=>s.field>r.field)?new Yn(t.ranges,r.field):null)}),!0)}}),zr={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Xi=de.define({map(i,e){let t=e.mapPos(i,-1,Qe.TrackAfter);return t??void 0}}),Oc=de.define({map(i,e){return e.mapPos(i)}}),Mc=new class extends Qi{};Mc.startSide=1;Mc.endSide=-1;const j_=kt.define({create(){return xe.empty},update(i,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,n=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(n,-1)&&(i=xe.empty)}i=i.map(e.changes);for(let t of e.effects)t.is(Xi)?i=i.update({add:[Mc.range(t.value,t.value+1)]}):t.is(Oc)&&(i=i.update({filter:n=>n!=t.value}));return i}});function vT(){return[xT,j_]}const Dl="()[]{}<>";function U_(i){for(let e=0;e<Dl.length;e+=2)if(Dl.charCodeAt(e)==i)return Dl.charAt(e+1);return _g(i<128?i:i+1)}function z_(i,e){return i.languageDataAt("closeBrackets",e)[0]||zr}const kT=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),xT=Q.inputHandler.of((i,e,t,n)=>{if((kT?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let r=i.state.selection.main;if(n.length>2||n.length==2&&Pt(ot(n,0))==1||e!=r.from||t!=r.to)return!1;let s=AT(i.state,n);return s?(i.dispatch(s),!0):!1}),ST=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let n=z_(i,i.selection.main.head).brackets||zr.brackets,r=null,s=i.changeByRange(o=>{if(o.empty){let l=TT(i.doc,o.head);for(let a of n)if(a==l&&Lo(i.doc,o.head)==U_(ot(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:L.cursor(o.head-a.length)}}return{range:r=o}});return r||e(i.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},ET=[{key:"Backspace",run:ST}];function AT(i,e){let t=z_(i,i.selection.main.head),n=t.brackets||zr.brackets;for(let r of n){let s=U_(ot(r,0));if(e==r)return s==r?MT(i,r,n.indexOf(r+r+r)>-1,t):CT(i,r,s,t.before||zr.before);if(e==s&&W_(i,i.selection.main.from))return OT(i,r,s)}return null}function W_(i,e){let t=!1;return i.field(j_).between(0,i.doc.length,n=>{n==e&&(t=!0)}),t}function Lo(i,e){let t=i.sliceString(e,e+2);return t.slice(0,Pt(ot(t,0)))}function TT(i,e){let t=i.sliceString(e-2,e);return Pt(ot(t,0))==t.length?t:t.slice(1)}function CT(i,e,t,n){let r=null,s=i.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Xi.of(o.to+e.length),range:L.range(o.anchor+e.length,o.head+e.length)};let l=Lo(i.doc,o.head);return!l||/\s/.test(l)||n.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:Xi.of(o.head+e.length),range:L.cursor(o.head+e.length)}:{range:r=o}});return r?null:i.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function OT(i,e,t){let n=null,r=i.selection.ranges.map(s=>s.empty&&Lo(i.doc,s.head)==t?L.cursor(s.head+t.length):n=s);return n?null:i.update({selection:L.create(r,i.selection.mainIndex),scrollIntoView:!0,effects:i.selection.ranges.map(({from:s})=>Oc.of(s))})}function MT(i,e,t,n){let r=n.stringPrefixes||zr.stringPrefixes,s=null,o=i.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Xi.of(l.to+e.length),range:L.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=Lo(i.doc,a),h;if(c==e){if(Ff(i,a))return{changes:{insert:e+e,from:a},effects:Xi.of(a+e.length),range:L.cursor(a+e.length)};if(W_(i,a)){let u=t&&i.sliceDoc(a,a+e.length*3)==e+e+e;return{range:L.cursor(a+e.length*(u?3:1)),effects:Oc.of(a)}}}else{if(t&&i.sliceDoc(a-2*e.length,a)==e+e&&(h=Vf(i,a-2*e.length,r))>-1&&Ff(i,h))return{changes:{insert:e+e+e+e,from:a},effects:Xi.of(a+e.length),range:L.cursor(a+e.length)};if(i.charCategorizer(a)(c)!=Lt.Word&&Vf(i,a,r)>-1&&!DT(i,a,e,r))return{changes:{insert:e+e,from:a},effects:Xi.of(a+e.length),range:L.cursor(a+e.length)}}return{range:s=l}});return s?null:i.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Ff(i,e){let t=it(i).resolveInner(e+1);return t.parent&&t.from==e}function DT(i,e,t,n){let r=it(i).resolveInner(e,-1),s=n.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=i.sliceDoc(r.from,Math.min(r.to,r.from+t.length+s)),a=l.indexOf(t);if(!a||a>-1&&n.indexOf(l.slice(0,a))>-1){let h=r.firstChild;for(;h&&h.from==r.from&&h.to-h.from>t.length+a;){if(i.sliceDoc(h.to-t.length,h.to)==t)return!1;h=h.firstChild}return!0}let c=r.to==e&&r.parent;if(!c)break;r=c}return!1}function Vf(i,e,t){let n=i.charCategorizer(e);if(n(i.sliceDoc(e-1,e))!=Lt.Word)return e;for(let r of t){let s=e-r.length;if(i.sliceDoc(s,e)==r&&n(i.sliceDoc(s-1,s))!=Lt.Word)return s}return-1}const PT=[{key:"Ctrl-Space",run:lT},{key:"Escape",run:aT},{key:"ArrowDown",run:Ts(!0)},{key:"ArrowUp",run:Ts(!1)},{key:"PageDown",run:Ts(!0,"page")},{key:"PageUp",run:Ts(!1,"page")},{key:"Enter",run:oT}];function ai(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];typeof r=="string"?i.setAttribute(n,r):r!=null&&(i[n]=r)}e++}for(;e<arguments.length;e++)G_(i,arguments[e]);return i}function G_(i,e){if(typeof e=="string")i.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)i.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)G_(i,e[t]);else throw new RangeError("Unsupported child node: "+e)}class LT{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class qi{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=e,s=n.facet(En).markerFilter;s&&(r=s(r));let o=ue.set(r.map(l=>l.from==l.to||l.from==l.to-1&&n.doc.lineAt(l.from).to==l.from?ue.widget({widget:new zT(l),diagnostic:l}).range(l.from):ue.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new qi(o,t,Gn(o))}}function Gn(i,e=null,t=0){let n=null;return i.between(t,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return n=new LT(r,s,o.diagnostic),!1}),n}function RT(i,e){return!!(i.effects.some(t=>t.is(Dc))||i.changes.touchesRange(e.pos))}function q_(i,e){return i.field(Ot,!1)?e:e.concat(de.appendConfig.of([Ot,Q.decorations.compute([Ot],t=>{let{selected:n,panel:r}=t.field(Ot);return!n||!r||n.from==n.to?ue.none:ue.set([NT.range(n.from,n.to)])}),Xx(BT,{hideOn:RT}),GT]))}function IT(i,e){return{effects:q_(i,[Dc.of(e)])}}const Dc=de.define(),Pc=de.define(),$_=de.define(),Ot=kt.define({create(){return new qi(ue.none,null,null)},update(i,e){if(e.docChanged){let t=i.diagnostics.map(e.changes),n=null;if(i.selected){let r=e.changes.mapPos(i.selected.from,1);n=Gn(t,i.selected.diagnostic,r)||Gn(t,null,r)}i=new qi(t,i.panel,n)}for(let t of e.effects)t.is(Dc)?i=qi.init(t.value,i.panel,e.state):t.is(Pc)?i=new qi(i.diagnostics,t.value?Ro.open:null,i.selected):t.is($_)&&(i=new qi(i.diagnostics,i.panel,t.value));return i},provide:i=>[Ca.from(i,e=>e.panel),Q.decorations.from(i,e=>e.diagnostics)]}),NT=ue.mark({class:"cm-lintRange cm-lintRange-active"});function BT(i,e,t){let{diagnostics:n}=i.state.field(Ot),r=[],s=2e8,o=0;n.between(e-(t<0?1:0),e+(t>0?1:0),(a,c,{spec:h})=>{e>=a&&e<=c&&(a==c||(e>a||t>0)&&(e<c||t<0))&&(r.push(h.diagnostic),s=Math.min(a,s),o=Math.max(c,o))});let l=i.state.facet(En).tooltipFilter;return l&&(r=l(r)),r.length?{pos:s,end:o,above:i.state.doc.lineAt(s).to<o,create(){return{dom:HT(i,r)}}}:null}function HT(i,e){return ai("ul",{class:"cm-tooltip-lint"},e.map(t=>X_(i,t,!1)))}const FT=i=>{let e=i.state.field(Ot,!1);(!e||!e.panel)&&i.dispatch({effects:q_(i.state,[Pc.of(!0)])});let t=Zx(i,Ro.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},jf=i=>{let e=i.state.field(Ot,!1);return!e||!e.panel?!1:(i.dispatch({effects:Pc.of(!1)}),!0)},VT=i=>{let e=i.state.field(Ot,!1);if(!e)return!1;let t=i.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(i.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},jT=[{key:"Mod-Shift-m",run:FT},{key:"F8",run:VT}],UT=ct.fromClass(class{constructor(i){this.view=i,this.timeout=-1,this.set=!0;let{delay:e}=i.state.facet(En);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let i=Date.now();if(i<this.lintTime-10)setTimeout(this.run,this.lintTime-i);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(En);Promise.all(t.map(n=>Promise.resolve(n(this.view)))).then(n=>{let r=n.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(IT(this.view.state,r))},n=>{Kt(this.view.state,n)})}}update(i){let e=i.state.facet(En);(i.docChanged||e!=i.startState.facet(En))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),En=X.define({combine(i){return Object.assign({sources:i.map(e=>e.source)},cn(i.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:UT});function K_(i){let e=[];if(i)e:for(let{name:t}of i){for(let n=0;n<t.length;n++){let r=t[n];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function X_(i,e,t){var n;let r=t?K_(e.actions):[];return ai("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ai("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(n=e.actions)===null||n===void 0?void 0:n.map((s,o)=>{let l=u=>{u.preventDefault();let f=Gn(i.state.field(Ot).diagnostics,e);f&&s.apply(i,f.from,f.to)},{name:a}=s,c=r[o]?a.indexOf(r[o]):-1,h=c<0?a:[a.slice(0,c),ai("u",a.slice(c,c+1)),a.slice(c+1)];return ai("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${a}${c<0?"":` (access key "${r[o]})"`}.`},h)}),e.source&&ai("div",{class:"cm-diagnosticSource"},e.source))}class zT extends gi{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return ai("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Uf{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=X_(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ro{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)jf(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=K_(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==r.keyCode){let a=Gn(this.view.state.field(Ot).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;r.preventDefault()},n=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=ai("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=ai("div",{class:"cm-panel-lint"},this.list,ai("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>jf(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Ot).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Ot),n=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let c=-1,h;for(let u=n;u<this.items.length;u++)if(this.items[u].diagnostic==a.diagnostic){c=u;break}c<0?(h=new Uf(this.view,a.diagnostic),this.items.splice(n,0,h),r=!0):(h=this.items[c],c>n&&(this.items.splice(n,c-n),r=!0)),t&&h.diagnostic==t.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),s=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new Uf(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{o.top<l.top?this.list.scrollTop-=l.top-o.top:o.bottom>l.bottom&&(this.list.scrollTop+=o.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Ot),n=Gn(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:$_.of(n)})}static open(e){return new Ro(e)}}function WT(i,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(i)}</svg>')`}function Pl(i){return WT(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const GT=Q.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Pl("#d11")},".cm-lintRange-warning":{backgroundImage:Pl("orange")},".cm-lintRange-info":{backgroundImage:Pl("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),qT=[oS(),Tx(),TE(),eE(),_x(),be.allowMultipleSelections.of(!0),VS(),bc(rE,{fallback:!0}),vT(),Hx(),jx(),So.of([...ET,...EA,...NE,...JS,...PT,...jT])],$T=["standardSQL","msSQL","mySQL","mariaDB","sqlite","cassandra","plSQL","hive","pgSQL","gql","gpSQL","sparkSQL","esper"],zf={python:()=>I(()=>import("./assets/index-Cf0ywdAX.js"),__vite__mapDeps([182,183]),import.meta.url).then(i=>i.python()),c:()=>I(()=>import("./assets/clike-CFERkOWz.js"),[],import.meta.url).then(i=>ri.define(i.c)),cpp:()=>I(()=>import("./assets/clike-CFERkOWz.js"),[],import.meta.url).then(i=>ri.define(i.cpp)),markdown:async()=>{const[i,e]=await Promise.all([I(()=>import("./assets/index-BM2zRQ2K.js"),__vite__mapDeps([184,185,183,186,187]),import.meta.url),I(()=>import("./assets/frontmatter-CjVD65dF.js"),__vite__mapDeps([188,189]),import.meta.url)]);return i.markdown({extensions:[e.frontmatter]})},json:()=>I(()=>import("./assets/index-BnFMPAtm.js"),__vite__mapDeps([190,183]),import.meta.url).then(i=>i.json()),html:()=>I(()=>import("./assets/index-tQb5O2Iq.js"),__vite__mapDeps([185,183,186,187]),import.meta.url).then(i=>i.html()),css:()=>I(()=>import("./assets/index-D_u4gRAp.js"),__vite__mapDeps([186,183]),import.meta.url).then(i=>i.css()),javascript:()=>I(()=>import("./assets/index-bMZ-jrtJ.js"),__vite__mapDeps([187,183]),import.meta.url).then(i=>i.javascript()),typescript:()=>I(()=>import("./assets/index-bMZ-jrtJ.js"),__vite__mapDeps([187,183]),import.meta.url).then(i=>i.javascript({typescript:!0})),yaml:()=>I(()=>import("./assets/yaml-DsCXHVTH.js"),[],import.meta.url).then(i=>ri.define(i.yaml)),dockerfile:()=>I(()=>import("./assets/dockerfile-C8FRPiPq.js"),[],import.meta.url).then(i=>ri.define(i.dockerFile)),shell:()=>I(()=>import("./assets/shell-bahM2fKw.js"),[],import.meta.url).then(i=>ri.define(i.shell)),r:()=>I(()=>import("./assets/r-DUYO_cvP.js"),[],import.meta.url).then(i=>ri.define(i.r)),sql:()=>I(()=>import("./assets/sql-C4g8LzGK.js"),[],import.meta.url).then(i=>ri.define(i.standardSQL)),...Object.fromEntries($T.map(i=>["sql-"+i,()=>I(()=>import("./assets/sql-C4g8LzGK.js"),[],import.meta.url).then(e=>ri.define(e[i]))]))},KT={py:"python",md:"markdown",js:"javascript",ts:"typescript",sh:"shell"};async function XT(i){const e=zf[i]||zf[KT[i]]||void 0;if(e)return e()}function JT(i){let e,t,n;return{c(){e=Y("div"),t=Y("div"),C(t,"class",n="codemirror-wrapper "+i[0]+" svelte-scxcch"),C(e,"class","wrap svelte-scxcch")},m(r,s){j(r,e,s),q(e,t),i[14](t)},p(r,[s]){s&1&&n!==(n="codemirror-wrapper "+r[0]+" svelte-scxcch")&&C(t,"class",n)},i:Ee,o:Ee,d(r){r&&V(e),i[14](null)}}}function YT(i){let e=i.dom.querySelectorAll(".cm-gutterElement");if(e.length===0)return null;for(var t=0;t<e.length;t++){let n=e[t],r=getComputedStyle(n)?.height??"0px";if(r!="0px")return r}return null}function ZT(i,e,t){let{class_names:n=""}=e,{value:r=""}=e,{dark_mode:s}=e,{basic:o=!0}=e,{language:l}=e,{lines:a=5}=e,{max_lines:c=null}=e,{extensions:h=[]}=e,{use_tab:u=!0}=e,{readonly:f=!1}=e,{placeholder:d=void 0}=e,{wrap_lines:p=!1}=e;const g=mo();let m,_,k;async function y(H){const S=await XT(H);t(13,m=S)}function w(H){k&&H!==k.state.doc.toString()&&k.dispatch({changes:{from:0,to:k.state.doc.length,insert:H}})}function A(){k&&k.requestMeasure({read:x})}function M(){const H=new Q({parent:_,state:B(r)});return H.dom.addEventListener("focus",R,!0),H.dom.addEventListener("blur",P,!0),H}function R(){g("focus")}function P(){g("blur")}function x(H){let S=H.dom.querySelector(".cm-scroller");if(!S)return null;const ie=YT(H);if(!ie)return null;const N=a==1?1:a+1;S.style.minHeight=`calc(${ie} * ${N})`,c&&(S.style.maxHeight=`calc(${ie} * ${c+1})`)}function E(H){if(H.docChanged){const ie=H.state.doc.toString();t(2,r=ie),g("change",ie)}k.requestMeasure({read:x})}function T(){return[...ee(o,u,d,f,m),D,...oe(),...h]}const D=Q.theme({"&":{fontSize:"var(--text-sm)",backgroundColor:"var(--border-color-secondary)"},".cm-content":{paddingTop:"5px",paddingBottom:"5px",color:"var(--body-text-color)",fontFamily:"var(--font-mono)",minHeight:"100%"},".cm-gutterElement":{marginRight:"var(--spacing-xs)"},".cm-gutters":{marginRight:"1px",borderRight:"1px solid var(--border-color-primary)",backgroundColor:"var(--block-background-fill);",color:"var(--body-text-color-subdued)"},".cm-focused":{outline:"none"},".cm-scroller":{height:"auto"},".cm-cursor":{borderLeftColor:"var(--body-text-color)"}});function B(H){return be.create({doc:H??void 0,extensions:T()})}function ee(H,S,ie,N,Re){const Z=[Q.editable.of(!N),be.readOnly.of(N),Q.contentAttributes.of({"aria-label":"Code input container"})];return H&&Z.push(qT),S&&Z.push(So.of([AA])),ie&&Z.push(Rx(ie)),Re&&Z.push(Re),Z.push(Q.updateListener.of(E)),p&&Z.push(Q.lineWrapping),Z}function oe(){const H=[];return s?H.push(IA):H.push(zA),H}function G(){k?.dispatch({effects:de.reconfigure.of(T())})}Mr(()=>(k=M(),()=>k?.destroy()));function he(H){wt[H?"unshift":"push"](()=>{_=H,t(1,_)})}return i.$$set=H=>{"class_names"in H&&t(0,n=H.class_names),"value"in H&&t(2,r=H.value),"dark_mode"in H&&t(3,s=H.dark_mode),"basic"in H&&t(4,o=H.basic),"language"in H&&t(5,l=H.language),"lines"in H&&t(6,a=H.lines),"max_lines"in H&&t(7,c=H.max_lines),"extensions"in H&&t(8,h=H.extensions),"use_tab"in H&&t(9,u=H.use_tab),"readonly"in H&&t(10,f=H.readonly),"placeholder"in H&&t(11,d=H.placeholder),"wrap_lines"in H&&t(12,p=H.wrap_lines)},i.$$.update=()=>{i.$$.dirty&32&&y(l),i.$$.dirty&9216&&G(),i.$$.dirty&4&&w(r)},A(),[n,_,r,s,o,l,a,c,h,u,f,d,p,m,he]}class QT extends Yt{constructor(e){super(),Jt(this,e,ZT,JT,vt,{class_names:0,value:2,dark_mode:3,basic:4,language:5,lines:6,max_lines:7,extensions:8,use_tab:9,readonly:10,placeholder:11,wrap_lines:12})}get class_names(){return this.$$.ctx[0]}set class_names(e){this.$$set({class_names:e}),O()}get value(){return this.$$.ctx[2]}set value(e){this.$$set({value:e}),O()}get dark_mode(){return this.$$.ctx[3]}set dark_mode(e){this.$$set({dark_mode:e}),O()}get basic(){return this.$$.ctx[4]}set basic(e){this.$$set({basic:e}),O()}get language(){return this.$$.ctx[5]}set language(e){this.$$set({language:e}),O()}get lines(){return this.$$.ctx[6]}set lines(e){this.$$set({lines:e}),O()}get max_lines(){return this.$$.ctx[7]}set max_lines(e){this.$$set({max_lines:e}),O()}get extensions(){return this.$$.ctx[8]}set extensions(e){this.$$set({extensions:e}),O()}get use_tab(){return this.$$.ctx[9]}set use_tab(e){this.$$set({use_tab:e}),O()}get readonly(){return this.$$.ctx[10]}set readonly(e){this.$$set({readonly:e}),O()}get placeholder(){return this.$$.ctx[11]}set placeholder(e){this.$$set({placeholder:e}),O()}get wrap_lines(){return this.$$.ctx[12]}set wrap_lines(e){this.$$set({wrap_lines:e}),O()}}const eC="data:image/svg+xml,%3c!--%20Lightning%20https://iconscout.com/icons/lightning%20by%20IconLauk%20https://iconscout.com/contributors/icon-lauk%20on%20IconScout%20https://iconscout.com'%20--%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2032%2032'%20viewBox='0%200%2032%2032'%20id='lightning'%3e%3cpath%20fill='%23ff7c00'%20d='M26.9,10.5C26.7,10.2,26.4,10,26,10h-9V2c0-0.4-0.3-0.8-0.7-1c-0.4-0.1-0.9,0-1.1,0.4l-10,14c-0.2,0.3-0.3,0.7-0.1,1%20C5.3,16.8,5.6,17,6,17h8.8L13,29.9c-0.1,0.5,0.2,0.9,0.6,1.1c0.1,0,0.2,0.1,0.3,0.1c0.3,0,0.7-0.2,0.8-0.5l12-19%20C27,11.2,27,10.8,26.9,10.5z'/%3e%3c/svg%3e";function tC(i){let e,t,n,r,s,o,l,a,c;return{c(){e=Y("div"),t=Y("div"),n=Y("button"),n.innerHTML=`Run
							<div class="shortcut svelte-jl2f0n">+</div>`,r=Se(),s=Y("div"),o=Se(),l=Y("div"),l.innerHTML=`<img src="${eC}" alt="lightning icon" class="lightning-logo svelte-jl2f0n"/>
					Interactive`,C(n,"class","button svelte-jl2f0n"),C(t,"class","run svelte-jl2f0n"),C(e,"class","buttons svelte-jl2f0n"),ne(s,"flex-grow","1"),C(l,"class","loading-section svelte-jl2f0n")},m(h,u){j(h,e,u),q(e,t),q(t,n),j(h,r,u),j(h,s,u),j(h,o,u),j(h,l,u),a||(c=Fs(n,"click",i[12]),a=!0)},p:Ee,d(h){h&&(V(e),V(r),V(s),V(o),V(l)),a=!1,c()}}}function iC(i){let e,t,n,r,s,o;return{c(){e=Y("div"),t=Se(),n=Y("div"),r=Y("div"),s=Se(),o=fe(i[3]),ne(e,"display","flex"),C(r,"class","loading-dot svelte-jl2f0n"),C(n,"class","loading-section svelte-jl2f0n")},m(l,a){j(l,e,a),j(l,t,a),j(l,n,a),q(n,r),q(n,s),q(n,o)},p(l,a){a&8&&je(o,l[3])},d(l){l&&(V(e),V(t),V(n))}}}function nC(i){let e,t,n;function r(o){i[13](o)}let s={language:"python",lines:10,readonly:!i[1],dark_mode:i[4]==="dark"};return i[0]!==void 0&&(s.value=i[0]),e=new QT({props:s}),wt.push(()=>vr(e,"value",r)),{c(){at(e.$$.fragment)},m(o,l){et(e,o,l),n=!0},p(o,l){const a={};l&2&&(a.readonly=!o[1]),l&16&&(a.dark_mode=o[4]==="dark"),!t&&l&1&&(t=!0,a.value=o[0],wr(()=>t=!1)),e.$set(a)},i(o){n||(re(e.$$.fragment,o),n=!0)},o(o){se(e.$$.fragment,o),n=!1},d(o){tt(e,o)}}}function Wf(i){let e,t;const n=i[11].default,r=Wr(n,i,i[16],null);return{c(){e=Y("div"),r&&r.c(),C(e,"class","preview svelte-jl2f0n")},m(s,o){j(s,e,o),r&&r.m(e,null),t=!0},p(s,o){r&&r.p&&(!t||o&65536)&&qr(r,n,s,s[16],t?Gr(n,s[16],o,null):$r(s[16]),null)},i(s){t||(re(r,s),t=!0)},o(s){se(r,s),t=!1},d(s){s&&V(e),r&&r.d(s)}}}function rC(i){let e,t,n,r,s,o,l,a,c,h,u;function f(m,_){return m[1]?tC:iC}let d=f(i),p=d(i);c=new av({props:{variant:"solid",padding:!1,$$slots:{default:[nC]},$$scope:{ctx:i}}});let g=i[1]&&Wf(i);return{c(){e=Y("div"),t=Y("div"),n=Y("div"),r=Y("div"),r.textContent="app.py",s=Se(),p.c(),o=Se(),l=Y("div"),a=Y("div"),at(c.$$.fragment),h=Se(),g&&g.c(),C(r,"class","code-header svelte-jl2f0n"),C(n,"class","loading-panel svelte-jl2f0n"),C(a,"class","code-editor svelte-jl2f0n"),te(a,"code-editor-border",i[1]),C(l,"class","child-container svelte-jl2f0n"),te(l,"horizontal",i[2]==="horizontal"),te(l,"vertical",i[2]==="vertical"),C(t,"class","wrapper svelte-jl2f0n"),C(e,"class","parent-container svelte-jl2f0n")},m(m,_){j(m,e,_),q(e,t),q(t,n),q(n,r),q(n,s),p.m(n,null),q(t,o),q(t,l),q(l,a),et(c,a,null),i[14](a),q(l,h),g&&g.m(l,null),i[15](e),u=!0},p(m,[_]){d===(d=f(m))&&p?p.p(m,_):(p.d(1),p=d(m),p&&(p.c(),p.m(n,null)));const k={};_&65555&&(k.$$scope={dirty:_,ctx:m}),c.$set(k),(!u||_&2)&&te(a,"code-editor-border",m[1]),m[1]?g?(g.p(m,_),_&2&&re(g,1)):(g=Wf(m),g.c(),re(g,1),g.m(l,null)):g&&(Ht(),se(g,1,1,()=>{g=null}),Ft()),(!u||_&4)&&te(l,"horizontal",m[2]==="horizontal"),(!u||_&4)&&te(l,"vertical",m[2]==="vertical")},i(m){u||(re(c.$$.fragment,m),re(g),u=!0)},o(m){se(c.$$.fragment,m),se(g),u=!1},d(m){m&&V(e),p.d(),tt(c),i[14](null),g&&g.d(),i[15](null)}}}function sC(i,e,t){let{$$slots:n={},$$scope:r}=e,{is_embed:s}=e,{theme_mode:o="system"}=e,{worker_proxy:l=void 0}=e,{code:a}=e,{layout:c=null}=e;const h=mo();let u="",{loaded:f=!1}=e;l?.addEventListener("progress-update",P=>{t(3,u=P.detail+"...")}),l?.addEventListener("initialization-completed",P=>{t(1,f=!0)});function d(P){P.key=="Enter"&&(P.metaKey||P.ctrlKey)&&(h("code",{code:a}),P.preventDefault())}function p(P){const x=window.__gradio_mode__==="website";let E;if(x)E="light";else{const D=new URL(window.location.toString()).searchParams.get("__theme");E=o||D||"system"}return E==="dark"||E==="light"?m(P,E):E=g(P),E}function g(P){const x=E();window?.matchMedia("(prefers-color-scheme: dark)")?.addEventListener("change",E);function E(){let T=window?.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light";return m(P,T),T}return x}function m(P,x){const E=s?P.parentElement:document.body;x==="dark"?E.classList.add("dark"):E.classList.remove("dark")}let _="light",k,y;Mr(()=>(t(4,_=p(k)),y.addEventListener("keydown",d,!0),()=>{y.removeEventListener("keydown",d,!0)}));const w=()=>{h("code",{code:a})};function A(P){a=P,t(0,a)}function M(P){wt[P?"unshift":"push"](()=>{y=P,t(6,y)})}function R(P){wt[P?"unshift":"push"](()=>{k=P,t(5,k)})}return i.$$set=P=>{"is_embed"in P&&t(8,s=P.is_embed),"theme_mode"in P&&t(9,o=P.theme_mode),"worker_proxy"in P&&t(10,l=P.worker_proxy),"code"in P&&t(0,a=P.code),"layout"in P&&t(2,c=P.layout),"loaded"in P&&t(1,f=P.loaded),"$$scope"in P&&t(16,r=P.$$scope)},i.$$.update=()=>{i.$$.dirty&8,i.$$.dirty&2,i.$$.dirty&1},[a,f,c,u,_,k,y,h,s,o,l,n,w,A,M,R,r]}class oC extends Yt{constructor(e){super(),Jt(this,e,sC,rC,vt,{is_embed:8,theme_mode:9,worker_proxy:10,code:0,layout:2,loaded:1})}get is_embed(){return this.$$.ctx[8]}set is_embed(e){this.$$set({is_embed:e}),O()}get theme_mode(){return this.$$.ctx[9]}set theme_mode(e){this.$$set({theme_mode:e}),O()}get worker_proxy(){return this.$$.ctx[10]}set worker_proxy(e){this.$$set({worker_proxy:e}),O()}get code(){return this.$$.ctx[0]}set code(e){this.$$set({code:e}),O()}get layout(){return this.$$.ctx[2]}set layout(e){this.$$set({layout:e}),O()}get loaded(){return this.$$.ctx[1]}set loaded(e){this.$$set({loaded:e}),O()}}function Gf(i){let e,t,n=i[1].message&&qf(i),r=i[1].stack&&$f(i);return{c(){n&&n.c(),e=Se(),r&&r.c(),t=Mt()},m(s,o){n&&n.m(s,o),j(s,e,o),r&&r.m(s,o),j(s,t,o)},p(s,o){s[1].message?n?n.p(s,o):(n=qf(s),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),s[1].stack?r?r.p(s,o):(r=$f(s),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(s){s&&(V(e),V(t)),n&&n.d(s),r&&r.d(s)}}}function qf(i){let e,t=i[1].message+"",n;return{c(){e=Y("p"),n=fe(t),C(e,"class","error-name svelte-1g4oy29")},m(r,s){j(r,e,s),q(e,n)},p(r,s){s&2&&t!==(t=r[1].message+"")&&je(n,t)},d(r){r&&V(e)}}}function $f(i){let e,t,n=i[1].stack+"",r;return{c(){e=Y("pre"),t=Y("code"),r=fe(n),C(e,"class","error-stack svelte-1g4oy29")},m(s,o){j(s,e,o),q(e,t),q(t,r)},p(s,o){o&2&&n!==(n=s[1].stack+"")&&je(r,n)},d(s){s&&V(e)}}}function lC(i){let e,t=i[1]&&Gf(i);return{c(){e=Y("div"),t&&t.c(),C(e,"class","error svelte-1g4oy29"),C(e,"slot","error")},m(n,r){j(n,e,r),t&&t.m(e,null)},p(n,r){n[1]?t?t.p(n,r):(t=Gf(n),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(n){n&&V(e),t&&t.d()}}}function aC(i){let e,t;return e=new sg({props:{i18n:i[2],absolute:!i[0],status:"error",timer:!1,queue_position:null,queue_size:null,translucent:!0,autoscroll:!1,$$slots:{error:[lC]},$$scope:{ctx:i}}}),{c(){at(e.$$.fragment)},m(n,r){et(e,n,r),t=!0},p(n,[r]){const s={};r&4&&(s.i18n=n[2]),r&1&&(s.absolute=!n[0]),r&10&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){tt(e,n)}}}function cC(i,e,t){let n;Ln(i,ec,o=>t(2,n=o)),tc();let{is_embed:r}=e,{error:s=void 0}=e;return i.$$set=o=>{"is_embed"in o&&t(0,r=o.is_embed),"error"in o&&t(1,s=o.error)},[r,s,n]}class J_ extends Yt{constructor(e){super(),Jt(this,e,cC,aC,vt,{is_embed:0,error:1})}get is_embed(){return this.$$.ctx[0]}set is_embed(e){this.$$set({is_embed:e}),O()}get error(){return this.$$.ctx[1]}set error(e){this.$$set({error:e}),O()}}const Lc="lite.local";function Rc(i){return i.host===window.location.host||i.host==="localhost:7860"||i.host==="127.0.0.1:7860"||i.host===Lc}var hC=Object.defineProperty,uC=(i,e,t)=>e in i?hC(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ae=(i,e,t)=>(uC(i,typeof e!="symbol"?e+"":e,t),t),Y_=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},ur=(i,e,t)=>(Y_(i,e,"read from private field"),t?t.call(i):e.get(i)),fC=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},dC=(i,e,t,n)=>(Y_(i,e,"write to private field"),e.set(i,t),t),Si,Ll=new Intl.Collator(0,{numeric:1}).compare;function Z_(i,e,t){return i=i.split("."),e=e.split("."),Ll(i[0],e[0])||Ll(i[1],e[1])||(e[2]=e.slice(2).join("."),t=/[.-]/.test(i[2]=i.slice(2).join(".")),t==/[.-]/.test(e[2])?Ll(i[2],e[2]):t?-1:1)}const pC="host",Q_="queue/data",mC="queue/join",Kf="upload",gC="login",_C="config",bC="info",yC="runtime",wC="sleeptime",vC="heartbeat",kC="component_server",xC="reset",SC="cancel",EC="https://gradio-space-api-fetcher-v2.hf.space/api",eb="This application is currently busy. Please try again. ",Zi="Connection errored out. ",An="Could not resolve app config. ",AC="Could not get space status. ",TC="Could not get API info. ",Ic="Space metadata could not be loaded. ",CC="Invalid URL. A full URL path is required.",OC="Not authorized to access this space. ",tb="Invalid credentials. Could not login. ",MC="Login credentials are required to access this space.",DC="File system access is only available in Node.js environments",ib="Root URL not found in client config",PC="Error uploading file";function nb(i,e,t){return e.startsWith("http://")||e.startsWith("https://")?t?i:e:i+e}async function Xf(i,e,t){try{return(await(await fetch(`https://huggingface.co/api/spaces/${i}/jwt`,{headers:{Authorization:`Bearer ${e}`,...t?{Cookie:t}:{}}})).json()).token||!1}catch{return!1}}function LC(i){let e={};return i.forEach(({api_name:t,id:n})=>{t&&(e[t]=n)}),e}async function RC(i){var e;const t=this.options.hf_token?{Authorization:`Bearer ${this.options.hf_token}`}:{};if(t["Content-Type"]="application/json",typeof window<"u"&&window.gradio_config&&location.origin!=="http://localhost:9876"&&!window.gradio_config.dev_mode){const n=window.gradio_config.root,r=window.gradio_config;let s=nb(i,r.root,!1);return r.root=s,{...r,path:n}}else if(i){const n=ob(i,_C),r=await this.fetch(n,{headers:t,credentials:"include"});if(r?.status===401&&!this.options.auth)throw new Error(MC);if(r?.status===401&&this.options.auth)throw new Error(tb);if(r?.status===200){let s=await r.json();return s.path=s.path??"",s.root=i,(e=s.dependencies)==null||e.forEach((o,l)=>{o.id===void 0&&(o.id=l)}),s}else if(r?.status===401)throw new Error(OC);throw new Error(An)}throw new Error(An)}async function IC(){const{http_protocol:i,host:e}=await Io(this.app_reference,this.options.hf_token);try{if(this.options.auth){const t=await rb(i,e,this.options.auth,this.fetch,this.options.hf_token);t&&this.set_cookies(t)}}catch(t){throw Error(t.message)}}async function rb(i,e,t,n,r){const s=new FormData;s.append("username",t?.[0]),s.append("password",t?.[1]);let o={};r&&(o.Authorization=`Bearer ${r}`);const l=await n(`${i}//${e}/${gC}`,{headers:o,method:"POST",body:s,credentials:"include"});if(l.status===200)return l.headers.get("set-cookie");throw l.status===401?new Error(tb):new Error(Ic)}function Rl(i){if(i.startsWith("http")){const{protocol:e,host:t,pathname:n}=new URL(i);return t.endsWith("hf.space")?{ws_protocol:"wss",host:t,http_protocol:e}:{ws_protocol:e==="https:"?"wss":"ws",http_protocol:e,host:t+(n!=="/"?n:"")}}else if(i.startsWith("file:"))return{ws_protocol:"ws",http_protocol:"http:",host:"lite.local"};return{ws_protocol:"wss",http_protocol:"https:",host:new URL(i).host}}const sb=i=>{let e=[];return i.split(/,(?=\s*[^\s=;]+=[^\s=;]+)/).forEach(n=>{const[r,s]=n.split(";")[0].split("=");r&&s&&e.push(`${r.trim()}=${s.trim()}`)}),e},Nc=/^[a-zA-Z0-9_\-\.]+\/[a-zA-Z0-9_\-\.]+$/,NC=/.*hf\.space\/{0,1}$/;async function Io(i,e){const t={};e&&(t.Authorization=`Bearer ${e}`);const n=i.trim().replace(/\/$/,"");if(Nc.test(n))try{const s=(await(await fetch(`https://huggingface.co/api/spaces/${n}/${pC}`,{headers:t})).json()).host;return{space_id:i,...Rl(s)}}catch{throw new Error(Ic)}if(NC.test(n)){const{ws_protocol:r,http_protocol:s,host:o}=Rl(n);return{space_id:o.replace(".hf.space",""),ws_protocol:r,http_protocol:s,host:o}}return{space_id:!1,...Rl(n)}}const ob=(...i)=>{try{return i.reduce((e,t)=>(e=e.replace(/\/+$/,""),t=t.replace(/^\/+/,""),new URL(t,e+"/").toString()))}catch{throw new Error(CC)}};function BC(i,e,t){const n={named_endpoints:{},unnamed_endpoints:{}};return Object.keys(i).forEach(r=>{(r==="named_endpoints"||r==="unnamed_endpoints")&&(n[r]={},Object.entries(i[r]).forEach(([s,{parameters:o,returns:l}])=>{var a,c,h,u;const f=((a=e.dependencies.find(g=>g.api_name===s||g.api_name===s.replace("/","")))==null?void 0:a.id)||t[s.replace("/","")]||-1,d=f!==-1?(c=e.dependencies.find(g=>g.id==f))==null?void 0:c.types:{generator:!1,cancel:!1};if(f!==-1&&((u=(h=e.dependencies.find(g=>g.id==f))==null?void 0:h.inputs)==null?void 0:u.length)!==o.length){const g=e.dependencies.find(m=>m.id==f).inputs.map(m=>{var _;return(_=e.components.find(k=>k.id===m))==null?void 0:_.type});try{g.forEach((m,_)=>{if(m==="state"){const k={component:"state",example:null,parameter_default:null,parameter_has_default:!0,parameter_name:null,hidden:!0};o.splice(_,0,k)}})}catch(m){console.error(m)}}const p=(g,m,_,k)=>({...g,description:FC(g?.type,_),type:HC(g?.type,m,_,k)||""});n[r][s]={parameters:o.map(g=>p(g,g?.component,g?.serializer,"parameter")),returns:l.map(g=>p(g,g?.component,g?.serializer,"return")),type:d}}))}),n}function HC(i,e,t,n){switch(i?.type){case"string":return"string";case"boolean":return"boolean";case"number":return"number"}if(t==="JSONSerializable"||t==="StringSerializable")return"any";if(t==="ListStringSerializable")return"string[]";if(e==="Image")return n==="parameter"?"Blob | File | Buffer":"string";if(t==="FileSerializable")return i?.type==="array"?n==="parameter"?"(Blob | File | Buffer)[]":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}[]":n==="parameter"?"Blob | File | Buffer":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}";if(t==="GallerySerializable")return n==="parameter"?"[(Blob | File | Buffer), (string | null)][]":"[{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}, (string | null))][]"}function FC(i,e){return e==="GallerySerializable"?"array of [file, label] tuples":e==="ListStringSerializable"?"array of strings":e==="FileSerializable"?"array of files or single file":i?.description}function Il(i,e){switch(i.msg){case"send_data":return{type:"data"};case"send_hash":return{type:"hash"};case"queue_full":return{type:"update",status:{queue:!0,message:eb,stage:"error",code:i.code,success:i.success}};case"heartbeat":return{type:"heartbeat"};case"unexpected_error":return{type:"unexpected_error",status:{queue:!0,message:i.message,stage:"error",success:!1}};case"estimation":return{type:"update",status:{queue:!0,stage:e||"pending",code:i.code,size:i.queue_size,position:i.rank,eta:i.rank_eta,success:i.success}};case"progress":return{type:"update",status:{queue:!0,stage:"pending",code:i.code,progress_data:i.progress_data,success:i.success}};case"log":return{type:"log",data:i};case"process_generating":return{type:"generating",status:{queue:!0,message:i.success?null:i.output.error,stage:i.success?"generating":"error",code:i.code,progress_data:i.progress_data,eta:i.average_duration,changed_state_ids:i.success?i.output.changed_state_ids:void 0},data:i.success?i.output:null};case"process_streaming":return{type:"streaming",status:{queue:!0,message:i.output.error,stage:"streaming",time_limit:i.time_limit,code:i.code,progress_data:i.progress_data,eta:i.eta},data:i.output};case"process_completed":return"error"in i.output?{type:"update",status:{queue:!0,message:i.output.error,visible:i.output.visible,duration:i.output.duration,stage:"error",code:i.code,success:i.success}}:{type:"complete",status:{queue:!0,message:i.success?void 0:i.output.error,stage:i.success?"complete":"error",code:i.code,progress_data:i.progress_data,changed_state_ids:i.success?i.output.changed_state_ids:void 0},data:i.success?i.output:null};case"process_starts":return{type:"update",status:{queue:!0,stage:"pending",code:i.code,size:i.rank,position:0,success:i.success,eta:i.eta},original_msg:"process_starts"}}return{type:"none",status:{stage:"error",queue:!0}}}const VC=(i=[],e)=>{const t=e?e.parameters:[];if(Array.isArray(i))return i.length>t.length&&console.warn("Too many arguments provided for the endpoint."),i;const n=[],r=Object.keys(i);return t.forEach((s,o)=>{if(i.hasOwnProperty(s.parameter_name))n[o]=i[s.parameter_name];else if(s.parameter_has_default)n[o]=s.parameter_default;else throw new Error(`No value provided for required parameter: ${s.parameter_name}`)}),r.forEach(s=>{if(!t.some(o=>o.parameter_name===s))throw new Error(`Parameter \`${s}\` is not a valid keyword argument. Please refer to the API for usage.`)}),n.forEach((s,o)=>{if(s===void 0&&!t[o].parameter_has_default)throw new Error(`No value provided for required parameter: ${t[o].parameter_name}`)}),n};async function jC(){if(this.api_info)return this.api_info;const{hf_token:i}=this.options,{config:e}=this,t={"Content-Type":"application/json"};if(i&&(t.Authorization=`Bearer ${i}`),!!e)try{let n,r;if(typeof window<"u"&&window.gradio_api_info)r=window.gradio_api_info;else{if(Z_(e?.version||"2.0.0","3.30")<0)n=await this.fetch(EC,{method:"POST",body:JSON.stringify({serialize:!1,config:JSON.stringify(e)}),headers:t,credentials:"include"});else{const s=ob(e.root,this.api_prefix,bC);n=await this.fetch(s,{headers:t,credentials:"include"})}if(!n.ok)throw new Error(Zi);r=await n.json()}return"api"in r&&(r=r.api),r.named_endpoints["/predict"]&&!r.unnamed_endpoints[0]&&(r.unnamed_endpoints[0]=r.named_endpoints["/predict"]),BC(r,e,this.api_map)}catch(n){""+n.message}}async function UC(i,e,t){var n;const r={};(n=this==null?void 0:this.options)!=null&&n.hf_token&&(r.Authorization=`Bearer ${this.options.hf_token}`);const s=1e3,o=[];let l;for(let a=0;a<e.length;a+=s){const c=e.slice(a,a+s),h=new FormData;c.forEach(f=>{h.append("files",f)});try{const f=t?`${i}${this.api_prefix}/${Kf}?upload_id=${t}`:`${i}${this.api_prefix}/${Kf}`;l=await this.fetch(f,{method:"POST",body:h,headers:r,credentials:"include"})}catch(f){throw new Error(Zi+f.message)}if(!l.ok){const f=await l.text();return{error:`HTTP ${l.status}: ${f}`}}const u=await l.json();u&&o.push(...u)}return{files:o}}async function zC(i,e,t,n){let r=(Array.isArray(i)?i:[i]).map(o=>o.blob);const s=r.filter(o=>o.size>(n??1/0));if(s.length)throw new Error(`File size exceeds the maximum allowed size of ${n} bytes: ${s.map(o=>o.name).join(", ")}`);return await Promise.all(await this.upload_files(e,r,t).then(async o=>{if(o.error)throw new Error(o.error);return o.files?o.files.map((l,a)=>new No({...i[a],path:l,url:`${e}${this.api_prefix}/file=${l}`})):[]}))}async function AM(i,e){return i.map(t=>new No({path:t.name,orig_name:t.name,blob:t,size:t.size,mime_type:t.type,is_stream:e}))}class No{constructor({path:e,url:t,orig_name:n,size:r,blob:s,is_stream:o,mime_type:l,alt_text:a}){ae(this,"path"),ae(this,"url"),ae(this,"orig_name"),ae(this,"size"),ae(this,"blob"),ae(this,"is_stream"),ae(this,"mime_type"),ae(this,"alt_text"),ae(this,"meta",{_type:"gradio.FileData"}),this.path=e,this.url=t,this.orig_name=n,this.size=r,this.blob=t?void 0:s,this.is_stream=o,this.mime_type=l,this.alt_text=a}}class WC{constructor(e,t){ae(this,"type"),ae(this,"command"),ae(this,"meta"),ae(this,"fileData"),this.type="command",this.command=e,this.meta=t}}typeof process<"u"&&process.versions&&process.versions.node;function Jf(i,e,t){for(;t.length>1;){const r=t.shift();if(typeof r=="string"||typeof r=="number")i=i[r];else throw new Error("Invalid key type")}const n=t.shift();if(typeof n=="string"||typeof n=="number")i[n]=e;else throw new Error("Invalid key type")}async function ja(i,e=void 0,t=[],n=!1,r=void 0){if(Array.isArray(i)){let s=[];return await Promise.all(i.map(async(o,l)=>{var a;let c=t.slice();c.push(String(l));const h=await ja(i[l],n?((a=r?.parameters[l])==null?void 0:a.component)||void 0:e,c,!1,r);s=s.concat(h)})),s}else{if(globalThis.Buffer&&i instanceof globalThis.Buffer||i instanceof Blob)return[{path:t,blob:new Blob([i]),type:e}];if(typeof i=="object"&&i!==null){let s=[];for(const o of Object.keys(i)){const l=[...t,o],a=i[o];s=s.concat(await ja(a,void 0,l,!1,r))}return s}}return[]}function GC(i,e){var t,n;let r=(n=(t=e?.dependencies)==null?void 0:t.find(s=>s.id==i))==null?void 0:n.queue;return r!=null?!r:!e.enable_queue}function qC(i,e){return new Promise((t,n)=>{const r=new MessageChannel;r.port1.onmessage=({data:s})=>{r.port1.close(),t(s)},window.parent.postMessage(i,e,[r.port2])})}function fr(i,e,t,n,r=!1){if(n==="input"&&!r)throw new Error("Invalid code path. Cannot skip state inputs for input.");if(n==="output"&&r)return i;let s=[],o=0;const l=n==="input"?e.inputs:e.outputs;for(let a=0;a<l.length;a++){const c=l[a],h=t.find(u=>u.id===c);if(h?.type==="state"){if(r)if(i.length===l.length){const u=i[o];s.push(u),o++}else s.push(null);else{o++;continue}continue}else{const u=i[o];s.push(u),o++}}return s}async function $C(i,e,t){const n=this;await KC(n,e);const r=await ja(e,void 0,[],!0,t);return(await Promise.all(r.map(async({path:o,blob:l,type:a})=>{if(!l)return{path:o,type:a};const c=await n.upload_files(i,[l]),h=c.files&&c.files[0];return{path:o,file_url:h,type:a,name:typeof File<"u"&&l instanceof File?l?.name:void 0}}))).forEach(({path:o,file_url:l,type:a,name:c})=>{if(a==="Gallery")Jf(e,l,o);else if(l){const h=new No({path:l,orig_name:c});Jf(e,h,o)}}),e}async function KC(i,e){var t,n;if(!(((t=i.config)==null?void 0:t.root)||((n=i.config)==null?void 0:n.root_url)))throw new Error(ib);await lb(i,e)}async function lb(i,e,t=[]){for(const n in e)e[n]instanceof WC?await XC(i,e,n):typeof e[n]=="object"&&e[n]!==null&&await lb(i,e[n],[...t,n])}async function XC(i,e,t){var n,r;let s=e[t];const o=((n=i.config)==null?void 0:n.root)||((r=i.config)==null?void 0:r.root_url);if(!o)throw new Error(ib);try{let l,a;if(typeof process<"u"&&process.versions&&process.versions.node){const f=await I(()=>import("./assets/__vite-browser-external-DFe-p4yY.js").then(p=>p._),[],import.meta.url);a=(await I(()=>import("./assets/__vite-browser-external-DFe-p4yY.js").then(p=>p._),[],import.meta.url)).resolve(process.cwd(),s.meta.path),l=await f.readFile(a)}else throw new Error(DC);const c=new Blob([l],{type:"application/octet-stream"}),h=await i.upload_files(o,[c]),u=h.files&&h.files[0];if(u){const f=new No({path:u,orig_name:s.meta.name||""});e[t]=f}}catch(l){console.error(PC,l)}}async function JC(i,e,t){const n={"Content-Type":"application/json"};this.options.hf_token&&(n.Authorization=`Bearer ${this.options.hf_token}`);try{var r=await this.fetch(i,{method:"POST",body:JSON.stringify(e),headers:{...n,...t},credentials:"include"})}catch{return[{error:Zi},500]}let s,o;try{s=await r.json(),o=r.status}catch(l){s={error:`Could not parse server response: ${l}`},o=500}return[s,o]}async function YC(i,e={}){let t=!1,n=!1;if(!this.config)throw new Error("Could not resolve app config");if(typeof i=="number")this.config.dependencies.find(r=>r.id==i);else{const r=i.replace(/^\//,"");this.config.dependencies.find(s=>s.id==this.api_map[r])}return new Promise(async(r,s)=>{const o=this.submit(i,e,null,null,!0);let l;for await(const a of o)a.type==="data"&&(n&&r(l),t=!0,l=a),a.type==="status"&&(a.stage==="error"&&s(a),a.stage==="complete"&&(n=!0,t&&r(l)))})}async function Tr(i,e,t){let n=e==="subdomain"?`https://huggingface.co/api/spaces/by-subdomain/${i}`:`https://huggingface.co/api/spaces/${i}`,r,s;try{if(r=await fetch(n),s=r.status,s!==200)throw new Error;r=await r.json()}catch{t({status:"error",load_status:"error",message:AC,detail:"NOT_FOUND"});return}if(!r||s!==200)return;const{runtime:{stage:o},id:l}=r;switch(o){case"STOPPED":case"SLEEPING":t({status:"sleeping",load_status:"pending",message:"Space is asleep. Waking it up...",detail:o}),setTimeout(()=>{Tr(i,e,t)},1e3);break;case"PAUSED":t({status:"paused",load_status:"error",message:"This space has been paused by the author. If you would like to try this demo, consider duplicating the space.",detail:o,discussions_enabled:await Yf(l)});break;case"RUNNING":case"RUNNING_BUILDING":t({status:"running",load_status:"complete",message:"Space is running.",detail:o});break;case"BUILDING":t({status:"building",load_status:"pending",message:"Space is building...",detail:o}),setTimeout(()=>{Tr(i,e,t)},1e3);break;case"APP_STARTING":t({status:"starting",load_status:"pending",message:"Space is starting...",detail:o}),setTimeout(()=>{Tr(i,e,t)},1e3);break;default:t({status:"space_error",load_status:"error",message:"This space is experiencing an issue.",detail:o,discussions_enabled:await Yf(l)});break}}const ab=async(i,e)=>{let t=0;const n=12,r=5e3;return new Promise(s=>{Tr(i,Nc.test(i)?"space_name":"subdomain",o=>{e(o),o.status==="running"||o.status==="error"||o.status==="paused"||o.status==="space_error"?s():(o.status==="sleeping"||o.status==="building")&&(t<n?(t++,setTimeout(()=>{ab(i,e).then(s)},r)):s())})})},ZC=/^(?=[^]*\b[dD]iscussions{0,1}\b)(?=[^]*\b[dD]isabled\b)[^]*$/;async function Yf(i){try{const e=await fetch(`https://huggingface.co/api/spaces/${i}/discussions`,{method:"HEAD"}),t=e.headers.get("x-error-message");return!(!e.ok||t&&ZC.test(t))}catch{return!1}}async function QC(i,e){const t={};e&&(t.Authorization=`Bearer ${e}`);try{const n=await fetch(`https://huggingface.co/api/spaces/${i}/${yC}`,{headers:t});if(n.status!==200)throw new Error("Space hardware could not be obtained.");const{hardware:r}=await n.json();return r.current}catch(n){throw new Error(n.message)}}async function eO(i,e,t){const n={};t&&(n.Authorization=`Bearer ${t}`);const r={seconds:e};try{const s=await fetch(`https://huggingface.co/api/spaces/${i}/${wC}`,{method:"POST",headers:{"Content-Type":"application/json",...n},body:JSON.stringify(r)});if(s.status!==200)throw new Error("Could not set sleep timeout on duplicated Space. Please visit *ADD HF LINK TO SETTINGS* to set a timeout manually to reduce billing charges.");return await s.json()}catch(s){throw new Error(s.message)}}const Zf=["cpu-basic","cpu-upgrade","cpu-xl","t4-small","t4-medium","a10g-small","a10g-large","a10g-largex2","a10g-largex4","a100-large","zero-a10g","h100","h100x8"];async function tO(i,e){const{hf_token:t,private:n,hardware:r,timeout:s,auth:o}=e;if(r&&!Zf.includes(r))throw new Error(`Invalid hardware type provided. Valid types are: ${Zf.map(m=>`"${m}"`).join(",")}.`);const{http_protocol:l,host:a}=await Io(i,t);let c=null;if(o){const m=await rb(l,a,o,fetch);m&&(c=sb(m))}const h={Authorization:`Bearer ${t}`,"Content-Type":"application/json",...c?{Cookie:c.join("; ")}:{}},u=(await(await fetch("https://huggingface.co/api/whoami-v2",{headers:h})).json()).name,f=i.split("/")[1],d={repository:`${u}/${f}`};n&&(d.private=!0);let p;try{r||(p=await QC(i,t))}catch(m){throw Error(Ic+m.message)}const g=r||p||"cpu-basic";d.hardware=g;try{const m=await fetch(`https://huggingface.co/api/spaces/${i}/duplicate`,{method:"POST",headers:h,body:JSON.stringify(d)});if(m.status===409)try{return await Ua.connect(`${u}/${f}`,e)}catch(k){throw console.error("Failed to connect Client instance:",k),k}else if(m.status!==200)throw new Error(m.statusText);const _=await m.json();return await eO(`${u}/${f}`,s||300,t),await Ua.connect(iO(_.url),e)}catch(m){throw new Error(m)}}function iO(i){const e=/https:\/\/huggingface.co\/spaces\/([^/]+\/[^/]+)/,t=i.match(e);if(t)return t[1]}class nO extends TransformStream{constructor(e={allowCR:!1}){super({transform:(t,n)=>{for(t=ur(this,Si)+t;;){const r=t.indexOf(`
`),s=e.allowCR?t.indexOf("\r"):-1;if(s!==-1&&s!==t.length-1&&(r===-1||r-1>s)){n.enqueue(t.slice(0,s)),t=t.slice(s+1);continue}if(r===-1)break;const o=t[r-1]==="\r"?r-1:r;n.enqueue(t.slice(0,o)),t=t.slice(r+1)}dC(this,Si,t)},flush:t=>{if(ur(this,Si)==="")return;const n=e.allowCR&&ur(this,Si).endsWith("\r")?ur(this,Si).slice(0,-1):ur(this,Si);t.enqueue(n)}}),fC(this,Si,"")}}Si=new WeakMap;function rO(i){let e=new TextDecoderStream,t=new nO({allowCR:!0});return i.pipeThrough(e).pipeThrough(t)}function sO(i){let t=/[:]\s*/.exec(i),n=t&&t.index;if(n)return[i.substring(0,n),i.substring(n+t[0].length)]}function Qf(i,e,t){i.get(e)||i.set(e,t)}async function*oO(i,e){if(!i.body)return;let t=rO(i.body),n,r=t.getReader(),s;for(;;){if(e&&e.aborted)return r.cancel();if(n=await r.read(),n.done)return;if(!n.value){s&&(yield s),s=void 0;continue}let[o,l]=sO(n.value)||[];o&&(o==="data"?(s||(s={}),s[o]=s[o]?s[o]+`
`+l:l):o==="event"?(s||(s={}),s[o]=l):o==="id"?(s||(s={}),s[o]=+l||l):o==="retry"&&(s||(s={}),s[o]=+l||void 0))}}async function lO(i,e){let t=new Request(i,e);Qf(t.headers,"Accept","text/event-stream"),Qf(t.headers,"Content-Type","application/json");let n=await fetch(t);if(!n.ok)throw n;return oO(n,t.signal)}async function aO(){let{event_callbacks:i,unclosed_events:e,pending_stream_messages:t,stream_status:n,config:r,jwt:s}=this;const o=this;if(!r)throw new Error("Could not resolve app config");n.open=!0;let l=null,a=new URLSearchParams({session_hash:this.session_hash}).toString(),c=new URL(`${r.root}${this.api_prefix}/${Q_}?${a}`);if(s&&c.searchParams.set("__sign",s),l=this.stream(c),!l){console.warn("Cannot connect to SSE endpoint: "+c.toString());return}l.onmessage=async function(h){let u=JSON.parse(h.data);if(u.msg==="close_stream"){uo(n,o.abort_controller);return}const f=u.event_id;if(!f)await Promise.all(Object.keys(i).map(d=>i[d](u)));else if(i[f]&&r){u.msg==="process_completed"&&["sse","sse_v1","sse_v2","sse_v2.1","sse_v3"].includes(r.protocol)&&e.delete(f);let d=i[f];typeof window<"u"&&typeof document<"u"?setTimeout(d,0,u):d(u)}else t[f]||(t[f]=[]),t[f].push(u)},l.onerror=async function(){await Promise.all(Object.keys(i).map(h=>i[h]({msg:"unexpected_error",message:Zi})))}}function uo(i,e){i&&(i.open=!1,e?.abort())}function cO(i,e,t){!i[e]?(i[e]=[],t.data.forEach((r,s)=>{i[e][s]=r})):t.data.forEach((r,s)=>{let o=hO(i[e][s],r);i[e][s]=o,t.data[s]=o})}function hO(i,e){return e.forEach(([t,n,r])=>{i=uO(i,n,t,r)}),i}function uO(i,e,t,n){if(e.length===0){if(t==="replace")return n;if(t==="append")return i+n;throw new Error(`Unsupported action: ${t}`)}let r=i;for(let o=0;o<e.length-1;o++)r=r[e[o]];const s=e[e.length-1];switch(t){case"replace":r[s]=n;break;case"append":r[s]+=n;break;case"add":Array.isArray(r)?r.splice(Number(s),0,n):r[s]=n;break;case"delete":Array.isArray(r)?r.splice(Number(s),1):delete r[s];break;default:throw new Error(`Unknown action: ${t}`)}return i}function fO(i,e={}){const t={close:()=>{console.warn("Method not implemented.")},onerror:null,onmessage:null,onopen:null,readyState:0,url:i.toString(),withCredentials:!1,CONNECTING:0,OPEN:1,CLOSED:2,addEventListener:()=>{throw new Error("Method not implemented.")},dispatchEvent:()=>{throw new Error("Method not implemented.")},removeEventListener:()=>{throw new Error("Method not implemented.")}};return lO(i,e).then(async n=>{t.readyState=t.OPEN;try{for await(const r of n)t.onmessage&&t.onmessage(r);t.readyState=t.CLOSED}catch(r){t.onerror&&t.onerror(r),t.readyState=t.CLOSED}}).catch(n=>{console.error(n),t.onerror&&t.onerror(n),t.readyState=t.CLOSED}),t}function dO(i,e={},t,n,r){var s;try{let o=function(me){(r||Vi[me.type])&&h(me)},l=function(){for(nt=!0;zt.length>0;)zt.shift()({value:void 0,done:!0})},a=function(me){nt||(zt.length>0?zt.shift()(me):St.push(me))},c=function(me){a(pO(me)),l()},h=function(me){a({value:me,done:!1})},u=function(){return St.length>0?Promise.resolve(St.shift()):nt?Promise.resolve({value:void 0,done:!0}):new Promise(me=>zt.push(me))};const{hf_token:f}=this.options,{fetch:d,app_reference:p,config:g,session_hash:m,api_info:_,api_map:k,stream_status:y,pending_stream_messages:w,pending_diff_streams:A,event_callbacks:M,unclosed_events:R,post_data:P,options:x,api_prefix:E}=this,T=this;if(!_)throw new Error("No API found");if(!g)throw new Error("Could not resolve app config");let{fn_index:D,endpoint_info:B,dependency:ee}=mO(_,i,k,g),oe=VC(e,B),G,he,H=g.protocol??"ws",S="",ie=()=>S;const N=typeof i=="number"?"/predict":i;let Re,Z=null,Ae=!1,K={},xt=typeof window<"u"&&typeof document<"u"?new URLSearchParams(window.location.search).toString():"";const Vi=((s=x?.events)==null?void 0:s.reduce((me,Ge)=>(me[Ge]=!0,me),{}))||{};async function un(){const me={stage:"complete",queue:!1,time:new Date};Ae=me,o({...me,type:"status",endpoint:N,fn_index:D});let Ge={},Gt={};H==="ws"?(G&&G.readyState===0?G.addEventListener("open",()=>{G.close()}):G.close(),Ge={fn_index:D,session_hash:m}):(uo(y,T.abort_controller),l(),Ge={event_id:Z},Gt={event_id:Z,session_hash:m,fn_index:D});try{if(!g)throw new Error("Could not resolve app config");"event_id"in Gt&&await d(`${g.root}${E}/${SC}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(Gt)}),await d(`${g.root}${E}/${xC}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(Ge)})}catch{console.warn("The `/reset` endpoint could not be called. Subsequent endpoint results may be unreliable.")}}const fn=async me=>{await this._resolve_hearbeat(me)};async function Ut(me){if(!g)return;let Ge=me.render_id;g.components=[...g.components.filter(le=>le.props.rendered_in!==Ge),...me.components],g.dependencies=[...g.dependencies.filter(le=>le.rendered_in!==Ge),...me.dependencies];const Gt=g.components.some(le=>le.type==="state"),z=g.dependencies.some(le=>le.targets.some(ye=>ye[1]==="unload"));g.connect_heartbeat=Gt||z,await fn(g),o({type:"render",data:me,endpoint:N,fn_index:D})}this.handle_blob(g.root,oe,B).then(async me=>{var Ge;if(Re={data:fr(me,ee,g.components,"input",!0)||[],event_data:t,fn_index:D,trigger_id:n},GC(D,g))o({type:"status",endpoint:N,stage:"pending",queue:!1,fn_index:D,time:new Date}),P(`${g.root}${E}/run${N.startsWith("/")?N:`/${N}`}${xt?"?"+xt:""}`,{...Re,session_hash:m}).then(([le,ye])=>{const Te=le.data;ye==200?(o({type:"data",endpoint:N,fn_index:D,data:fr(Te,ee,g.components,"output",x.with_null_state),time:new Date,event_data:t,trigger_id:n}),le.render_config&&Ut(le.render_config),o({type:"status",endpoint:N,fn_index:D,stage:"complete",eta:le.average_duration,queue:!1,time:new Date})):o({type:"status",stage:"error",endpoint:N,fn_index:D,message:le.error,queue:!1,time:new Date})}).catch(le=>{o({type:"status",stage:"error",message:le.message,endpoint:N,fn_index:D,queue:!1,time:new Date})});else if(H=="ws"){const{ws_protocol:le,host:ye}=await Io(p,f);o({type:"status",stage:"pending",queue:!0,endpoint:N,fn_index:D,time:new Date});let Te=new URL(`${le}://${nb(ye,g.path,!0)}/queue/join${xt?"?"+xt:""}`);this.jwt&&Te.searchParams.set("__sign",this.jwt),G=new WebSocket(Te),G.onclose=Fe=>{Fe.wasClean||o({type:"status",stage:"error",broken:!0,message:Zi,queue:!0,endpoint:N,fn_index:D,time:new Date})},G.onmessage=function(Fe){const Ue=JSON.parse(Fe.data),{type:Xe,status:_t,data:ut}=Il(Ue,K[D]);if(Xe==="update"&&_t&&!Ae)o({type:"status",endpoint:N,fn_index:D,time:new Date,..._t}),_t.stage==="error"&&G.close();else if(Xe==="hash"){G.send(JSON.stringify({fn_index:D,session_hash:m}));return}else Xe==="data"?G.send(JSON.stringify({...Re,session_hash:m})):Xe==="complete"?Ae=_t:Xe==="log"?o({type:"log",log:ut.log,level:ut.level,endpoint:N,duration:ut.duration,visible:ut.visible,fn_index:D}):Xe==="generating"&&o({type:"status",time:new Date,..._t,stage:_t?.stage,queue:!0,endpoint:N,fn_index:D});ut&&(o({type:"data",time:new Date,data:fr(ut.data,ee,g.components,"output",x.with_null_state),endpoint:N,fn_index:D,event_data:t,trigger_id:n}),Ae&&(o({type:"status",time:new Date,...Ae,stage:_t?.stage,queue:!0,endpoint:N,fn_index:D}),G.close()))},Z_(g.version||"2.0.0","3.6")<0&&addEventListener("open",()=>G.send(JSON.stringify({hash:m})))}else if(H=="sse"){o({type:"status",stage:"pending",queue:!0,endpoint:N,fn_index:D,time:new Date});var z=new URLSearchParams({fn_index:D.toString(),session_hash:m}).toString();let le=new URL(`${g.root}${E}/${Q_}?${xt?xt+"&":""}${z}`);if(this.jwt&&le.searchParams.set("__sign",this.jwt),he=this.stream(le),!he)return Promise.reject(new Error("Cannot connect to SSE endpoint: "+le.toString()));he.onmessage=async function(ye){const Te=JSON.parse(ye.data),{type:Fe,status:Ue,data:Xe}=Il(Te,K[D]);if(Fe==="update"&&Ue&&!Ae)o({type:"status",endpoint:N,fn_index:D,time:new Date,...Ue}),Ue.stage==="error"&&(he?.close(),l());else if(Fe==="data"){let[_t,ut]=await P(`${g.root}${E}/queue/data`,{...Re,session_hash:m,event_id:Z});ut!==200&&(o({type:"status",stage:"error",message:Zi,queue:!0,endpoint:N,fn_index:D,time:new Date}),he?.close(),l())}else Fe==="complete"?Ae=Ue:Fe==="log"?o({type:"log",log:Xe.log,level:Xe.level,endpoint:N,duration:Xe.duration,visible:Xe.visible,fn_index:D}):(Fe==="generating"||Fe==="streaming")&&o({type:"status",time:new Date,...Ue,stage:Ue?.stage,queue:!0,endpoint:N,fn_index:D});Xe&&(o({type:"data",time:new Date,data:fr(Xe.data,ee,g.components,"output",x.with_null_state),endpoint:N,fn_index:D,event_data:t,trigger_id:n}),Ae&&(o({type:"status",time:new Date,...Ae,stage:Ue?.stage,queue:!0,endpoint:N,fn_index:D}),he?.close(),l()))}}else if(H=="sse_v1"||H=="sse_v2"||H=="sse_v2.1"||H=="sse_v3"){o({type:"status",stage:"pending",queue:!0,endpoint:N,fn_index:D,time:new Date});let le="";typeof window<"u"&&typeof document<"u"&&(le=(Ge=window?.location)==null?void 0:Ge.hostname);const Te=le.includes(".dev.")?`https://moon-${le.split(".")[1]}.dev.spaces.huggingface.tech`:"https://huggingface.co",Fe=typeof window<"u"&&typeof document<"u"&&window.parent!=window,Ue=ee.zerogpu&&g.space_id;(Fe&&Ue?qC("zerogpu-headers",Te):Promise.resolve(null)).then(ut=>P(`${g.root}${E}/${mC}?${xt}`,{...Re,session_hash:m},ut)).then(async([ut,dn])=>{if(dn===503)o({type:"status",stage:"error",message:eb,queue:!0,endpoint:N,fn_index:D,time:new Date});else if(dn!==200)o({type:"status",stage:"error",message:Zi,queue:!0,endpoint:N,fn_index:D,time:new Date});else{Z=ut.event_id,S=Z;let Zn=async function(ki){try{const{type:bt,status:Ce,data:Je,original_msg:Qn}=Il(ki,K[D]);if(bt=="heartbeat")return;if(bt==="update"&&Ce&&!Ae)o({type:"status",endpoint:N,fn_index:D,time:new Date,original_msg:Qn,...Ce});else if(bt==="complete")Ae=Ce;else if(bt=="unexpected_error")console.error("Unexpected error",Ce?.message),o({type:"status",stage:"error",message:Ce?.message||"An Unexpected Error Occurred!",queue:!0,endpoint:N,fn_index:D,time:new Date});else if(bt==="log"){o({type:"log",log:Je.log,level:Je.level,endpoint:N,duration:Je.duration,visible:Je.visible,fn_index:D});return}else(bt==="generating"||bt==="streaming")&&(o({type:"status",time:new Date,...Ce,stage:Ce?.stage,queue:!0,endpoint:N,fn_index:D}),Je&&ee.connection!=="stream"&&["sse_v2","sse_v2.1","sse_v3"].includes(H)&&cO(A,Z,Je));Je&&(o({type:"data",time:new Date,data:fr(Je.data,ee,g.components,"output",x.with_null_state),endpoint:N,fn_index:D}),Je.render_config&&await Ut(Je.render_config),Ae&&(o({type:"status",time:new Date,...Ae,stage:Ce?.stage,queue:!0,endpoint:N,fn_index:D}),l())),(Ce?.stage==="complete"||Ce?.stage==="error")&&(M[Z]&&delete M[Z],Z in A&&delete A[Z])}catch(bt){console.error("Unexpected client exception",bt),o({type:"status",stage:"error",message:"An Unexpected Error Occurred!",queue:!0,endpoint:N,fn_index:D,time:new Date}),["sse_v2","sse_v2.1","sse_v3"].includes(H)&&(uo(y,T.abort_controller),y.open=!1,l())}};Z in w&&(w[Z].forEach(ki=>Zn(ki)),delete w[Z]),M[Z]=Zn,R.add(Z),y.open||await this.open_stream()}})}});let nt=!1;const St=[],zt=[],Wt={[Symbol.asyncIterator]:()=>Wt,next:u,throw:async me=>(c(me),u()),return:async()=>(l(),u()),cancel:un,event_id:ie};return Wt}catch(o){throw console.error("Submit function encountered an error:",o),o}}function pO(i){return{then:(e,t)=>t(i)}}function mO(i,e,t,n){let r,s,o;if(typeof e=="number")r=e,s=i.unnamed_endpoints[r],o=n.dependencies.find(l=>l.id==e);else{const l=e.replace(/^\//,"");r=t[l],s=i.named_endpoints[e.trim()],o=n.dependencies.find(a=>a.id==t[l])}if(typeof r!="number")throw new Error("There is no endpoint matching that name of fn_index matching that number.");return{fn_index:r,endpoint_info:s,dependency:o}}class Ua{constructor(e,t={events:["data"]}){ae(this,"app_reference"),ae(this,"options"),ae(this,"config"),ae(this,"api_prefix",""),ae(this,"api_info"),ae(this,"api_map",{}),ae(this,"session_hash",Math.random().toString(36).substring(2)),ae(this,"jwt",!1),ae(this,"last_status",{}),ae(this,"cookies",null),ae(this,"stream_status",{open:!1}),ae(this,"pending_stream_messages",{}),ae(this,"pending_diff_streams",{}),ae(this,"event_callbacks",{}),ae(this,"unclosed_events",new Set),ae(this,"heartbeat_event",null),ae(this,"abort_controller",null),ae(this,"stream_instance",null),ae(this,"current_payload"),ae(this,"view_api"),ae(this,"upload_files"),ae(this,"upload"),ae(this,"handle_blob"),ae(this,"post_data"),ae(this,"submit"),ae(this,"predict"),ae(this,"open_stream"),ae(this,"resolve_config"),ae(this,"resolve_cookies"),this.app_reference=e,t.events||(t.events=["data"]),this.options=t,this.current_payload={},this.view_api=jC.bind(this),this.upload_files=UC.bind(this),this.handle_blob=$C.bind(this),this.post_data=JC.bind(this),this.submit=dO.bind(this),this.predict=YC.bind(this),this.open_stream=aO.bind(this),this.resolve_config=RC.bind(this),this.resolve_cookies=IC.bind(this),this.upload=zC.bind(this),this.fetch=this.fetch.bind(this),this.handle_space_success=this.handle_space_success.bind(this),this.stream=this.stream.bind(this)}fetch(e,t){const n=new Headers(t?.headers||{});return this&&this.cookies&&n.append("Cookie",this.cookies),fetch(e,{...t,headers:n})}stream(e){const t=new Headers;return this&&this.cookies&&t.append("Cookie",this.cookies),this.abort_controller=new AbortController,this.stream_instance=fO(e.toString(),{credentials:"include",headers:t,signal:this.abort_controller.signal}),this.stream_instance}async init(){var e;if((typeof window>"u"||!("WebSocket"in window))&&!global.WebSocket){const t=await I(()=>import("./assets/wrapper-CviSselG-DCvi549i.js"),__vite__mapDeps([191,48]),import.meta.url);global.WebSocket=t.WebSocket}this.options.auth&&await this.resolve_cookies(),await this._resolve_config().then(({config:t})=>this._resolve_hearbeat(t)),this.api_info=await this.view_api(),this.api_map=LC(((e=this.config)==null?void 0:e.dependencies)||[])}async _resolve_hearbeat(e){if(e&&(this.config=e,this.api_prefix=e.api_prefix||"",this.config&&this.config.connect_heartbeat&&this.config.space_id&&this.options.hf_token&&(this.jwt=await Xf(this.config.space_id,this.options.hf_token,this.cookies))),e.space_id&&this.options.hf_token&&(this.jwt=await Xf(e.space_id,this.options.hf_token)),this.config&&this.config.connect_heartbeat){const t=new URL(`${this.config.root}${this.api_prefix}/${vC}/${this.session_hash}`);this.jwt&&t.searchParams.set("__sign",this.jwt),this.heartbeat_event||(this.heartbeat_event=this.stream(t))}}static async connect(e,t={events:["data"]}){const n=new this(e,t);return await n.init(),n}close(){uo(this.stream_status,this.abort_controller)}set_current_payload(e){this.current_payload=e}static async duplicate(e,t={events:["data"]}){return tO(e,t)}async _resolve_config(){const{http_protocol:e,host:t,space_id:n}=await Io(this.app_reference,this.options.hf_token),{status_callback:r}=this.options;n&&r&&await ab(n,r);let s;try{if(s=await this.resolve_config(`${e}//${t}`),!s)throw new Error(An);return this.config_success(s)}catch(o){if(n&&r)Tr(n,Nc.test(n)?"space_name":"subdomain",this.handle_space_success);else throw r&&r({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),Error(o)}}async config_success(e){if(this.config=e,this.api_prefix=e.api_prefix||"",typeof window<"u"&&typeof document<"u"&&window.location.protocol==="https:"&&(this.config.root=this.config.root.replace("http://","https://")),this.config.auth_required)return this.prepare_return_obj();try{this.api_info=await this.view_api()}catch(t){console.error(TC+t.message)}return this.prepare_return_obj()}async handle_space_success(e){var t;if(!this)throw new Error(An);const{status_callback:n}=this.options;if(n&&n(e),e.status==="running")try{if(this.config=await this._resolve_config(),this.api_prefix=((t=this==null?void 0:this.config)==null?void 0:t.api_prefix)||"",!this.config)throw new Error(An);return await this.config_success(this.config)}catch(r){throw n&&n({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),r}}async component_server(e,t,n){var r;if(!this.config)throw new Error(An);const s={},{hf_token:o}=this.options,{session_hash:l}=this;o&&(s.Authorization=`Bearer ${this.options.hf_token}`);let a,c=this.config.components.find(u=>u.id===e);(r=c?.props)!=null&&r.root_url?a=c.props.root_url:a=this.config.root;let h;if("binary"in n){h=new FormData;for(const u in n.data)u!=="binary"&&h.append(u,n.data[u]);h.set("component_id",e.toString()),h.set("fn_name",t),h.set("session_hash",l)}else h=JSON.stringify({data:n,component_id:e,fn_name:t,session_hash:l}),s["Content-Type"]="application/json";o&&(s.Authorization=`Bearer ${o}`);try{const u=await this.fetch(`${a}${this.api_prefix}/${kC}/`,{method:"POST",body:h,headers:s,credentials:"include"});if(!u.ok)throw new Error("Could not connect to component server: "+u.statusText);return await u.json()}catch(u){console.warn(u)}}set_cookies(e){this.cookies=sb(e).join("; ")}prepare_return_obj(){return{config:this.config,predict:this.predict,submit:this.submit,view_api:this.view_api,component_server:this.component_server}}}async function gO(i,e,t){console.debug("wasm_proxied_fetch",e,t);const n=new Request(e,t),r=new URL(n.url);if(!Rc(r))return console.debug("Fallback to original fetch"),fetch(e,t);const s=n.method;if(s!=="GET"&&s!=="POST"&&s!=="PUT"&&s!=="DELETE")throw new Error(`Unsupported method: ${s}`);const o={};n.headers.forEach((a,c)=>{o[c]=a});const l=await i.httpRequest({path:r.pathname,query_string:r.searchParams.toString(),method:s,headers:o,body:n.body});return new Response(l.body,{status:l.status,headers:new Headers(l.headers)})}function _O(i,e){return Rc(e)?new Cb(i,e):(console.debug("Fallback to original WebSocket"),new EventSource(e))}const cb=new URL(""+new URL("assets/theme-DM95r6er.css",import.meta.url).href,import.meta.url).href,bO="/theme.css";function yO(i){return yo(cb,i)}async function wO(i,e,t){const n=new Request(e),r=new URL(n.url);if(!Rc(r))return yo(e,t);const s=await i.httpRequest({method:"GET",path:r.pathname,query_string:"",headers:{}}),o=new TextDecoder().decode(s.body);document.querySelector(`style[data-wasm-path='${e}']`)?.remove(),r.pathname===bO&&(console.debug("Unmount the prebuilt theme.css before mounting the dynamic theme.css"),document.querySelector(`link[href='${cb}']`)?.remove());const a=document.createElement("style");a.setAttribute("data-wasm-path",e),a.textContent=o,t.appendChild(a)}const vO=""+new URL("assets/gradio-5.0.0b6-py3-none-any.whl",import.meta.url).href,kO=""+new URL("assets/gradio_client-1.4.0b3-py3-none-any.whl",import.meta.url).href;function xO(i){let e=i[16],t,n,r=ed(i);return{c(){r.c(),t=Mt()},m(s,o){r.m(s,o),j(s,t,o),n=!0},p(s,o){o[0]&65536&&vt(e,e=s[16])?(Ht(),se(r,1,1,Ee),Ft(),r=ed(s),r.c(),re(r,1),r.m(t.parentNode,t)):r.p(s,o)},i(s){n||(re(r),n=!0)},o(s){se(r),n=!1},d(s){s&&V(t),r.d(s)}}}function SO(i){let e,t,n={worker_proxy:i[13],layout:i[12],code:i[10],is_embed:i[2],$$slots:{default:[OO]},$$scope:{ctx:i}};return e=new oC({props:n}),i[29](e),{c(){at(e.$$.fragment)},m(r,s){et(e,r,s),t=!0},p(r,s){const o={};s[0]&8192&&(o.worker_proxy=r[13]),s[0]&4096&&(o.layout=r[12]),s[0]&1024&&(o.code=r[10]),s[0]&4&&(o.is_embed=r[2]),s[0]&107519|s[1]&2&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){se(e.$$.fragment,r),t=!1},d(r){i[29](null),tt(e,r)}}}function EO(i){let e,t;return e=new ug({props:{space:null,src:`http://${Lc}/`,info:i[0],container:i[1],is_embed:i[2],initial_height:i[3],eager:i[4],version:i[5],theme_mode:i[6],autoscroll:i[7],control_page_title:i[8],app_mode:i[9],worker_proxy:i[13],Client:i[17],mount_css:i[18]}}),{c(){at(e.$$.fragment)},m(n,r){et(e,n,r),t=!0},p(n,r){const s={};r[0]&1&&(s.info=n[0]),r[0]&2&&(s.container=n[1]),r[0]&4&&(s.is_embed=n[2]),r[0]&8&&(s.initial_height=n[3]),r[0]&16&&(s.eager=n[4]),r[0]&32&&(s.version=n[5]),r[0]&64&&(s.theme_mode=n[6]),r[0]&128&&(s.autoscroll=n[7]),r[0]&256&&(s.control_page_title=n[8]),r[0]&512&&(s.app_mode=n[9]),r[0]&8192&&(s.worker_proxy=n[13]),e.$set(s)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){tt(e,n)}}}function AO(i){let e,t;return e=new J_({props:{error:i[15],is_embed:i[2]}}),{c(){at(e.$$.fragment)},m(n,r){et(e,n,r),t=!0},p(n,r){const s={};r[0]&32768&&(s.error=n[15]),r[0]&4&&(s.is_embed=n[2]),e.$set(s)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){tt(e,n)}}}function ed(i){let e,t,n,r;const s=[AO,EO],o=[];function l(a,c){return a[15]?0:1}return e=l(i),t=o[e]=s[e](i),{c(){t.c(),n=Mt()},m(a,c){o[e].m(a,c),j(a,n,c),r=!0},p(a,c){let h=e;e=l(a),e===h?o[e].p(a,c):(Ht(),se(o[h],1,1,()=>{o[h]=null}),Ft(),t=o[e],t?t.p(a,c):(t=o[e]=s[e](a),t.c()),re(t,1),t.m(n.parentNode,n))},i(a){r||(re(t),r=!0)},o(a){se(t),r=!1},d(a){a&&V(n),o[e].d(a)}}}function TO(i){let e,t;return e=new ug({props:{space:null,src:`http://${Lc}/`,info:i[0],container:i[1],is_embed:i[2],initial_height:i[3],eager:i[4],version:i[5],theme_mode:i[6],autoscroll:i[7],control_page_title:i[8],app_mode:i[9],worker_proxy:i[13],Client:i[17],mount_css:i[18]}}),{c(){at(e.$$.fragment)},m(n,r){et(e,n,r),t=!0},p(n,r){const s={};r[0]&1&&(s.info=n[0]),r[0]&2&&(s.container=n[1]),r[0]&4&&(s.is_embed=n[2]),r[0]&8&&(s.initial_height=n[3]),r[0]&16&&(s.eager=n[4]),r[0]&32&&(s.version=n[5]),r[0]&64&&(s.theme_mode=n[6]),r[0]&128&&(s.autoscroll=n[7]),r[0]&256&&(s.control_page_title=n[8]),r[0]&512&&(s.app_mode=n[9]),r[0]&8192&&(s.worker_proxy=n[13]),e.$set(s)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){tt(e,n)}}}function CO(i){let e,t;return e=new J_({props:{error:i[15],is_embed:!0}}),{c(){at(e.$$.fragment)},m(n,r){et(e,n,r),t=!0},p(n,r){const s={};r[0]&32768&&(s.error=n[15]),e.$set(s)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){tt(e,n)}}}function td(i){let e,t,n,r;const s=[CO,TO],o=[];function l(a,c){return a[15]?0:1}return e=l(i),t=o[e]=s[e](i),{c(){t.c(),n=Mt()},m(a,c){o[e].m(a,c),j(a,n,c),r=!0},p(a,c){let h=e;e=l(a),e===h?o[e].p(a,c):(Ht(),se(o[h],1,1,()=>{o[h]=null}),Ft(),t=o[e],t?t.p(a,c):(t=o[e]=s[e](a),t.c()),re(t,1),t.m(n.parentNode,n))},i(a){r||(re(t),r=!0)},o(a){se(t),r=!1},d(a){a&&V(n),o[e].d(a)}}}function OO(i){let e=i[16],t,n,r=td(i);return{c(){r.c(),t=Mt()},m(s,o){r.m(s,o),j(s,t,o),n=!0},p(s,o){o[0]&65536&&vt(e,e=s[16])?(Ht(),se(r,1,1,Ee),Ft(),r=td(s),r.c(),re(r,1),r.m(t.parentNode,t)):r.p(s,o)},i(s){n||(re(r),n=!0)},o(s){se(r),n=!1},d(s){s&&V(t),r.d(s)}}}function MO(i){let e,t,n,r;const s=[SO,xO],o=[];function l(a,c){return a[11]?0:1}return e=l(i),t=o[e]=s[e](i),{c(){t.c(),n=Mt()},m(a,c){o[e].m(a,c),j(a,n,c),r=!0},p(a,c){let h=e;e=l(a),e===h?o[e].p(a,c):(Ht(),se(o[h],1,1,()=>{o[h]=null}),Ft(),t=o[e],t?t.p(a,c):(t=o[e]=s[e](a),t.c()),re(t,1),t.m(n.parentNode,n))},i(a){r||(re(t),r=!0)},o(a){se(t),r=!1},d(a){a&&V(n),o[e].d(a)}}}function DO(i,e,t){let{info:n}=e,{container:r}=e,{is_embed:s}=e,{initial_height:o}=e,{eager:l}=e,{version:a}=e,{theme_mode:c}=e,{autoscroll:h}=e,{control_page_title:u}=e,{app_mode:f}=e,{files:d}=e,{requirements:p}=e,{code:g}=e,{entrypoint:m}=e,{sharedWorkerMode:_}=e,{playground:k=!1}=e,{layout:y}=e;const w=new Eb({gradioWheelUrl:new URL(vO,import.meta.url).href,gradioClientWheelUrl:new URL(kO,import.meta.url).href,files:d??{},requirements:p??[],sharedWorkerMode:_??!1});$a(()=>{w.terminate()});let A=null;const M=S=>async(...ie)=>{try{t(15,A=null);const N=await S(...ie);return E(),N}catch(N){throw t(15,A=N),N}};if(w.runPythonCode=M(w.runPythonCode.bind(w)),w.runPythonFile=M(w.runPythonFile.bind(w)),w.writeFile=M(w.writeFile.bind(w)),w.renameFile=M(w.renameFile.bind(w)),w.unlink=M(w.unlink.bind(w)),w.install=M(w.install.bind(w)),w.addEventListener("initialization-error",S=>{t(15,A=S.detail)}),g!=null)w.runPythonCode(g);else if(m!=null)w.runPythonFile(m);else throw new Error("Either code or entrypoint must be provided.");yO(document.head);class R extends Ua{fetch(ie,N){return gO(w,ie,N)}stream(ie){return _O(w,ie)}}const P=async(S,ie)=>wO(w,S,ie);let x=0;function E(){t(16,x+=1)}let T=null;const D=w.runPythonCode,B=w.runPythonFile,ee=w.writeFile,oe=w.renameFile,G=w.unlink,he=w.install;function H(S){wt[S?"unshift":"push"](()=>{T=S,t(14,T)})}return i.$$set=S=>{"info"in S&&t(0,n=S.info),"container"in S&&t(1,r=S.container),"is_embed"in S&&t(2,s=S.is_embed),"initial_height"in S&&t(3,o=S.initial_height),"eager"in S&&t(4,l=S.eager),"version"in S&&t(5,a=S.version),"theme_mode"in S&&t(6,c=S.theme_mode),"autoscroll"in S&&t(7,h=S.autoscroll),"control_page_title"in S&&t(8,u=S.control_page_title),"app_mode"in S&&t(9,f=S.app_mode),"files"in S&&t(19,d=S.files),"requirements"in S&&t(20,p=S.requirements),"code"in S&&t(10,g=S.code),"entrypoint"in S&&t(21,m=S.entrypoint),"sharedWorkerMode"in S&&t(22,_=S.sharedWorkerMode),"playground"in S&&t(11,k=S.playground),"layout"in S&&t(12,y=S.layout)},i.$$.update=()=>{i.$$.dirty[0]&24576&&T?.$on("code",S=>{const{code:ie}=S.detail;w.runPythonCode(ie)})},[n,r,s,o,l,a,c,h,u,f,g,k,y,w,T,A,x,R,P,d,p,m,_,D,B,ee,oe,G,he,H]}class PO extends Yt{constructor(e){super(),Jt(this,e,DO,MO,vt,{info:0,container:1,is_embed:2,initial_height:3,eager:4,version:5,theme_mode:6,autoscroll:7,control_page_title:8,app_mode:9,files:19,requirements:20,code:10,entrypoint:21,sharedWorkerMode:22,playground:11,layout:12,run_code:23,run_file:24,write:25,rename:26,unlink:27,install:28},null,[-1,-1])}get info(){return this.$$.ctx[0]}set info(e){this.$$set({info:e}),O()}get container(){return this.$$.ctx[1]}set container(e){this.$$set({container:e}),O()}get is_embed(){return this.$$.ctx[2]}set is_embed(e){this.$$set({is_embed:e}),O()}get initial_height(){return this.$$.ctx[3]}set initial_height(e){this.$$set({initial_height:e}),O()}get eager(){return this.$$.ctx[4]}set eager(e){this.$$set({eager:e}),O()}get version(){return this.$$.ctx[5]}set version(e){this.$$set({version:e}),O()}get theme_mode(){return this.$$.ctx[6]}set theme_mode(e){this.$$set({theme_mode:e}),O()}get autoscroll(){return this.$$.ctx[7]}set autoscroll(e){this.$$set({autoscroll:e}),O()}get control_page_title(){return this.$$.ctx[8]}set control_page_title(e){this.$$set({control_page_title:e}),O()}get app_mode(){return this.$$.ctx[9]}set app_mode(e){this.$$set({app_mode:e}),O()}get files(){return this.$$.ctx[19]}set files(e){this.$$set({files:e}),O()}get requirements(){return this.$$.ctx[20]}set requirements(e){this.$$set({requirements:e}),O()}get code(){return this.$$.ctx[10]}set code(e){this.$$set({code:e}),O()}get entrypoint(){return this.$$.ctx[21]}set entrypoint(e){this.$$set({entrypoint:e}),O()}get sharedWorkerMode(){return this.$$.ctx[22]}set sharedWorkerMode(e){this.$$set({sharedWorkerMode:e}),O()}get playground(){return this.$$.ctx[11]}set playground(e){this.$$set({playground:e}),O()}get layout(){return this.$$.ctx[12]}set layout(e){this.$$set({layout:e}),O()}get run_code(){return this.$$.ctx[23]}get run_file(){return this.$$.ctx[24]}get write(){return this.$$.ctx[25]}get rename(){return this.$$.ctx[26]}get unlink(){return this.$$.ctx[27]}get install(){return this.$$.ctx[28]}}function hb(i){new MutationObserver(()=>{document.body.style.padding="0"}).observe(i.target,{childList:!0});const t=new PO({target:i.target,props:{info:i.info,container:i.container,is_embed:i.isEmbed,initial_height:i.initialHeight??"300px",eager:i.eager,version:"5-0-0-beta-6",theme_mode:i.themeMode,autoscroll:i.autoScroll,control_page_title:i.controlPageTitle,app_mode:i.appMode,files:i.files,requirements:i.requirements,code:i.code,entrypoint:i.entrypoint,sharedWorkerMode:i.sharedWorkerMode,playground:i.playground,layout:i.layout}});return{run_code:t.run_code,run_file:t.run_file,write:t.write,rename:t.rename,unlink:t.unlink,install:t.install,unmount(){t.$destroy()}}}globalThis.createGradioApp=hb;Mb(hb);export{dd as $,YO as A,av as B,ZO as C,Fs as D,qb as E,Gb as F,wt as G,$O as H,jO as I,on as J,vi as K,rv as L,Mt as M,Rn as N,QO as O,rt as P,FO as Q,uv as R,sg as S,Jo as T,HO as U,mM as V,Wa as W,BO as X,xb as Y,Ib as Z,ne as _,Yt as a,hM as a$,zO as a0,oM as a1,KO as a2,Mr as a3,Jb as a4,vr as a5,wr as a6,lM as a7,cM as a8,$a as a9,qO as aA,ld as aB,Da as aC,PS as aD,wM as aE,yM as aF,oi as aG,it as aH,L as aI,Jr as aJ,So as aK,It as aL,B0 as aM,Ki as aN,jS as aO,F0 as aP,zn as aQ,lE as aR,Q as aS,kM as aT,gM as aU,EM as aV,vM as aW,OS as aX,SM as aY,GA as aZ,dM as a_,R0 as aa,fc as ab,gt as ac,lS as ad,pe as ae,Me as af,He as ag,SS as ah,b as ai,US as aj,xM as ak,_M as al,ri as am,Ln as an,ec as ao,Ws as ap,RO as aq,cd as ar,IO as as,Zc as at,za as au,UO as av,AM as aw,WO as ax,dv as ay,I as az,se as b,sM as b0,iy as b1,Wb as b2,zb as b3,VO as b4,rM as b5,iM as b6,fi as b7,aM as b8,QT as b9,GO as ba,Xb as bb,JO as bc,XO as bd,po as be,Cr as bf,fo as bg,Us as bh,zs as bi,eM as bj,pM as bk,nM as bl,uM as bm,tM as bn,qa as bo,NO as bp,fM as bq,mh as br,tc as bs,ew as bt,tw as bu,gy as bv,xh as bw,Ga as bx,at as c,tt as d,Wr as e,O as f,$r as g,Gr as h,Jt as i,fe as j,j as k,je as l,et as m,V as n,Y as o,C as p,te as q,q as r,vt as s,re as t,qr as u,Ee as v,Se as w,Ht as x,Ft as y,mo as z};
//# sourceMappingURL=lite.js.map